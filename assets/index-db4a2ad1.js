var PA=Object.defineProperty;var RA=(Kr,Ni,Tn)=>Ni in Kr?PA(Kr,Ni,{enumerable:!0,configurable:!0,writable:!0,value:Tn}):Kr[Ni]=Tn;var y5=(Kr,Ni,Tn)=>(RA(Kr,typeof Ni!="symbol"?Ni+"":Ni,Tn),Tn);let je,IA=(async()=>{(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();class Kr{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ni=Kr,Tn={PROPERTYCHANGE:"propertychange"};class w5{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Wc=w5;function b5(i,t,e){let n,s;e=e||Jr;let r=0,o=i.length,a=!1;for(;r<o;)n=r+(o-r>>1),s=+e(i[n],t),s<0?r=n+1:(o=n,a=!s);return a?r:~r}function Jr(i,t){return i>t?1:i<t?-1:0}function Nl(i,t,e){if(i[0]<=t)return 0;const n=i.length;if(t<=i[n-1])return n-1;if(typeof e=="function"){for(let s=1;s<n;++s){const r=i[s];if(r===t)return s;if(r<t)return e(t,i[s-1],r)>0?s-1:s}return n-1}if(e>0){for(let s=1;s<n;++s)if(i[s]<t)return s-1;return n-1}if(e<0){for(let s=1;s<n;++s)if(i[s]<=t)return s;return n-1}for(let s=1;s<n;++s){if(i[s]==t)return s;if(i[s]<t)return i[s-1]-t<t-i[s]?s-1:s}return n-1}function x5(i,t,e){for(;t<e;){const n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function un(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let s=0;s<n;s++)i[i.length]=e[s]}function lr(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function S5(i,t,e){const n=t||Jr;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||e&&o===0)})}function To(){return!0}function Oo(){return!1}function Fo(){}function M5(i){let t=!1,e,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!lr(r,n))&&(t=!0,s=this,n=r,e=i.apply(this,arguments)),e}}function rh(i){for(const t in i)delete i[t]}function oh(i){let t;for(t in i)return!1;return!t}class C5 extends Wc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=e?new Ni(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let h;for(let l=0,c=s.length;l<c;++l)if("handleEvent"in s[l]?h=s[l].handleEvent(r):h=s[l].call(this,r),h===!1||r.propagationStopped){h=!1;break}if(--o[n]===0){let l=a[n];for(delete a[n];l--;)this.removeEventListener(n,Fo);delete o[n]}return h}disposeInternal(){this.listeners_&&rh(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const s=n.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=Fo,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}}const ah=C5,ue={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ce(i,t,e,n,s){if(n&&n!==i&&(e=e.bind(n)),s){const o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function Pl(i,t,e,n){return Ce(i,t,e,n,!0)}function Ze(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),rh(i))}class Rl extends ah{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ue.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Ce(this,t[r],e);return s}return Ce(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Pl(this,t[r],e)}else n=Pl(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)sp(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}Rl.prototype.on,Rl.prototype.once,Rl.prototype.un;function sp(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)Ze(i[t]);else Ze(i)}const rp=Rl;function pe(){throw new Error("Unimplemented abstract method.")}let E5=0;function ke(i){return i.ol_uid||(i.ol_uid=String(++E5))}class op extends Ni{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class A5 extends rp{constructor(t){super(),this.on,this.once,this.un,ke(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new op(n,t,e)),n=Tn.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new op(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const s=this.values_||(this.values_={});if(n)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],oh(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Vn=A5,L5={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class N5 extends Error{constructor(t){const e=L5[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const ap=N5,cn={ADD:"add",REMOVE:"remove"},hp={LENGTH:"length"};class Il extends Ni{constructor(t,e,n){super(t),this.element=e,this.index=n}}class P5 extends Vn{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(hp.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Il(cn.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Il(cn.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Il(cn.REMOVE,s,t)),this.dispatchEvent(new Il(cn.ADD,e,t))}updateLength_(){this.set(hp.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===t&&n!==e)throw new ap(58)}}const ms=P5,ur=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",R5=ur.includes("firefox");ur.includes("safari")&&!ur.includes("chrom")&&(ur.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ur));const I5=ur.includes("webkit")&&!ur.includes("edge"),T5=ur.includes("macintosh"),lp=typeof devicePixelRatio<"u"?devicePixelRatio:1,Yc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,O5=typeof Image<"u"&&Image.prototype.decode,up=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function ce(i,t){if(!i)throw new ap(t)}new Array(6);function _s(){return[1,0,0,1,0,0]}function F5(i,t,e,n,s,r,o){return i[0]=t,i[1]=e,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function k5(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function Pi(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function D5(i,t,e){return F5(i,t,0,0,e,0,0)}function ys(i,t,e,n,s,r,o,a){const h=Math.sin(r),l=Math.cos(r);return i[0]=n*l,i[1]=s*h,i[2]=-n*h,i[3]=s*l,i[4]=o*n*l-a*n*h+t,i[5]=o*s*h+a*s*l+e,i}function Tl(i,t){const e=j5(t);ce(e!==0,32);const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],h=t[5];return i[0]=o/e,i[1]=-s/e,i[2]=-r/e,i[3]=n/e,i[4]=(r*h-o*a)/e,i[5]=-(n*h-s*a)/e,i}function j5(i){return i[0]*i[3]-i[1]*i[2]}let cp;function Vc(i){const t="matrix("+i.join(", ")+")";if(Yc)return t;const e=cp||(cp=document.createElement("div"));return e.style.transform=t,e.style.transform}const Ii={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ol(i){const t=Mn();for(let e=0,n=i.length;e<n;++e)uh(t,i[e]);return t}function B5(i,t,e){const n=Math.min.apply(null,i),s=Math.min.apply(null,t),r=Math.max.apply(null,i),o=Math.max.apply(null,t);return On(n,s,r,o,e)}function hh(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function dp(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function Qr(i,t,e){let n,s;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?s=i[1]-e:i[3]<e?s=e-i[3]:s=0,n*n+s*s}function lh(i,t){return Xc(i,t[0],t[1])}function vs(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function Xc(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function Hc(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=t[0],a=t[1];let h=Ii.UNKNOWN;return o<e?h=h|Ii.LEFT:o>s&&(h=h|Ii.RIGHT),a<n?h=h|Ii.BELOW:a>r&&(h=h|Ii.ABOVE),h===Ii.UNKNOWN&&(h=Ii.INTERSECTING),h}function Mn(){return[1/0,1/0,-1/0,-1/0]}function On(i,t,e,n,s){return s?(s[0]=i,s[1]=t,s[2]=e,s[3]=n,s):[i,t,e,n]}function ko(i){return On(1/0,1/0,-1/0,-1/0,i)}function G5(i,t){const e=i[0],n=i[1];return On(e,n,e,n,t)}function fp(i,t,e,n,s){const r=ko(s);return gp(r,i,t,e,n)}function Do(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function pp(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function uh(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function gp(i,t,e,n,s){for(;e<n;e+=s)q5(i,t[e],t[e+1]);return i}function q5(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function Zc(i,t){let e;return e=t(Fl(i)),e||(e=t(kl(i)),e)||(e=t(Dl(i)),e)||(e=t(to(i)),e)?e:!1}function Kc(i){let t=0;return Bo(i)||(t=Te(i)*Ti(i)),t}function Fl(i){return[i[0],i[1]]}function kl(i){return[i[2],i[1]]}function Ds(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function U5(i,t){let e;return t==="bottom-left"?e=Fl(i):t==="bottom-right"?e=kl(i):t==="top-left"?e=to(i):t==="top-right"?e=Dl(i):ce(!1,13),e}function jo(i,t,e,n,s){const[r,o,a,h,l,c,d,g]=Jc(i,t,e,n);return On(Math.min(r,a,l,d),Math.min(o,h,c,g),Math.max(r,a,l,d),Math.max(o,h,c,g),s)}function Jc(i,t,e,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(e),a=Math.sin(e),h=s*o,l=s*a,c=r*o,d=r*a,g=i[0],p=i[1];return[g-h+d,p-l-c,g-h-d,p-l+c,g+h-d,p+l+c,g+h+d,p+l-c,g-h+d,p-l-c]}function Ti(i){return i[3]-i[1]}function $r(i,t,e){const n=e||Mn();return Vi(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):ko(n),n}function to(i){return[i[0],i[3]]}function Dl(i){return[i[2],i[3]]}function Te(i){return i[2]-i[0]}function Vi(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Bo(i){return i[2]<i[0]||i[3]<i[1]}function z5(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function W5(i,t,e){let n=!1;const s=Hc(i,t),r=Hc(i,e);if(s===Ii.INTERSECTING||r===Ii.INTERSECTING)n=!0;else{const o=i[0],a=i[1],h=i[2],l=i[3],c=t[0],d=t[1],g=e[0],p=e[1],y=(p-d)/(g-c);let v,x;r&Ii.ABOVE&&!(s&Ii.ABOVE)&&(v=g-(p-l)/y,n=v>=o&&v<=h),!n&&r&Ii.RIGHT&&!(s&Ii.RIGHT)&&(x=p-(g-h)*y,n=x>=a&&x<=l),!n&&r&Ii.BELOW&&!(s&Ii.BELOW)&&(v=g-(p-a)/y,n=v>=o&&v<=h),!n&&r&Ii.LEFT&&!(s&Ii.LEFT)&&(x=p-(g-o)*y,n=x>=a&&x<=l)}return n}function Y5(i,t,e,n){if(Bo(i))return ko(e);let s=[];if(n>1){const a=i[2]-i[0],h=i[3]-i[1];for(let l=0;l<n;++l)s.push(i[0]+a*l/n,i[1],i[2],i[1]+h*l/n,i[2]-a*l/n,i[3],i[0],i[3]-h*l/n)}else s=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(s,s,2);const r=[],o=[];for(let a=0,h=s.length;a<h;a+=2)r.push(s[a]),o.push(s[a+1]);return B5(r,o,e)}function mp(i,t){const e=t.getExtent(),n=Ds(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const s=Te(e),r=Math.floor((n[0]-e[0])/s)*s;i[0]-=r,i[2]-=r}return i}function V5(i,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[e[0],i[1],e[2],i[3]]];mp(i,t);const n=Te(e);if(Te(i)>n)return[[e[0],i[1],e[2],i[3]]];if(i[0]<e[0])return[[i[0]+n,i[1],e[2],i[3]],[e[0],i[1],i[2],i[3]]];if(i[2]>e[2])return[[i[0],i[1],e[2],i[3]],[e[0],i[1],i[2]-n,i[3]]]}return[i]}function ai(i,t,e){return Math.min(Math.max(i,t),e)}function X5(i,t,e,n,s,r){const o=s-e,a=r-n;if(o!==0||a!==0){const h=((i-e)*o+(t-n)*a)/(o*o+a*a);h>1?(e=s,n=r):h>0&&(e+=o*h,n+=a*h)}return js(i,t,e,n)}function js(i,t,e,n){const s=e-i,r=n-t;return s*s+r*r}function H5(i){const t=i.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<t;a++){const h=Math.abs(i[a][n]);h>r&&(r=h,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<t;a++){const h=-i[a][n]/i[n][n];for(let l=n;l<t+1;l++)n==l?i[a][l]=0:i[a][l]+=h*i[n][l]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let s=n-1;s>=0;s--)i[s][t]-=i[s][n]*e[n]}return e}function eo(i){return i*Math.PI/180}function io(i,t){const e=i%t;return e*t<0?e+t:e}function Cn(i,t,e){return i+e*(t-i)}function ch(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function _p(i,t){return Math.round(ch(i,t))}function Go(i,t){return Math.floor(ch(i,t))}function cr(i,t){return Math.ceil(ch(i,t))}const Z5=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,K5=/^([a-z]*)$|^hsla?\(.*\)$/i;function yp(i){return typeof i=="string"?i:wp(i)}function J5(i){const t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const Q5=function(){const i={};let t=0;return function(e){let n;if(i.hasOwnProperty(e))n=i[e];else{if(t>=1024){let s=0;for(const r in i)s++&3||(delete i[r],--t)}n=$5(e),i[e]=n,++t}return n}}();function jl(i){return Array.isArray(i)?i:Q5(i)}function $5(i){let t,e,n,s,r;if(K5.exec(i)&&(i=J5(i)),Z5.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const h=o===4||o===8;t=parseInt(i.substr(1+0*a,a),16),e=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),h?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,h&&(s=(s<<4)+s)),r=[t,e,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),vp(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),vp(r)):ce(!1,14);return r}function vp(i){return i[0]=ai(i[0]+.5|0,0,255),i[1]=ai(i[1]+.5|0,0,255),i[2]=ai(i[2]+.5|0,0,255),i[3]=ai(i[3],0,1),i}function wp(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+t+","+e+","+n+","+s+")"}class t_{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const s=bp(t,e,n);return s in this.cache_?this.cache_[s]:null}set(t,e,n,s){const r=bp(t,e,n);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function bp(i,t,e){const n=e?yp(e):"null";return t+":"+i+":"+n}const Bl=new t_,ze={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class e_ extends Vn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[ze.OPACITY]=t.opacity!==void 0?t.opacity:1,ce(typeof e[ze.OPACITY]=="number",64),e[ze.VISIBLE]=t.visible!==void 0?t.visible:!0,e[ze.Z_INDEX]=t.zIndex,e[ze.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[ze.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[ze.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[ze.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=ai(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return pe()}getLayerStatesArray(t){return pe()}getExtent(){return this.get(ze.EXTENT)}getMaxResolution(){return this.get(ze.MAX_RESOLUTION)}getMinResolution(){return this.get(ze.MIN_RESOLUTION)}getMinZoom(){return this.get(ze.MIN_ZOOM)}getMaxZoom(){return this.get(ze.MAX_ZOOM)}getOpacity(){return this.get(ze.OPACITY)}getSourceState(){return pe()}getVisible(){return this.get(ze.VISIBLE)}getZIndex(){return this.get(ze.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(ze.EXTENT,t)}setMaxResolution(t){this.set(ze.MAX_RESOLUTION,t)}setMinResolution(t){this.set(ze.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(ze.MAX_ZOOM,t)}setMinZoom(t){this.set(ze.MIN_ZOOM,t)}setOpacity(t){ce(typeof t=="number",64),this.set(ze.OPACITY,t)}setVisible(t){this.set(ze.VISIBLE,t)}setZIndex(t){this.set(ze.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const xp=e_,dr={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Oi={ANIMATING:0,INTERACTING:1},Xn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},i_=42,Qc=256,dh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},$c=class{constructor(i){this.code_=i.code,this.units_=i.units,this.extent_=i.extent!==void 0?i.extent:null,this.worldExtent_=i.worldExtent!==void 0?i.worldExtent:null,this.axisOrientation_=i.axisOrientation!==void 0?i.axisOrientation:"enu",this.global_=i.global!==void 0?i.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=i.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=i.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||dh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(i){this.global_=i,this.canWrapX_=!!(i&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(i){this.defaultTileGrid_=i}setExtent(i){this.extent_=i,this.canWrapX_=!!(this.global_&&i)}setWorldExtent(i){this.worldExtent_=i}setGetPointResolution(i){this.getPointResolutionFunc_=i}getPointResolutionFunc(){return this.getPointResolutionFunc_}},fh=6378137,qo=Math.PI*fh,n_=[-qo,-qo,qo,qo],s_=[-180,-85,180,85],Gl=fh*Math.log(Math.tan(Math.PI/2));class Uo extends $c{constructor(t){super({code:t,units:"m",extent:n_,global:!0,worldExtent:s_,getPointResolution:function(e,n){return e/Math.cosh(n[1]/fh)}})}}const Sp=[new Uo("EPSG:3857"),new Uo("EPSG:102100"),new Uo("EPSG:102113"),new Uo("EPSG:900913"),new Uo("http://www.opengis.net/def/crs/EPSG/0/3857"),new Uo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function r_(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e){t[s]=qo*i[s]/180;let r=fh*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>Gl?r=Gl:r<-Gl&&(r=-Gl),t[s+1]=r}return t}function o_(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e)t[s]=180*i[s]/qo,t[s+1]=360*Math.atan(Math.exp(i[s+1]/fh))/Math.PI-90;return t}const a_=6378137,Mp=[-180,-90,180,90],h_=Math.PI*a_/180;class no extends $c{constructor(t,e){super({code:t,units:"degrees",extent:Mp,axisOrientation:e,global:!0,metersPerUnit:h_,worldExtent:Mp})}}const Cp=[new no("CRS:84"),new no("EPSG:4326","neu"),new no("urn:ogc:def:crs:OGC:1.3:CRS84"),new no("urn:ogc:def:crs:OGC:2:84"),new no("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new no("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new no("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let td={};function l_(i){return td[i]||td[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function u_(i,t){td[i]=t}let zo={};function Wo(i,t,e){const n=i.getCode(),s=t.getCode();n in zo||(zo[n]={}),zo[n][s]=e}function Ep(i,t){let e;return i in zo&&t in zo[i]&&(e=zo[i][t]),e}function Ap(i,t){const e=(""+i).split("."),n=(""+t).split(".");for(let s=0;s<Math.max(e.length,n.length);s++){const r=parseInt(e[s]||"0",10),o=parseInt(n[s]||"0",10);if(r>o)return 1;if(o>r)return-1}return 0}function c_(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function d_(i,t,e){return i?t.replace("{x}",i[0].toFixed(e)).replace("{y}",i[1].toFixed(e)):""}function ql(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function ed(i,t){const e=Math.cos(t),n=Math.sin(t),s=i[0]*e-i[1]*n,r=i[1]*e+i[0]*n;return i[0]=s,i[1]=r,i}function f_(i,t){return i[0]*=t,i[1]*=t,i}function Lp(i,t){const e=i[0]-t[0],n=i[1]-t[1];return e*e+n*n}function Np(i,t){return Math.sqrt(Lp(i,t))}function id(i,t){if(t.canWrapX()){const e=Te(t.getExtent()),n=Pp(i,t,e);n&&(i[0]-=n*e)}return i}function Pp(i,t,e){const n=t.getExtent();let s=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||Te(n),s=Math.floor((i[0]-n[0])/e)),s}const Rp=63710088e-1;function Ip(i,t,e){e=e||Rp;const n=eo(i[1]),s=eo(t[1]),r=(s-n)/2,o=eo(t[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Ul(i,t){let e=0;const n=i.length;let s=i[n-1][0],r=i[n-1][1];for(let o=0;o<n;o++){const a=i[o][0],h=i[o][1];e+=eo(a-s)*(2+Math.sin(eo(r))+Math.sin(eo(h))),s=a,r=h}return e*t*t/2}function Tp(i,t){t=t||{};const e=t.radius||Rp,n=t.projection||"EPSG:3857",s=i.getType();s!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let r=0,o,a,h,l,c,d;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),r=Math.abs(Ul(o[0],e)),h=1,l=o.length;h<l;++h)r-=Math.abs(Ul(o[h],e));break}case"MultiPolygon":{for(o=i.getCoordinates(),h=0,l=o.length;h<l;++h)for(a=o[h],r+=Math.abs(Ul(a[0],e)),c=1,d=a.length;c<d;++c)r-=Math.abs(Ul(a[c],e));break}case"GeometryCollection":{const g=i.getGeometries();for(h=0,l=g.length;h<l;++h)r+=Tp(g[h],t);break}default:throw new Error("Unsupported geometry type: "+s)}return r}const Op={info:1,warn:2,error:3,none:4};let p_=Op.info;function Fp(...i){p_>Op.warn||console.warn(...i)}let nd=!0;function g_(i){nd=!(i===void 0||i)}function sd(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function rd(i,t){if(t!==void 0&&i!==t){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];i=t}return i}function kp(i){u_(i.getCode(),i),Wo(i,i,sd)}function m_(i){i.forEach(kp)}function Me(i){return typeof i=="string"?l_(i):i||null}function Dp(i,t,e,n){i=Me(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/dh[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=zl(i,Me("EPSG:4326"));if(a===rd&&o!=="degrees")s=t*i.getMetersPerUnit();else{let l=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];l=a(l,l,2);const c=Ip(l.slice(0,2),l.slice(2,4)),d=Ip(l.slice(4,6),l.slice(6,8));s=(c+d)/2}const h=n?dh[n]:i.getMetersPerUnit();h!==void 0&&(s/=h)}}return s}function od(i){m_(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Wo(t,e,sd)})})}function __(i,t,e,n){i.forEach(function(s){t.forEach(function(r){Wo(s,r,e),Wo(r,s,n)})})}function ad(i,t){return i?typeof i=="string"?Me(i):i:Me(t)}function jp(i){return function(t,e,n){const s=t.length;n=n!==void 0?n:2,e=e!==void 0?e:new Array(s);for(let r=0;r<s;r+=n){const o=i(t.slice(r,r+n)),a=o.length;for(let h=0,l=n;h<l;++h)e[r+h]=h>=a?t[r+h]:o[h]}return e}}function y_(i,t,e,n){const s=Me(i),r=Me(t);Wo(s,r,jp(e)),Wo(r,s,jp(n))}function Fn(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||zl(i,t)===sd)&&e}function zl(i,t){const e=i.getCode(),n=t.getCode();let s=Ep(e,n);return s||(s=rd),s}function ph(i,t){const e=Me(i),n=Me(t);return zl(e,n)}function hd(i,t,e){return ph(t,e)(i,void 0,i.length)}function ld(i,t,e,n){const s=ph(t,e);return Y5(i,s,void 0,n)}function ud(i,t){return i}function Hn(i,t){return nd&&!ql(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(nd=!1,Fp("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Bp(i,t){return i}function Bs(i,t){return i}function Gp(i,t,e){return function(n){let s,r;if(i.canWrapX()){const o=i.getExtent(),a=Te(o);n=n.slice(0),r=Pp(n,i,a),r&&(n[0]=n[0]-r*a),n[0]=ai(n[0],o[0],o[2]),n[1]=ai(n[1],o[1],o[3]),s=e(n)}else s=e(n);return r&&t.canWrapX()&&(s[0]+=r*Te(t.getExtent())),s}}function v_(){od(Sp),od(Cp),__(Cp,Sp,r_,o_)}v_();function qp(i,t,e){return function(n,s,r,o,a){if(!n)return;if(!s&&!t)return n;const h=t?0:r[0]*s,l=t?0:r[1]*s,c=a?a[0]:0,d=a?a[1]:0;let g=i[0]+h/2+c,p=i[2]-h/2+c,y=i[1]+l/2+d,v=i[3]-l/2+d;g>p&&(g=(p+g)/2,p=g),y>v&&(y=(v+y)/2,v=y);let x=ai(n[0],g,p),b=ai(n[1],y,v);if(o&&e&&s){const S=30*s;x+=-S*Math.log(1+Math.max(0,g-n[0])/S)+S*Math.log(1+Math.max(0,n[0]-p)/S),b+=-S*Math.log(1+Math.max(0,y-n[1])/S)+S*Math.log(1+Math.max(0,n[1]-v)/S)}return[x,b]}}function w_(i){return i}function cd(i,t,e,n){const s=Te(t)/e[0],r=Ti(t)/e[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function dd(i,t,e){let n=Math.min(i,t);const s=50;return n*=Math.log(1+s*Math.max(0,i/t-1))/s+1,e&&(n=Math.max(n,e),n/=Math.log(1+s*Math.max(0,e/i-1))/s+1),ai(n,e/2,t*2)}function b_(i,t,e,n){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const h=i[0],l=i[i.length-1],c=e?cd(h,e,o,n):h;if(a)return t?dd(s,c,l):ai(s,l,c);const d=Math.min(c,s),g=Math.floor(Nl(i,d,r));return i[g]>c&&g<i.length-1?i[g+1]:i[g]}}}function x_(i,t,e,n,s,r){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(o,a,h,l){if(o!==void 0){const c=s?cd(t,s,h,r):t;if(l)return n?dd(o,c,e):ai(o,e,c);const d=1e-9,g=Math.ceil(Math.log(t/c)/Math.log(i)-d),p=-a*(.5-d)+.5,y=Math.min(c,o),v=Math.floor(Math.log(t/y)/Math.log(i)+p),x=Math.max(g,v),b=t/Math.pow(i,x);return ai(b,e,c)}}}function Up(i,t,e,n,s){return e=e!==void 0?e:!0,function(r,o,a,h){if(r!==void 0){const l=n?cd(i,n,a,s):i;return!e||!h?ai(r,t,l):dd(r,l,t)}}}function fd(i){if(i!==void 0)return 0}function zp(i){if(i!==void 0)return i}function S_(i){const t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function M_(i){return i=i||eo(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}function Wp(i){return Math.pow(i,3)}function Yo(i){return 1-Wp(1-i)}function C_(i){return 3*i*i-2*i*i*i}function E_(i){return i}function so(i,t,e,n,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=n){const h=i[a],l=i[a+1];r[o++]=s[0]*h+s[2]*l+s[4],r[o++]=s[1]*h+s[3]*l+s[5]}return r&&r.length!=o&&(r.length=o),r}function pd(i,t,e,n,s,r,o){o=o||[];const a=Math.cos(s),h=Math.sin(s),l=r[0],c=r[1];let d=0;for(let g=t;g<e;g+=n){const p=i[g]-l,y=i[g+1]-c;o[d++]=l+p*a-y*h,o[d++]=c+p*h+y*a;for(let v=g+2;v<g+n;++v)o[d++]=i[v]}return o&&o.length!=d&&(o.length=d),o}function A_(i,t,e,n,s,r,o,a){a=a||[];const h=o[0],l=o[1];let c=0;for(let d=t;d<e;d+=n){const g=i[d]-h,p=i[d+1]-l;a[c++]=h+s*g,a[c++]=l+r*p;for(let y=d+2;y<d+n;++y)a[c++]=i[y]}return a&&a.length!=c&&(a.length=c),a}function L_(i,t,e,n,s,r,o){o=o||[];let a=0;for(let h=t;h<e;h+=n){o[a++]=i[h]+s,o[a++]=i[h+1]+r;for(let l=h+2;l<h+n;++l)o[a++]=i[l]}return o&&o.length!=a&&(o.length=a),o}const Yp=_s();class N_ extends Vn{constructor(){super(),this.extent_=Mn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=M5(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return pe()}closestPointXY(t,e,n,s){return pe()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return pe()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ko(e),this.extentRevision_=this.getRevision()}return z5(this.extent_,t)}rotate(t,e){pe()}scale(t,e,n){pe()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return pe()}getType(){return pe()}applyTransform(t){pe()}intersectsExtent(t){return pe()}translate(t,e){pe()}transform(t,e){const n=Me(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const h=n.getExtent(),l=n.getWorldExtent(),c=Ti(l)/Ti(h);return ys(Yp,l[0],l[3],c,-c,0,0,0),so(r,0,r.length,a,Yp,o),ph(n,e)(r,o,a)}:ph(n,e);return this.applyTransform(s),this}}const gd=N_;class P_ extends gd{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return fp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return pe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Wl(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){pe()}setLayout(t,e,n){let s;if(t)s=Wl(t);else{for(let r=0;r<n;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=R_(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();pd(n,0,n.length,s,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=Ds(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();A_(s,0,s.length,r,t,e,n,s),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();L_(n,0,n.length,s,t,e,n),this.changed()}}}function R_(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function Wl(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function I_(i,t,e){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return so(n,0,n.length,s,t,e)}const fr=P_;function Vp(i,t,e,n,s,r,o){const a=i[t],h=i[t+1],l=i[e]-a,c=i[e+1]-h;let d;if(l===0&&c===0)d=t;else{const g=((s-a)*l+(r-h)*c)/(l*l+c*c);if(g>1)d=e;else if(g>0){for(let p=0;p<n;++p)o[p]=Cn(i[t+p],i[e+p],g);o.length=n;return}else d=t}for(let g=0;g<n;++g)o[g]=i[d+g];o.length=n}function md(i,t,e,n,s){let r=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const a=i[t],h=i[t+1],l=js(r,o,a,h);l>s&&(s=l),r=a,o=h}return s}function _d(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=md(i,t,a,n,s),t=a}return s}function T_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=_d(i,t,a,n,s),t=a[a.length-1]}return s}function yd(i,t,e,n,s,r,o,a,h,l,c){if(t==e)return l;let d,g;if(s===0){if(g=js(o,a,i[t],i[t+1]),g<l){for(d=0;d<n;++d)h[d]=i[t+d];return h.length=n,g}return l}c=c||[NaN,NaN];let p=t+n;for(;p<e;)if(Vp(i,p-n,p,n,o,a,c),g=js(o,a,c[0],c[1]),g<l){for(l=g,d=0;d<n;++d)h[d]=c[d];h.length=n,p+=n}else p+=n*Math.max((Math.sqrt(g)-Math.sqrt(l))/s|0,1);if(r&&(Vp(i,e-n,t,n,o,a,c),g=js(o,a,c[0],c[1]),g<l)){for(l=g,d=0;d<n;++d)h[d]=c[d];h.length=n}return l}function vd(i,t,e,n,s,r,o,a,h,l,c){c=c||[NaN,NaN];for(let d=0,g=e.length;d<g;++d){const p=e[d];l=yd(i,t,p,n,s,r,o,a,h,l,c),t=p}return l}function O_(i,t,e,n,s,r,o,a,h,l,c){c=c||[NaN,NaN];for(let d=0,g=e.length;d<g;++d){const p=e[d];l=vd(i,t,p,n,s,r,o,a,h,l,c),t=p[p.length-1]}return l}function Xp(i,t,e,n){for(let s=0,r=e.length;s<r;++s)i[t++]=e[s];return t}function Yl(i,t,e,n){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<n;++a)i[t++]=o[a]}return t}function wd(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const h=Yl(i,t,e[o],n);s[r++]=h,t=h}return s.length=r,s}function F_(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const h=wd(i,t,e[o],n,s[r]);h.length===0&&(h[0]=t),s[r++]=h,t=h[h.length-1]}return s.length=r,s}function bd(i,t,e,n,s,r,o){const a=(e-t)/n;if(a<3){for(;t<e;t+=n)r[o++]=i[t],r[o++]=i[t+1];return o}const h=new Array(a);h[0]=1,h[a-1]=1;const l=[t,e-n];let c=0;for(;l.length>0;){const d=l.pop(),g=l.pop();let p=0;const y=i[g],v=i[g+1],x=i[d],b=i[d+1];for(let S=g+n;S<d;S+=n){const A=i[S],O=i[S+1],k=X5(A,O,y,v,x,b);k>p&&(c=S,p=k)}p>s&&(h[(c-t)/n]=1,g+n<c&&l.push(g,c),c+n<d&&l.push(c,d))}for(let d=0;d<a;++d)h[d]&&(r[o++]=i[t+d*n],r[o++]=i[t+d*n+1]);return o}function k_(i,t,e,n,s,r,o,a){for(let h=0,l=e.length;h<l;++h){const c=e[h];o=bd(i,t,c,n,s,r,o),a.push(o),t=c}return o}function ro(i,t){return t*Math.round(i/t)}function D_(i,t,e,n,s,r,o){if(t==e)return o;let a=ro(i[t],s),h=ro(i[t+1],s);t+=n,r[o++]=a,r[o++]=h;let l,c;do if(l=ro(i[t],s),c=ro(i[t+1],s),t+=n,t==e)return r[o++]=l,r[o++]=c,o;while(l==a&&c==h);for(;t<e;){const d=ro(i[t],s),g=ro(i[t+1],s);if(t+=n,d==l&&g==c)continue;const p=l-a,y=c-h,v=d-a,x=g-h;if(p*x==y*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(y<0&&x<y||y==x||y>0&&x>y)){l=d,c=g;continue}r[o++]=l,r[o++]=c,a=l,h=c,l=d,c=g}return r[o++]=l,r[o++]=c,o}function Hp(i,t,e,n,s,r,o,a){for(let h=0,l=e.length;h<l;++h){const c=e[h];o=D_(i,t,c,n,s,r,o),a.push(o),t=c}return o}function j_(i,t,e,n,s,r,o,a){for(let h=0,l=e.length;h<l;++h){const c=e[h],d=[];o=Hp(i,t,c,n,s,r,o,d),a.push(d),t=c[c.length-1]}return o}function pr(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function gh(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const h=e[o];s[r++]=pr(i,t,h,n,s[r]),t=h}return s.length=r,s}function xd(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const h=e[o];s[r++]=h.length===1&&h[0]===t?[]:gh(i,t,h,n,s[r]),t=h[h.length-1]}return s.length=r,s}function Zp(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],h=i[t+1];s+=o*a-r*h,r=a,o=h}return s/2}function Kp(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=Zp(i,t,a,n),t=a}return s}function B_(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=Kp(i,t,a,n),t=a[a.length-1]}return s}class Vl extends fr{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Vl(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<Qr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return Zp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return pr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=bd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Vl(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const Sd=Vl,oo=class v5 extends fr{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new v5(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=js(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let h=0;h<a;++h)n[h]=r[h];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return G5(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Xc(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xp(this.flatCoordinates,0,t,this.stride),this.changed()}};function G_(i,t,e,n,s){return!Zc(s,function(r){return!ao(i,t,e,n,r[0],r[1])})}function ao(i,t,e,n,s,r){let o=0,a=i[e-n],h=i[e-n+1];for(;t<e;t+=n){const l=i[t],c=i[t+1];h<=r?c>r&&(l-a)*(r-h)-(s-a)*(c-h)>0&&o++:c<=r&&(l-a)*(r-h)-(s-a)*(c-h)<0&&o--,a=l,h=c}return o!==0}function Md(i,t,e,n,s,r){if(e.length===0||!ao(i,t,e[0],n,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(ao(i,e[o-1],e[o],n,s,r))return!1;return!0}function q_(i,t,e,n,s,r){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const h=e[o];if(Md(i,t,h,n,s,r))return!0;t=h[h.length-1]}return!1}function Jp(i,t,e,n,s,r,o){let a,h,l,c,d,g,p;const y=s[r+1],v=[];for(let S=0,A=e.length;S<A;++S){const O=e[S];for(c=i[O-n],g=i[O-n+1],a=t;a<O;a+=n)d=i[a],p=i[a+1],(y<=g&&p<=y||g<=y&&y<=p)&&(l=(y-g)/(p-g)*(d-c)+c,v.push(l)),c=d,g=p}let x=NaN,b=-1/0;for(v.sort(Jr),c=v[0],a=1,h=v.length;a<h;++a){d=v[a];const S=Math.abs(d-c);S>b&&(l=(c+d)/2,Md(i,t,e,n,l,y)&&(x=l,b=S)),c=d}return isNaN(x)&&(x=s[r]),o?(o.push(x,y,b),o):[x,y,b]}function U_(i,t,e,n,s){let r=[];for(let o=0,a=e.length;o<a;++o){const h=e[o];r=Jp(i,t,h,n,s,2*o,r),t=h[h.length-1]}return r}function Qp(i,t,e,n,s){let r;for(t+=n;t<e;t+=n)if(r=s(i.slice(t-n,t),i.slice(t,t+n)),r)return r;return!1}function Xl(i,t,e,n,s){const r=gp(Mn(),i,t,e,n);return Vi(s,r)?vs(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Qp(i,t,e,n,function(o,a){return W5(s,o,a)}):!1}function z_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){if(Xl(i,t,e[r],n,s))return!0;t=e[r]}return!1}function $p(i,t,e,n,s){return!!(Xl(i,t,e,n,s)||ao(i,t,e,n,s[0],s[1])||ao(i,t,e,n,s[0],s[3])||ao(i,t,e,n,s[2],s[1])||ao(i,t,e,n,s[2],s[3]))}function t1(i,t,e,n,s){if(!$p(i,t,e[0],n,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(G_(i,e[r-1],e[r],n,s)&&!Xl(i,e[r-1],e[r],n,s))return!1;return!0}function W_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(t1(i,t,a,n,s))return!0;t=a[a.length-1]}return!1}function Y_(i,t,e,n){for(;t<e-n;){for(let s=0;s<n;++s){const r=i[t+s];i[t+s]=i[e-n+s],i[e-n+s]=r}t+=n,e-=n}}function e1(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],h=i[t+1];s+=(a-r)*(h+o),r=a,o=h}return s===0?void 0:s>0}function i1(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],h=e1(i,t,a,n);if(r===0){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;t=a}return!0}function V_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(!i1(i,t,a,n,s))return!1;a.length&&(t=a[a.length-1])}return!0}function Cd(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],h=e1(i,t,a,n);(r===0?s&&h||!s&&!h:s&&!h||!s&&h)&&Y_(i,t,a,n),t=a}return t}function n1(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r)t=Cd(i,t,e[r],n,s);return t}class Zn extends fr{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Zn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<Qr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return Md(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Kp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Cd(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,gh(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ds(this.getExtent());this.flatInteriorPoint_=Jp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new oo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Sd(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const h=n[o],l=new Sd(e.slice(r,h),t);s.push(l),r=h}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;i1(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Cd(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Hp(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Zn(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return t1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=wd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function s1(i){const t=i[0],e=i[1],n=i[2],s=i[3],r=[t,e,t,s,n,s,n,e,t,e];return new Zn(r,"XY",[r.length])}const Ed=0;class X_ extends Vn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ad(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&g_(),t.center&&(t.center=Hn(t.center,this.projection_)),t.extent&&(t.extent=Bs(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Xn)delete e[a];this.setProperties(e,!0);const n=Z_(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=H_(t),r=n.constraint,o=K_(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),a=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Hn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Hn(s.anchor,this.getProjection())),e[n]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===e){n&&Hl(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const l=[];for(;s<e;++s){const c=arguments[s],d={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||C_,callback:n};if(c.center&&(d.sourceCenter=o,d.targetCenter=c.center.slice(),o=d.targetCenter),c.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(c.zoom),a=d.targetResolution):c.resolution&&(d.sourceResolution=a,d.targetResolution=c.resolution,a=d.targetResolution),c.rotation!==void 0){d.sourceRotation=h;const g=io(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=h+g,h=d.targetRotation}J_(d)?d.complete=!0:r+=d.duration,l.push(d)}this.animations_.push(l),this.setHint(Oi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Oi.ANIMATING]>0}getInteracting(){return this.hints_[Oi.INTERACTING]>0}cancelAnimations(){this.setHint(Oi.ANIMATING,-this.hints_[Oi.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const s=this.animations_[e];if(s[0].callback&&Hl(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const h=s[o];if(h.complete)continue;const l=t-h.start;let c=h.duration>0?l/h.duration:1;c>=1?(h.complete=!0,c=1):r=!1;const d=h.easing(c);if(h.sourceCenter){const g=h.sourceCenter[0],p=h.sourceCenter[1],y=h.targetCenter[0],v=h.targetCenter[1];this.nextCenter_=h.targetCenter;const x=g+d*(y-g),b=p+d*(v-p);this.targetCenter_=[x,b]}if(h.sourceResolution&&h.targetResolution){const g=d===1?h.targetResolution:h.sourceResolution+d*(h.targetResolution-h.sourceResolution);if(h.anchor){const p=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(y,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const g=d===1?io(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+d*(h.targetRotation-h.sourceRotation);if(h.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),e=!0,!h.complete)break}if(r){this.animations_[n]=null,this.setHint(Oi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Hl(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-e[0],s[1]-e[1]],ed(n,t-this.getRotation()),c_(n,e)),n}calculateCenterZoom(t,e){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=e[0]-t*(e[0]-s[0])/r,a=e[1]-t*(e[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],s=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&ud(t,this.getProjection())}getCenterInternal(){return this.get(Xn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Bp(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();ce(e,1);const n=this.getResolution();ce(n!==void 0,2);const s=this.getRotation();return ce(s!==void 0,3),jo(e,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Xn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Bs(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Te(t)/e[0],s=Ti(t)/e[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(e/n)/Math.log(t);return function(r){return e/Math.pow(t,r*s)}}getRotation(){return this.get(Xn.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/e;return function(o){return Math.log(n/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Ad(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,s;if(this.resolutions_){const r=Nl(this.resolutions_,t,1);e=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=ai(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,ai(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(ce(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ce(!Bo(t),25);const s=Bs(t,this.getProjection());n=s1(s)}else if(t.getType()==="Circle"){const s=Bs(t.getExtent(),this.getProjection());n=s1(s),n.rotate(this.getRotation(),Ds(s))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,h=1/0,l=-1/0,c=-1/0;for(let d=0,g=r.length;d<g;d+=o){const p=r[d]*n-r[d+1]*s,y=r[d]*s+r[d+1]*n;a=Math.min(a,p),h=Math.min(h,y),l=Math.max(l,p),c=Math.max(c,y)}return[a,h,l,c]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let h=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);h=isNaN(h)?o:Math.max(h,o),h=this.getConstrainedResolution(h,r?0:1);const l=this.getRotation(),c=Math.sin(l),d=Math.cos(l),g=Ds(a);g[0]+=(s[1]-s[3])/2*h,g[1]+=(s[0]-s[2])/2*h;const p=g[0]*d-g[1]*c,y=g[1]*d+g[0]*c,v=this.getConstrainedCenter([p,y],h),x=e.callback?e.callback:Fo;e.duration!==void 0?this.animateInternal({resolution:h,center:v,duration:e.duration,easing:e.easing},x):(this.targetResolution_=h,this.targetCenter_=v,this.applyTargetState_(!1,!0),Hl(x,!0))}centerOn(t,e,n){this.centerOnInternal(Hn(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(Ad(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),h=Ad(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,n);r=[t[0]-h[0],t[1]-h[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=ud(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Hn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Hn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Hn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Xn.ROTATION)!==s&&this.set(Xn.ROTATION,s),this.get(Xn.RESOLUTION)!==o&&(this.set(Xn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Xn.CENTER)||!ql(this.get(Xn.CENTER),a))&&this.set(Xn.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),h=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!ql(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:t,easing:Yo,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Oi.INTERACTING,1)}endInteraction(t,e,n){n=n&&Hn(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(Oi.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Hl(i,t){setTimeout(function(){i(t)},0)}function H_(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return qp(i.extent,i.constrainOnlyCenter,e)}const t=ad(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,qp(e,!1,!1)}return w_}function Z_(i){let t,e,n,s=i.minZoom!==void 0?i.minZoom:Ed,r=i.maxZoom!==void 0?i.maxZoom:28;const o=i.zoomFactor!==void 0?i.zoomFactor:2,a=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,l=i.showFullExtent!==void 0?i.showFullExtent:!1,c=ad(i.projection,"EPSG:3857"),d=c.getExtent();let g=i.constrainOnlyCenter,p=i.extent;if(!a&&!p&&c.isGlobal()&&(g=!1,p=d),i.resolutions!==void 0){const y=i.resolutions;e=y[s],n=y[r]!==void 0?y[r]:y[y.length-1],i.constrainResolution?t=b_(y,h,!g&&p,l):t=Up(e,n,h,!g&&p,l)}else{const y=(d?Math.max(Te(d),Ti(d)):360*dh.degrees/c.getMetersPerUnit())/Qc/Math.pow(2,Ed),v=y/Math.pow(2,28-Ed);e=i.maxResolution,e!==void 0?s=0:e=y/Math.pow(o,s),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(o,r):n=y/Math.pow(o,r):n=v),r=s+Math.floor(Math.log(e/n)/Math.log(o)),n=e/Math.pow(o,r-s),i.constrainResolution?t=x_(o,e,n,h,!g&&p,l):t=Up(e,n,h,!g&&p,l)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:s,zoomFactor:o}}function K_(i){if(i.enableRotation===void 0||i.enableRotation){const t=i.constrainRotation;return t===void 0||t===!0?M_():t===!1?zp:typeof t=="number"?S_(t):zp}return fd}function J_(i){return!(i.sourceCenter&&i.targetCenter&&!ql(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Ad(i,t,e,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,h=i[1]*r+i[0]*o;a+=(t[0]/2-e[0])*n,h+=(e[1]-t[1]/2)*n,o=-o;const l=a*r-h*o,c=h*r+a*o;return[l,c]}const ws=X_;class Q_ extends xp{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ze.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(ze.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ze(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ce(t,ue.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof ws?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;e.layerStatesArray?s=e.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return Ld(s,e.viewState)&&(!r||Vi(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const s=t instanceof ws?t.getViewStateAndExtent():t;let r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(ze.MAP,t)}getMapInternal(){return this.get(ze.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ze(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ze(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ce(t,dr.PRECOMPOSE,function(e){const n=e.frameState.layerStatesArray,s=this.getLayerState(!1);ce(!n.some(function(r){return r.layer===s.layer}),67),n.push(s)},this),this.mapRenderKey_=Ce(this,ue.CHANGE,t.render,t),this.changed())}setSource(t){this.set(ze.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Ld(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const mh=Q_;class $_ extends Wc{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){pe()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;ys(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Tl(s,n)}forEachFeatureAtCoordinate(t,e,n,s,r,o,a,h){let l;const c=e.viewState;function d(O,k,H,W){return r.call(o,k,O?H:null,W)}const g=c.projection,p=id(t.slice(),g),y=[[0,0]];if(g.canWrapX()&&s){const O=g.getExtent(),k=Te(O);y.push([-k,0],[k,0])}const v=e.layerStatesArray,x=v.length,b=[],S=[];for(let O=0;O<y.length;O++)for(let k=x-1;k>=0;--k){const H=v[k],W=H.layer;if(W.hasRenderer()&&Ld(H,c)&&a.call(h,W)){const F=W.getRenderer(),$=W.getSource();if(F&&$){const V=$.getWrapX()?p:t,P=d.bind(null,H.managed);S[0]=V[0]+y[O][0],S[1]=V[1]+y[O][1],l=F.forEachFeatureAtCoordinate(S,e,n,P,b)}if(l)return l}}if(b.length===0)return;const A=1/b.length;return b.forEach((O,k)=>O.distanceSq+=k*A),b.sort((O,k)=>O.distanceSq-k.distanceSq),b.some(O=>l=O.callback(O.feature,O.layer,O.geometry)),l}hasFeatureAtCoordinate(t,e,n,s,r,o){return this.forEachFeatureAtCoordinate(t,e,n,s,To,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){pe()}scheduleExpireIconCache(t){Bl.canExpireCache()&&t.postRenderFunctions.push(ty)}}function ty(i,t){Bl.expire()}const ey=$_;class iy extends Ni{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}const r1=iy,Zl="ol-hidden",ny="ol-selectable",Kl="ol-unselectable",Nd="ol-control",o1="ol-collapsed",sy=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),a1=["style","variant","weight","size","lineHeight","family"],h1=function(i){const t=i.match(sy);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=a1.length;n<s;++n){const r=t[n+1];r!==void 0&&(e[a1[n]]=r)}return e.families=e.family.split(/,\s?/),e};function Xi(i,t,e,n){let s;return e&&e.length?s=e.shift():Yc?s=new OffscreenCanvas(i||300,t||300):s=document.createElement("canvas"),i&&(s.width=i),t&&(s.height=t),s.getContext("2d",n)}function Jl(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function ry(i){let t=i.offsetWidth;const e=getComputedStyle(i);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function oy(i){let t=i.offsetHeight;const e=getComputedStyle(i);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function l1(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function Ql(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function u1(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function ay(i,t){const e=i.childNodes;for(let n=0;;++n){const s=e[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const c1="10px sans-serif",Gs="#000",$l="round",_h=[],yh=0,Vo="round",vh=10,wh="#000",bh="center",tu="middle",ho=[0,0,0,0],xh=1,qs=new Vn;let Xo=null,Pd;const Rd={},hy=function(){const i="32px ",t=["monospace","serif"],e=t.length,n="wmytzilWMYTZIL@#/&?$%10\uF013";let s,r;function o(h,l,c){let d=!0;for(let g=0;g<e;++g){const p=t[g];if(r=eu(h+" "+l+" "+i+p,n),c!=p){const y=eu(h+" "+l+" "+i+c+","+p,n);d=d&&y!=r}}return!!d}function a(){let h=!0;const l=qs.getKeys();for(let c=0,d=l.length;c<d;++c){const g=l[c];qs.get(g)<100&&(o.apply(this,g.split(`
`))?(rh(Rd),Xo=null,Pd=void 0,qs.set(g,100)):(qs.set(g,qs.get(g)+1,!0),h=!1))}h&&(clearInterval(s),s=void 0)}return function(h){const l=h1(h);if(!l)return;const c=l.families;for(let d=0,g=c.length;d<g;++d){const p=c[d],y=l.style+`
`+l.weight+`
`+p;qs.get(y)===void 0&&(qs.set(y,100,!0),o(l.style,l.weight,p)||(qs.set(y,0,!0),s===void 0&&(s=setInterval(a,32))))}}}(),ly=function(){let i;return function(t){let e=Rd[t];if(e==null){if(Yc){const n=h1(t),s=d1(t,"\u017Dg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);Rd[t]=e}return e}}();function d1(i,t){return Xo||(Xo=Xi(1,1)),i!=Pd&&(Xo.font=i,Pd=Xo.font),Xo.measureText(t)}function eu(i,t){return d1(i,t).width}function f1(i,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((s,r)=>Math.max(s,eu(i,r)),0);return e[t]=n,n}function uy(i,t){const e=[],n=[],s=[];let r=0,o=0,a=0,h=0;for(let l=0,c=t.length;l<=c;l+=2){const d=t[l];if(d===`
`||l===c){r=Math.max(r,o),s.push(o),o=0,a+=h;continue}const g=t[l+1]||i.font,p=eu(g,d);e.push(p),o+=p;const y=ly(g);n.push(y),h=Math.max(h,y)}return{width:r,height:a,widths:e,heights:n,lineWidths:s}}function cy(i,t,e,n,s,r,o,a,h,l,c){i.save(),e!==1&&(i.globalAlpha*=e),t&&i.setTransform.apply(i,t),n.contextInstructions?(i.translate(h,l),i.scale(c[0],c[1]),dy(n,i)):c[0]<0||c[1]<0?(i.translate(h,l),i.scale(c[0],c[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,h,l,o*c[0],a*c[1]),i.restore()}function dy(i,t){const e=i.contextInstructions;for(let n=0,s=e.length;n<s;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class fy extends ey{constructor(t){super(t),this.fontChangeListenerKey_=Ce(qs,Tn.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Kl+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const s=new r1(t,void 0,e);n.dispatchEvent(s)}}disposeInternal(){Ze(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(dr.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=t.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=e.length;o<a;++o){const h=e[o];t.layerIndex=o;const l=h.layer,c=l.getSourceState();if(!Ld(h,n)||c!="ready"&&c!="undefined"){l.unrender();continue}const d=l.render(t,r);d&&(d!==r&&(this.children_.push(d),r=d),"getDeclutter"in l&&s.push(l))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(t);ay(this.element_,this.children_),this.dispatchRenderEvent(dr.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const py=fy;class gr extends Ni{constructor(t,e){super(t),this.layer=e}}const Id={LAYERS:"layers"};class Td extends xp{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Id.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new ms(n.slice(),{unique:!0}):ce(typeof n.getArray=="function",43):n=new ms(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ze),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ce(t,cn.ADD,this.handleLayersAdd_,this),Ce(t,cn.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ze);rh(this.listenerKeys_);const e=t.getArray();for(let n=0,s=e.length;n<s;n++){const r=e[n];this.registerLayerListeners_(r),this.dispatchEvent(new gr("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[Ce(t,Tn.PROPERTYCHANGE,this.handleLayerChange_,this),Ce(t,ue.CHANGE,this.handleLayerChange_,this)];t instanceof Td&&e.push(Ce(t,"addlayer",this.handleLayerGroupAdd_,this),Ce(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ke(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new gr("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new gr("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new gr("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=ke(e);this.listenerKeys_[n].forEach(Ze),delete this.listenerKeys_[n],this.dispatchEvent(new gr("removelayer",e)),this.changed()}getLayers(){return this.get(Id.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new gr("removelayer",n[s]))}this.set(Id.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,a=e.length;o<a;o++){const h=e[o];h.opacity*=s.opacity,h.visible=h.visible&&s.visible,h.maxResolution=Math.min(h.maxResolution,s.maxResolution),h.minResolution=Math.max(h.minResolution,s.minResolution),h.minZoom=Math.max(h.minZoom,s.minZoom),h.maxZoom=Math.min(h.maxZoom,s.maxZoom),s.extent!==void 0&&(h.extent!==void 0?h.extent=$r(h.extent,s.extent):h.extent=s.extent),h.zIndex===void 0&&(h.zIndex=r)}return e}getSourceState(){return"ready"}}const iu=Td;class gy extends Ni{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const Ho=gy;class my extends Ho{constructor(t,e,n,s,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Us=my,Be={SINGLECLICK:"singleclick",CLICK:ue.CLICK,DBLCLICK:ue.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Sh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class _y extends ah{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Ce(n,Sh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ce(n,Sh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ue.TOUCHMOVE,this.boundHandleTouchMove_,up?{passive:!1}:!1)}emulateClick_(t){let e=new Us(Be.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Us(Be.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Us(Be.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==Be.POINTERUP||e.type==Be.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==Be.POINTERDOWN||e.type==Be.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Us(Be.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Us(Be.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ce(n,Be.POINTERMOVE,this.handlePointerMove_,this),Ce(n,Be.POINTERUP,this.handlePointerUp_,this),Ce(this.element_,Be.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Ce(this.element_.getRootNode(),Be.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Us(Be.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Us(Be.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ze(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ue.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ze(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const yy=_y,zs={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Hi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Od=1/0;class vy{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,rh(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){ce(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Od?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,s=e.length,r=e[t],o=n[t],a=t;for(;t<s>>1;){const h=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),c=l<s&&n[l]<n[h]?l:h;e[t]=e[c],n[t]=n[c],t=c}e[t]=r,n[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const n=this.elements_,s=this.priorities_,r=n[e],o=s[e];for(;e>t;){const a=this.getParentIndex_(e);if(s[a]>o)n[e]=n[a],s[e]=s[a],e=a;else break}n[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let s=0;const r=e.length;let o,a,h;for(a=0;a<r;++a)o=e[a],h=t(o),h==Od?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=h,e[s++]=o);e.length=s,n.length=s,this.heapify_()}}const wy=vy,Qt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class by extends wy{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(ue.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===Qt.LOADED||n===Qt.ERROR||n===Qt.EMPTY){n!==Qt.ERROR&&e.removeEventListener(ue.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,s,r,o;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===Qt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}const xy=by;function Sy(i,t,e,n,s){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return Od;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class My extends Vn{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Ql(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Ql(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Ze(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Fo&&this.listenerKeys.push(Ce(t,zs.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Zo=My;class Cy extends Zo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+Kl+" "+Nd+(this.collapsed_&&this.collapsible_?" "+o1:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=l,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!lr(e,this.renderedAttributions_)){u1(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(o1),this.collapsed_?l1(this.collapseLabel_,this.label_):l1(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Ey=Cy;class Ay extends Zo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"\u21E7",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+Kl+" "+Nd,h=this.element;h.className=a,h.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Zl)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();e!==void 0&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Yo}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Zl);!r&&n===0?this.element.classList.add(Zl):r&&n!==0&&this.element.classList.remove(Zl)}this.label_.style.transform=s}this.rotation_=n}}const Ly=Ay;class Ny extends Zo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",h=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",l=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=h,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(ue.CLICK,this.handleClick_.bind(this,n),!1);const d=document.createElement("button");d.className=r,d.setAttribute("type","button"),d.title=l,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(ue.CLICK,this.handleClick_.bind(this,-n),!1);const g=e+" "+Kl+" "+Nd,p=this.element;p.className=g,p.appendChild(c),p.appendChild(d),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(n!==void 0){const s=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:s,duration:this.duration_,easing:Yo})):e.setZoom(s)}}}const Py=Ny;function p1(i){i=i||{};const t=new ms;return(i.zoom===void 0||i.zoom)&&t.push(new Py(i.zoomOptions)),(i.rotate===void 0||i.rotate)&&t.push(new Ly(i.rotateOptions)),(i.attribution===void 0||i.attribution)&&t.push(new Ey(i.attributionOptions)),t}const Fd={ACTIVE:"active"};class Ry extends Vn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fd.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fd.ACTIVE,t)}setMap(t){this.map_=t}}function Iy(i,t,e){const n=i.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:E_,center:i.getConstrainedCenter(s)})}}function kd(i,t,e,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+t),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:Yo})}const Mh=Ry;class Ty extends Mh{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Be.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();kd(a,o,r,this.duration_),n.preventDefault(),e=!0}return!e}}const Oy=Ty;class Fy extends Mh{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Be.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Be.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Be.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Be.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Dd(i){const t=i.length;let e=0,n=0;for(let s=0;s<t;s++)e+=i[s].clientX,n+=i[s].clientY;return{clientX:e/t,clientY:n/t}}const Ko=Fy;function jd(i){const t=arguments;return function(e){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](e),!!n);++s);return n}}const ky=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Dy=function(i){const t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)},g1=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?Dy(i):!0},Bd=To,m1=function(i){const t=i.originalEvent;return t.button==0&&!(I5&&T5&&t.ctrlKey)},jy=Oo,Gd=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},_1=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},y1=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},qd=function(i){const t=i.originalEvent;return ce(t!==void 0,56),t.pointerType=="mouse"},By=function(i){const t=i.originalEvent;return ce(t!==void 0,56),t.isPrimary&&t.button===0};class Gy extends Ko{constructor(t){super({stopDown:Oo}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:jd(Gd,By);this.condition_=t.onFocusOnly?jd(g1,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,s=e.getEventPixel(Dd(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],o=t.map.getView();f_(r,o.getResolution()),ed(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),h=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(h),duration:500,easing:Yo})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const qy=Gy;class Uy extends Ko{constructor(t){t=t||{},super({stopDown:Oo}),this.condition_=t.condition?t.condition:ky,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!qd(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===fd)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return qd(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return qd(t)&&m1(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const zy=Uy;class Wy extends Wc{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+n,s.top=Math.min(t[1],e[1])+n,s.width=Math.abs(e[0]-t[0])+n,s.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Zn([n])}getGeometry(){return this.geometry_}}const Yy=Wy,nu={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ud extends Ni{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class Vy extends Ko{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Yy(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:m1,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const s=n[0]-e[0],r=n[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ud(nu.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ud(e?nu.BOXEND:nu.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ud(nu.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Xy=Vy;class Hy extends Xy{constructor(t){t=t||{};const e=t.condition?t.condition:_1;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=e.rotatedExtentForGeometry(n),r=e.getResolutionForExtentInternal(s),o=e.getResolution()/r;n=n.clone(),n.scale(o*o)}e.fitInternal(n,{duration:this.duration_,easing:Yo})}}const Zy=Hy,lo={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Ky extends Mh{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Gd(e)&&y1(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==ue.KEYDOWN){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==lo.DOWN||s==lo.LEFT||s==lo.RIGHT||s==lo.UP)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_;let a=0,h=0;s==lo.DOWN?h=-o:s==lo.LEFT?a=-o:s==lo.RIGHT?a=o:h=o;const l=[a,h];ed(l,r.getRotation()),Iy(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}}const Jy=Ky;class Qy extends Mh{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:y1,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==ue.KEYDOWN||t.type==ue.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();kd(a,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const $y=Qy;class tv{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[e+2]-this.points_[n+2];if(s<16.666666666666668)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const ev=tv;class iv extends Mh{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:Bd;this.condition_=t.onFocusOnly?jd(g1,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ue.WHEEL)return!0;const e=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==ue.WHEEL&&(s=n.deltaY,R5&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=lp),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const r=Date.now();this.startTime_===void 0&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=e.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=s;const a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-ai(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),kd(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const nv=iv;class sv extends Ko{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Oo),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=r-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=h}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==fd&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Dd(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const rv=sv;class ov extends Ko{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Oo),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const h=t.map,l=h.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(Dd(this.targetPointers))),h.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const av=ov;function hv(i){i=i||{};const t=new ms,e=new ev(-.005,.05,100);return(i.altShiftDragRotate===void 0||i.altShiftDragRotate)&&t.push(new zy),(i.doubleClickZoom===void 0||i.doubleClickZoom)&&t.push(new Oy({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan===void 0||i.dragPan)&&t.push(new qy({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate===void 0||i.pinchRotate)&&t.push(new rv),(i.pinchZoom===void 0||i.pinchZoom)&&t.push(new av({duration:i.zoomDuration})),(i.keyboard===void 0||i.keyboard)&&(t.push(new Jy),t.push(new $y({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom===void 0||i.mouseWheelZoom)&&t.push(new nv({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom===void 0||i.shiftDragZoom)&&t.push(new Zy({duration:i.zoomDuration})),t}function v1(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]+2*t,e[1]=i[1]+2*t,e}function w1(i){return i[0]>0&&i[1]>0}function b1(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function dn(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}function x1(i){if(i instanceof mh){i.setMapInternal(null);return}i instanceof iu&&i.getLayers().forEach(x1)}function S1(i,t){if(i instanceof mh){i.setMapInternal(t);return}if(i instanceof iu){const e=i.getLayers().getArray();for(let n=0,s=e.length;n<s;++n)S1(e[n],t)}}class lv extends Vn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=uv(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:lp,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=_s(),this.pixelToCoordinateTransform_=_s(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||p1(),this.interactions=e.interactions||hv({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new xy(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Hi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Hi.VIEW,this.handleViewChanged_),this.addChangeListener(Hi.SIZE,this.handleSizeChanged_),this.addChangeListener(Hi.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof ws)&&t.view.then(function(s){n.setView(new ws(s))}),this.controls.addEventListener(cn.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(cn.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(cn.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(cn.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(cn.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(cn.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){S1(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:To,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(s){s instanceof iu?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:To,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=e.width/n[0],r=e.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/s,(o.clientY-e.top)/r]}getTarget(){return this.get(Hi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ud(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Pi(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Hi.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ms){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Hn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Pi(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Hi.SIZE)}getView(){return this.get(Hi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,s){return Sy(this.frameState_,t,e,n,s)}handleBrowserEvent(t,e){e=e||t.type;const n=new Us(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===Sh.POINTERDOWN||n===ue.WHEEL||n===ue.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(!(o.getMap()!==this||!o.getActive()||!this.getTargetElement())&&(!o.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[Oi.ANIMATING]||o[Oi.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(dr.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(dr.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ho(zs.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ho(zs.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Ze(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ue.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ue.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ql(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new py(this)),this.mapBrowserEventHandler_=new yy(this,this.moveTolerance_);for(const r in Be)this.mapBrowserEventHandler_.addEventListener(Be[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ue.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ue.WHEEL,this.boundHandleBrowserEvent_,up?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Ce(n,ue.KEYDOWN,this.handleBrowserEvent,this),Ce(n,ue.KEYPRESS,this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ze(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ze(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ce(t,Tn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ce(t,ue.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ze),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new gr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ce(t,Tn.PROPERTYCHANGE,this.render,this),Ce(t,ue.CHANGE,this.render,this),Ce(t,"addlayer",this.handleLayerAdd_,this),Ce(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){x1(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(e!==void 0&&w1(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:jo(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ke(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const h=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=jo(a.nextCenter,a.nextResolution,h,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Bo(this.previousExtent_)&&!Do(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Ho(zs.MOVESTART,this,s)),this.previousExtent_=ko(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Oi.ANIMATING]&&!r.viewHints[Oi.INTERACTING]&&!Do(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Ho(zs.MOVEEND,this,r)),dp(r.extent,this.previousExtent_))),this.dispatchEvent(new Ho(zs.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(zs.LOADSTART)||this.hasListener(zs.LOADEND)||this.hasListener(dr.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new gr("removelayer",e)),this.set(Hi.LAYERGROUP,t)}setSize(t){this.set(Hi.SIZE,t)}setTarget(t){this.set(Hi.TARGET,t)}setView(t){if(!t||t instanceof ws){this.set(Hi.VIEW,t);return}this.set(Hi.VIEW,new ws);const e=this;t.then(function(n){e.setView(new ws(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!w1(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Fp("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!lr(e,n))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}function uv(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new iu({layers:i.layers});e[Hi.LAYERGROUP]=n,e[Hi.TARGET]=i.target,e[Hi.VIEW]=i.view instanceof ws?i.view:new ws;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new ms(i.controls.slice()):(ce(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new ms(i.interactions.slice()):(ce(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new ms(i.overlays.slice()):(ce(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new ms,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}const cv=lv,su={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class dv extends mh{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(su.PRELOAD)}setPreload(t){this.set(su.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(su.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(su.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const fv=dv,me={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class pv extends rp{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return pe()}getData(t){return null}prepareFrame(t){return pe()}renderFrame(t,e){return pe()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===me.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=me.LOADED&&e!=me.ERROR&&t.addEventListener(ue.CHANGE,this.boundHandleImageChange_),e==me.IDLE&&(t.load(),e=t.getState()),e==me.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const gv=pv,M1=[];let Jo=null;function mv(){Jo=Xi(1,1,void 0,{willReadFrequently:!0})}class _v extends gv{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=_s(),this.pixelTransform=_s(),this.inversePixelTransform=_s(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){Jo||mv(),Jo.clearRect(0,0,1,1);let s;try{Jo.drawImage(t,e,n,1,1,0,0,1,1),s=Jo.getImageData(0,0,1,1).data}catch{return Jo=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return typeof e=="function"&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&lr(jl(t.style.backgroundColor),jl(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Xi();const h=o.canvas;r.appendChild(h),a=h.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const s=to(n),r=Dl(n),o=kl(n),a=Fl(n);Pi(e.coordinateToPixelTransform,s),Pi(e.coordinateToPixelTransform,r),Pi(e.coordinateToPixelTransform,o),Pi(e.coordinateToPixelTransform,a);const h=this.inversePixelTransform;Pi(h,s),Pi(h,r),Pi(h,o),Pi(h,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,n){const s=this.getLayer();if(s.hasListener(t)){const r=new r1(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(dr.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(dr.POSTRENDER,t,e)}getRenderTransform(t,e,n,s,r,o,a){const h=r/2,l=o/2,c=s/e,d=-c,g=-t[0]+a,p=-t[1];return ys(this.tempTransform,h,l,c,d,-n,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const zd=_v;class yv extends ah{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(ue.CHANGE)}release(){this.state===Qt.ERROR&&this.setState(Qt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==Qt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==Qt.LOADED){t.interimTile=null;break}else t.getState()==Qt.LOADING?e=t:t.getState()==Qt.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Qt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){pe()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=e-n+1e3/60;return s>=this.transition_?1:Wp(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const C1=yv;class vv extends ah{constructor(t,e,n,s){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=s}changed(){this.dispatchEvent(ue.CHANGE)}getExtent(){return this.extent}getImage(){return pe()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){pe()}}const E1=vv;class wv extends E1{constructor(t,e,n,s,r,o,a){super(t,e,n,me.IDLE),this.src_=s,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.context_=a,this.unlisten_=null,this.state=me.IDLE,this.imageLoadFunction_=o}getImage(){if(this.state==me.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const t=this.context_.canvas;t.width=this.image_.width,t.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=me.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=Ti(this.extent)/this.image_.height),this.state=me.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==me.IDLE||this.state==me.ERROR)&&(this.state=me.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Wd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=Ti(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Wd(i,t,e){const n=i;let s=!0,r=!1,o=!1;const a=[Pl(n,ue.LOAD,function(){o=!0,r||t()})];return n.src&&O5?(r=!0,n.decode().then(function(){s&&t()}).catch(function(h){s&&(o?t():e())})):a.push(Pl(n,ue.ERROR,e)),function(){s=!1,a.forEach(Ze)}}const bv=wv;class xv extends C1{constructor(t,e,n,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Qt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Qt.ERROR,this.unlistenImage_(),this.image_=Sv(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Qt.LOADED:this.state=Qt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Qt.ERROR&&(this.state=Qt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Qt.IDLE&&(this.state=Qt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Wd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Sv(){const i=Xi(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const A1=xv,L1=.5,Mv=10,N1=.25;class Cv{constructor(t,e,n,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={};const h=ph(this.targetProj_,this.sourceProj_);this.transformInv_=function(S){const A=S[0]+"/"+S[1];return a[A]||(a[A]=h(S)),a[A]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Te(s)>=Te(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Te(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Te(this.targetProj_.getExtent()):null;const l=to(n),c=Dl(n),d=kl(n),g=Fl(n),p=this.transformInv_(l),y=this.transformInv_(c),v=this.transformInv_(d),x=this.transformInv_(g),b=Mv+(o?Math.max(0,Math.ceil(Math.log2(Kc(n)/(o*o*256*256)))):0);if(this.addQuad_(l,c,d,g,p,y,v,x,b),this.wrapsXInSource_){let S=1/0;this.triangles_.forEach(function(A,O,k){S=Math.min(S,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-S>this.sourceWorldWidth_/2){const O=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];O[0][0]-S>this.sourceWorldWidth_/2&&(O[0][0]-=this.sourceWorldWidth_),O[1][0]-S>this.sourceWorldWidth_/2&&(O[1][0]-=this.sourceWorldWidth_),O[2][0]-S>this.sourceWorldWidth_/2&&(O[2][0]-=this.sourceWorldWidth_);const k=Math.min(O[0][0],O[1][0],O[2][0]);Math.max(O[0][0],O[1][0],O[2][0])-k<this.sourceWorldWidth_/2&&(A.source=O)}})}a={}}addTriangle_(t,e,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,n]})}addQuad_(t,e,n,s,r,o,a,h,l){const c=Ol([r,o,a,h]),d=this.sourceWorldWidth_?Te(c)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let y=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=Ol([t,e,n,s]);y=Te(x)/this.targetWorldWidth_>N1||y}!p&&this.sourceProj_.isGlobal()&&d&&(y=d>N1||y)}if(!y&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Vi(c,this.maxSourceExtent_))return;let v=0;if(!y&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1]))){if(l>0)y=!0;else if(v=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(l>0){if(!y){const x=[(t[0]+n[0])/2,(t[1]+n[1])/2],b=this.transformInv_(x);let S;p?S=(io(r[0],g)+io(a[0],g))/2-io(b[0],g):S=(r[0]+a[0])/2-b[0];const A=(r[1]+a[1])/2-b[1];y=S*S+A*A>this.errorThresholdSquared_}if(y){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const x=[(e[0]+n[0])/2,(e[1]+n[1])/2],b=this.transformInv_(x),S=[(s[0]+t[0])/2,(s[1]+t[1])/2],A=this.transformInv_(S);this.addQuad_(t,e,x,S,r,o,b,A,l-1),this.addQuad_(S,x,n,s,A,b,a,h,l-1)}else{const x=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(x),S=[(n[0]+s[0])/2,(n[1]+s[1])/2],A=this.transformInv_(S);this.addQuad_(t,x,S,s,r,b,A,h,l-1),this.addQuad_(x,e,n,S,b,o,a,A,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(t,n,s,r,a,h),v&14||this.addTriangle_(t,n,e,r,a,o),v&&(v&13||this.addTriangle_(e,s,t,o,h,r),v&7||this.addTriangle_(e,s,n,o,h,a))}calculateSourceExtent(){const t=Mn();return this.triangles_.forEach(function(e,n,s){const r=e.source;uh(t,r[0]),uh(t,r[1]),uh(t,r[2])}),t}getTriangles(){return this.triangles_}}const P1=Cv;let Yd;const Qo=[];function R1(i,t,e,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,s)),i.restore()}function Vd(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-191.25)>2}function Ev(){if(Yd===void 0){const i=Xi(6,6,Qo);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",R1(i,4,5,4,0),R1(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;Yd=Vd(t,0)||Vd(t,4)||Vd(t,8),Jl(i),Qo.push(i.canvas)}return Yd}function Ch(i,t,e,n){const s=hd(e,t,i);let r=Dp(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const h=i.getExtent();if(!h||lh(h,s)){const l=Dp(i,r,s)/r;isFinite(l)&&l>0&&(r/=l)}return r}function Av(i,t,e,n){const s=Ds(e);let r=Ch(i,t,s,n);return(!isFinite(r)||r<=0)&&Zc(e,function(o){return r=Ch(i,t,o,n),isFinite(r)&&r>0}),r}function I1(i,t,e,n,s,r,o,a,h,l,c,d){const g=Xi(Math.round(e*i),Math.round(e*t),Qo);if(d||(g.imageSmoothingEnabled=!1),h.length===0)return g.canvas;g.scale(e,e);function p(O){return Math.round(O*e)/e}g.globalCompositeOperation="lighter";const y=Mn();h.forEach(function(O,k,H){pp(y,O.extent)});const v=Te(y),x=Ti(y),b=Xi(Math.round(e*v/n),Math.round(e*x/n),Qo);d||(b.imageSmoothingEnabled=!1);const S=e/n;h.forEach(function(O,k,H){const W=O.extent[0]-y[0],F=-(O.extent[3]-y[3]),$=Te(O.extent),V=Ti(O.extent);O.image.width>0&&O.image.height>0&&b.drawImage(O.image,l,l,O.image.width-2*l,O.image.height-2*l,W*S,F*S,$*S,V*S)});const A=to(o);return a.getTriangles().forEach(function(O,k,H){const W=O.source,F=O.target;let $=W[0][0],V=W[0][1],P=W[1][0],I=W[1][1],U=W[2][0],G=W[2][1];const nt=p((F[0][0]-A[0])/r),tt=p(-(F[0][1]-A[1])/r),Q=p((F[1][0]-A[0])/r),J=p(-(F[1][1]-A[1])/r),dt=p((F[2][0]-A[0])/r),ct=p(-(F[2][1]-A[1])/r),Et=$,M=V;$=0,V=0,P-=Et,I-=M,U-=Et,G-=M;const j=[[P,I,0,0,Q-nt],[U,G,0,0,dt-nt],[0,0,P,I,J-tt],[0,0,U,G,ct-tt]],B=H5(j);if(B){if(g.save(),g.beginPath(),Ev()||!d){g.moveTo(Q,J);const Y=4,it=nt-Q,ot=tt-J;for(let at=0;at<Y;at++)g.lineTo(Q+p((at+1)*it/Y),J+p(at*ot/(Y-1))),at!=Y-1&&g.lineTo(Q+p((at+1)*it/Y),J+p((at+1)*ot/(Y-1)));g.lineTo(dt,ct)}else g.moveTo(Q,J),g.lineTo(nt,tt),g.lineTo(dt,ct);g.clip(),g.transform(B[0],B[2],B[1],B[3],nt,tt),g.translate(y[0]-Et,y[3]-M),g.scale(n/e,-n/e),g.drawImage(b.canvas,0,0),g.restore()}}),Jl(b),Qo.push(b.canvas),c&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(O,k,H){const W=O.target,F=(W[0][0]-A[0])/r,$=-(W[0][1]-A[1])/r,V=(W[1][0]-A[0])/r,P=-(W[1][1]-A[1])/r,I=(W[2][0]-A[0])/r,U=-(W[2][1]-A[1])/r;g.beginPath(),g.moveTo(V,P),g.lineTo(F,$),g.lineTo(I,U),g.closePath(),g.stroke()}),g.restore()),g.canvas}class Lv extends C1{constructor(t,e,n,s,r,o,a,h,l,c,d,g){super(r,Qt.IDLE,{interpolate:!!g}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=s.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const x=y?$r(p,y):p;if(Kc(x)===0){this.state=Qt.EMPTY;return}const b=t.getExtent();b&&(v?v=$r(v,b):v=b);const S=s.getResolution(this.wrappedTileCoord_[0]),A=Av(t,n,x,S);if(!isFinite(A)||A<=0){this.state=Qt.EMPTY;return}const O=c!==void 0?c:L1;if(this.triangulation_=new P1(t,n,x,v,A*O,S),this.triangulation_.getTriangles().length===0){this.state=Qt.EMPTY;return}this.sourceZ_=e.getZForResolution(A);let k=this.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(k[1]=ai(k[1],v[1],v[3]),k[3]=ai(k[3],v[1],v[3])):k=$r(k,v)),!Kc(k))this.state=Qt.EMPTY;else{const H=e.getTileRangeForExtentAndZ(k,this.sourceZ_);for(let W=H.minX;W<=H.maxX;W++)for(let F=H.minY;F<=H.maxY;F++){const $=l(this.sourceZ_,W,F,a);$&&this.sourceTiles_.push($)}this.sourceTiles_.length===0&&(this.state=Qt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==Qt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=Qt.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=I1(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Qt.LOADED}this.changed()}load(){if(this.state==Qt.IDLE){this.state=Qt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const n=e.getState();if(n==Qt.IDLE||n==Qt.LOADING){t++;const s=Ce(e,ue.CHANGE,function(r){const o=e.getState();(o==Qt.LOADED||o==Qt.ERROR||o==Qt.EMPTY)&&(Ze(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,s){e.getState()==Qt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ze),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Jl(this.canvas_.getContext("2d")),Qo.push(this.canvas_),this.canvas_=null),super.release()}}const Xd=Lv;class T1{constructor(t,e,n,s){this.minX=t,this.maxX=e,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function $o(i,t,e,n,s){return s!==void 0?(s.minX=i,s.maxX=t,s.minY=e,s.maxY=n,s):new T1(i,t,e,n)}const O1=T1;class Nv extends zd{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Mn(),this.tmpTileRange_=new O1(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),s=e.getUseInterimTilesOnError();return n==Qt.LOADED||n==Qt.EMPTY||n==Qt.ERROR&&!s}getTile(t,e,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let h=a.getSource().getTile(t,e,n,r,o);return h.getState()==Qt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=Pi(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!lh(r,s))return null;const o=e.pixelRatio,a=e.viewState.projection,h=e.viewState,l=n.getRenderSource(),c=l.getTileGridForProjection(h.projection),d=l.getTilePixelRatio(e.pixelRatio);for(let g=c.getZForResolution(h.resolution);g>=c.getMinZoom();--g){const p=c.getTileCoordForCoordAndZ(s,g),y=l.getTile(g,p[1],p[2],o,a);if(!(y instanceof A1||y instanceof Xd)||y instanceof Xd&&y.getState()===Qt.EMPTY)return null;if(y.getState()!==Qt.LOADED)continue;const v=c.getOrigin(g),x=dn(c.getTileSize(g)),b=c.getResolution(g),S=Math.floor(d*((s[0]-v[0])/b-p[1]*x[0])),A=Math.floor(d*((v[1]-s[1])/b-p[2]*x[1])),O=Math.round(d*l.getGutterForProjection(h.projection));return this.getImageData(y.getImage(),S+O,A+O)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,h=s.rotation,l=t.pixelRatio,c=this.getLayer(),d=c.getSource(),g=d.getRevision(),p=d.getTileGridForProjection(r),y=p.getZForResolution(o,d.zDirection),v=p.getResolution(y);let x=t.extent;const b=t.viewState.resolution,S=d.getTilePixelRatio(l),A=Math.round(Te(x)/b*l),O=Math.round(Ti(x)/b*l),k=n.extent&&Bs(n.extent);k&&(x=$r(x,Bs(n.extent)));const H=v*A/2/S,W=v*O/2/S,F=[a[0]-H,a[1]-W,a[0]+H,a[1]+W],$=p.getTileRangeForExtentAndZ(x,y),V={};V[y]={};const P=this.createLoadedTileFinder(d,r,V),I=this.tmpExtent,U=this.tmpTileRange_;this.newTiles_=!1;const G=h?Jc(s.center,b,h,t.size):void 0;for(let j=$.minX;j<=$.maxX;++j)for(let B=$.minY;B<=$.maxY;++B){if(h&&!p.tileCoordIntersectsViewport([y,j,B],G))continue;const Y=this.getTile(y,j,B,t);if(this.isDrawableTile(Y)){const at=ke(this);if(Y.getState()==Qt.LOADED){V[y][Y.tileCoord.toString()]=Y;let ut=Y.inTransition(at);ut&&n.opacity!==1&&(Y.endTransition(at),ut=!1),!this.newTiles_&&(ut||!this.renderedTiles.includes(Y))&&(this.newTiles_=!0)}if(Y.getAlpha(at,t.time)===1)continue}const it=p.getTileCoordChildTileRange(Y.tileCoord,U,I);let ot=!1;it&&(ot=P(y+1,it)),ot||p.forEachTileCoordParentTileRange(Y.tileCoord,P,U,I)}const nt=v/o*l/S;ys(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,h,-A/2,-O/2);const tt=Vc(this.pixelTransform);this.useContainer(e,tt,this.getBackground(t));const Q=this.context,J=Q.canvas;Tl(this.inversePixelTransform,this.pixelTransform),ys(this.tempTransform,A/2,O/2,nt,nt,0,-A/2,-O/2),J.width!=A||J.height!=O?(J.width=A,J.height=O):this.containerReused||Q.clearRect(0,0,A,O),k&&this.clipUnrotated(Q,t,k),d.getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,t),this.renderedTiles.length=0;let dt=Object.keys(V).map(Number);dt.sort(Jr);let ct,Et,M;n.opacity===1&&(!this.containerReused||d.getOpaque(t.viewState.projection))?dt=dt.reverse():(ct=[],Et=[]);for(let j=dt.length-1;j>=0;--j){const B=dt[j],Y=d.getTilePixelSize(B,l,r),it=p.getResolution(B)/v,ot=Y[0]*it*nt,at=Y[1]*it*nt,ut=p.getTileCoordForCoordAndZ(to(F),B),At=p.getTileCoordExtent(ut),Mt=Pi(this.tempTransform,[S*(At[0]-F[0])/v,S*(F[3]-At[3])/v]),Tt=S*d.getGutterForProjection(r),It=V[B];for(const Xt in It){const ft=It[Xt],z=ft.tileCoord,oe=ut[1]-z[1],zt=Math.round(Mt[0]-(oe-1)*ot),xt=ut[2]-z[2],Pt=Math.round(Mt[1]-(xt-1)*at),Nt=Math.round(Mt[0]-oe*ot),Lt=Math.round(Mt[1]-xt*at),qt=zt-Nt,Zt=Pt-Lt,ae=y===B,le=ae&&ft.getAlpha(ke(this),t.time)!==1;let ve=!1;if(!le)if(ct){M=[Nt,Lt,Nt+qt,Lt,Nt+qt,Lt+Zt,Nt,Lt+Zt];for(let Ne=0,te=ct.length;Ne<te;++Ne)if(y!==B&&B<Et[Ne]){const Jt=ct[Ne];Vi([Nt,Lt,Nt+qt,Lt+Zt],[Jt[0],Jt[3],Jt[4],Jt[7]])&&(ve||(Q.save(),ve=!0),Q.beginPath(),Q.moveTo(M[0],M[1]),Q.lineTo(M[2],M[3]),Q.lineTo(M[4],M[5]),Q.lineTo(M[6],M[7]),Q.moveTo(Jt[6],Jt[7]),Q.lineTo(Jt[4],Jt[5]),Q.lineTo(Jt[2],Jt[3]),Q.lineTo(Jt[0],Jt[1]),Q.clip())}ct.push(M),Et.push(B)}else Q.clearRect(Nt,Lt,qt,Zt);this.drawTileImage(ft,t,Nt,Lt,qt,Zt,Tt,ae),ct&&!le?(ve&&Q.restore(),this.renderedTiles.unshift(ft)):this.renderedTiles.push(ft),this.updateUsedTiles(t.usedTiles,d,ft)}}return this.renderedRevision=g,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Do(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,d,p,l,r,x,y,c.getPreload()),this.scheduleExpireCache(t,d),this.postRender(Q,t),n.extent&&Q.restore(),Q.imageSmoothingEnabled=!0,tt!==J.style.transform&&(J.style.transform=tt),this.container}drawTileImage(t,e,n,s,r,o,a,h){const l=this.getTileImage(t);if(!l)return;const c=ke(this),d=e.layerStatesArray[e.layerIndex],g=d.opacity*(h?t.getAlpha(c,e.time):1),p=g!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=g),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,n,s,r,o),p&&this.context.restore(),g!==d.opacity?e.animate=!0:h&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=(function(s,r,o){const a=ke(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const s=ke(e);s in t||(t[s]={}),t[s][n.getKey()]=!0}manageTilePyramid(t,e,n,s,r,o,a,h,l){const c=ke(e);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],g=t.tileQueue,p=n.getMinZoom(),y=t.viewState.rotation,v=y?Jc(t.viewState.center,t.viewState.resolution,y,t.size):void 0;let x=0,b,S,A,O,k,H;for(H=p;H<=a;++H)for(S=n.getTileRangeForExtentAndZ(o,H,S),A=n.getResolution(H),O=S.minX;O<=S.maxX;++O)for(k=S.minY;k<=S.maxY;++k)y&&!n.tileCoordIntersectsViewport([H,O,k],v)||(a-H<=h?(++x,b=e.getTile(H,O,k,s,r),b.getState()==Qt.IDLE&&(d[b.getKey()]=!0,g.isKeyQueued(b.getKey())||g.enqueue([b,c,n.getTileCoordCenter(b.tileCoord),A])),l!==void 0&&l(b)):e.useTile(H,O,k,r));e.updateCacheSize(x,r)}}const Pv=Nv;class Rv extends fv{constructor(t){super(t)}createRenderer(){return new Pv(this)}}const F1=Rv;class Hd extends Vn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Hd(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ze(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ce(t,ue.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Iv(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Iv(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(ce(typeof i.getZIndex=="function",41),t=[i]),function(){return t}}const ta=Hd;class Zd{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Zd({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const uo=Zd;function k1(i,t,e,n,s,r,o){let a,h;const l=(e-t)/n;if(l===1)a=t;else if(l===2)a=t,h=s;else if(l!==0){let c=i[t],d=i[t+1],g=0;const p=[0];for(let x=t+n;x<e;x+=n){const b=i[x],S=i[x+1];g+=Math.sqrt((b-c)*(b-c)+(S-d)*(S-d)),p.push(g),c=b,d=S}const y=s*g,v=b5(p,y);v<0?(h=(y-p[-v-2])/(p[-v-1]-p[-v-2]),a=t+(-v-2)*n):a=t+v*n}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=a===void 0?NaN:h===void 0?i[a+c]:Cn(i[a+c],i[a+n+c],h);return r}function Kd(i,t,e,n,s,r){if(e==t)return null;let o;if(s<i[t+n-1])return r?(o=i.slice(t,t+n),o[n-1]=s,o):null;if(i[e-1]<s)return r?(o=i.slice(e-n,e),o[n-1]=s,o):null;if(s==i[t+n-1])return i.slice(t,t+n);let a=t/n,h=e/n;for(;a<h;){const g=a+h>>1;s<i[(g+1)*n-1]?h=g:a=g+1}const l=i[a*n-1];if(s==l)return i.slice((a-1)*n,(a-1)*n+n);const c=i[(a+1)*n-1],d=(s-l)/(c-l);o=[];for(let g=0;g<n-1;++g)o.push(Cn(i[(a-1)*n+g],i[a*n+g],d));return o.push(s),o}function Tv(i,t,e,n,s,r,o){if(o)return Kd(i,t,e[e.length-1],n,s,r);let a;if(s<i[n-1])return r?(a=i.slice(0,n),a[n-1]=s,a):null;if(i[i.length-1]<s)return r?(a=i.slice(i.length-n),a[n-1]=s,a):null;for(let h=0,l=e.length;h<l;++h){const c=e[h];if(t!=c){if(s<i[t+n-1])return null;if(s<=i[c-1])return Kd(i,t,c,n,s,!1);t=c}}return null}function D1(i,t,e,n){let s=i[t],r=i[t+1],o=0;for(let a=t+n;a<e;a+=n){const h=i[a],l=i[a+1];o+=Math.sqrt((h-s)*(h-s)+(l-r)*(l-r)),s=h,r=l}return o}class ru extends fr{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?un(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new ru(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<Qr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,s))}forEachSegment(t){return Qp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return pr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return k1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return D1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=bd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ru(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const mr=ru;class Jd{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Jd({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const co=Jd;class Qd{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=dn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Qd({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return pe()}getImage(t){return pe()}getHitDetectionImage(){return pe()}getPixelRatio(t){return 1}getImageState(){return pe()}getImageSize(){return pe()}getOrigin(){return pe()}getSize(){return pe()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=dn(t)}listenImageChange(t){pe()}load(){pe()}unlistenImageChange(t){pe()}}const j1=Qd;function bs(i){return Array.isArray(i)?wp(i):i}class $d extends j1{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new $d({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,s=Xi(n.size*t,n.size*t);this.draw_(n,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return me.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const O=s;s=r,r=O}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,h=r*Math.sin(a),l=Math.sqrt(r*r-h*h),c=s-l,d=Math.sqrt(h*h+c*c),g=d/h;if(t==="miter"&&g<=n)return g*e;const p=e/2/g,y=e/2*(c/d),v=Math.sqrt((s+p)*(s+p)+y*y)-s;if(this.radius2_===void 0||t==="bevel")return v*2;const x=s*Math.sin(a),b=Math.sqrt(s*s-x*x),S=r-b,A=Math.sqrt(x*x+S*S)/x;if(A<=n){const O=A*e/2-r-s;return 2*Math.max(v,O)}return v*2}createRenderOptions(){let t=Vo,e=0,n=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=wh),r=bs(r),o=this.stroke_.getWidth(),o===void 0&&(o=xh),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Vo),e=this.stroke_.getMiterLimit(),e===void 0&&(e=vh));const a=this.calculateLineJoinSize_(t,o,e),h=Math.max(this.radius_,this.radius2_||0),l=Math.ceil(2*h+a);return{strokeStyle:r,strokeWidth:o,size:l,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=Gs),e.fillStyle=bs(s),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if(typeof e=="string"&&(e=jl(e)),e===null?n=1:Array.isArray(e)&&(n=e.length===4?e[3]:1),n===0){const s=Xi(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const h=r+a*o,l=a%2===0?n:s;t.lineTo(l*Math.cos(h),l*Math.sin(h))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Gs,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const B1=$d;class tf extends B1{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new tf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const ou=tf;class _r{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=G1,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new _r({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=G1,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Ov(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(ce(typeof i.getZIndex=="function",41),e=[i]),t=function(){return e}}return t}let ef=null;function Fv(i,t){if(!ef){const e=new uo({color:"rgba(255,255,255,0.4)"}),n=new co({color:"#3399CC",width:1.25});ef=[new _r({image:new ou({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return ef}function kv(){const i={},t=[255,255,255,1],e=[0,153,255,1],n=3;return i.Polygon=[new _r({fill:new uo({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new _r({stroke:new co({color:t,width:n+2})}),new _r({stroke:new co({color:e,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new _r({image:new ou({radius:n*2,fill:new uo({color:e}),stroke:new co({color:t,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function G1(i){return i.getGeometry()}const au=_r,Dv="#333";class nf{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=dn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new uo({color:Dv}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new nf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=dn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const jv=nf;function Bv(i,t,e,n,s){q1(i,t,e||0,n||i.length-1,s||Gv)}function q1(i,t,e,n,s){for(;n>e;){if(n-e>600){var r=n-e+1,o=t-e+1,a=Math.log(r),h=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*h*(r-h)/r)*(o-r/2<0?-1:1),c=Math.max(e,Math.floor(t-o*h/r+l)),d=Math.min(n,Math.floor(t+(r-o)*h/r+l));q1(i,t,c,d,s)}var g=i[t],p=e,y=n;for(Eh(i,e,t),s(i[n],g)>0&&Eh(i,e,n);p<y;){for(Eh(i,p,y),p++,y--;s(i[p],g)<0;)p++;for(;s(i[y],g)>0;)y--}s(i[e],g)===0?Eh(i,e,y):(y++,Eh(i,y,n)),y<=t&&(e=y+1),t<=y&&(n=y-1)}}function Eh(i,t,e){var n=i[t];i[t]=i[e],i[e]=n}function Gv(i,t){return i<t?-1:i>t?1:0}let U1=class{constructor(i=9){this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(i){let t=this.data;const e=[];if(!lu(i,t))return e;const n=this.toBBox,s=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],a=t.leaf?n(o):o;lu(i,a)&&(t.leaf?e.push(o):rf(i,a)?this._all(o,e):s.push(o))}t=s.pop()}return e}collides(i){let t=this.data;if(!lu(i,t))return!1;const e=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],r=t.leaf?this.toBBox(s):s;if(lu(i,r)){if(t.leaf||rf(i,r))return!0;e.push(s)}}t=e.pop()}return!1}load(i){if(!(i&&i.length))return this;if(i.length<this._minEntries){for(let e=0;e<i.length;e++)this.insert(i[e]);return this}let t=this._build(i.slice(),0,i.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(i){return i&&this._insert(i,this.data.height-1),this}clear(){return this.data=ia([]),this}remove(i,t){if(!i)return this;let e=this.data;const n=this.toBBox(i),s=[],r=[];let o,a,h;for(;e||s.length;){if(e||(e=s.pop(),a=s[s.length-1],o=r.pop(),h=!0),e.leaf){const l=qv(i,e.children,t);if(l!==-1)return e.children.splice(l,1),s.push(e),this._condense(s),this}!h&&!e.leaf&&rf(e,n)?(s.push(e),r.push(o),o=0,a=e,e=e.children[0]):a?(o++,e=a.children[o],h=!1):e=null}return this}toBBox(i){return i}compareMinX(i,t){return i.minX-t.minX}compareMinY(i,t){return i.minY-t.minY}toJSON(){return this.data}fromJSON(i){return this.data=i,this}_all(i,t){const e=[];for(;i;)i.leaf?t.push(...i.children):e.push(...i.children),i=e.pop();return t}_build(i,t,e,n){const s=e-t+1;let r=this._maxEntries,o;if(s<=r)return o=ia(i.slice(t,e+1)),ea(o,this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,n-1))),o=ia([]),o.leaf=!1,o.height=n;const a=Math.ceil(s/r),h=a*Math.ceil(Math.sqrt(r));z1(i,t,e,h,this.compareMinX);for(let l=t;l<=e;l+=h){const c=Math.min(l+h-1,e);z1(i,l,c,a,this.compareMinY);for(let d=l;d<=c;d+=a){const g=Math.min(d+a-1,c);o.children.push(this._build(i,d,g,n-1))}}return ea(o,this.toBBox),o}_chooseSubtree(i,t,e,n){for(;n.push(t),!(t.leaf||n.length-1===e);){let s=1/0,r=1/0,o;for(let a=0;a<t.children.length;a++){const h=t.children[a],l=sf(h),c=Wv(i,h)-l;c<r?(r=c,s=l<s?l:s,o=h):c===r&&l<s&&(s=l,o=h)}t=o||t.children[0]}return t}_insert(i,t,e){const n=e?i:this.toBBox(i),s=[],r=this._chooseSubtree(n,this.data,t,s);for(r.children.push(i),Lh(r,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(i,t){const e=i[t],n=e.children.length,s=this._minEntries;this._chooseSplitAxis(e,s,n);const r=this._chooseSplitIndex(e,s,n),o=ia(e.children.splice(r,e.children.length-r));o.height=e.height,o.leaf=e.leaf,ea(e,this.toBBox),ea(o,this.toBBox),t?i[t-1].children.push(o):this._splitRoot(e,o)}_splitRoot(i,t){this.data=ia([i,t]),this.data.height=i.height+1,this.data.leaf=!1,ea(this.data,this.toBBox)}_chooseSplitIndex(i,t,e){let n,s=1/0,r=1/0;for(let o=t;o<=e-t;o++){const a=Ah(i,0,o,this.toBBox),h=Ah(i,o,e,this.toBBox),l=Yv(a,h),c=sf(a)+sf(h);l<s?(s=l,n=o,r=c<r?c:r):l===s&&c<r&&(r=c,n=o)}return n||e-t}_chooseSplitAxis(i,t,e){const n=i.leaf?this.compareMinX:Uv,s=i.leaf?this.compareMinY:zv,r=this._allDistMargin(i,t,e,n),o=this._allDistMargin(i,t,e,s);r<o&&i.children.sort(n)}_allDistMargin(i,t,e,n){i.children.sort(n);const s=this.toBBox,r=Ah(i,0,t,s),o=Ah(i,e-t,e,s);let a=hu(r)+hu(o);for(let h=t;h<e-t;h++){const l=i.children[h];Lh(r,i.leaf?s(l):l),a+=hu(r)}for(let h=e-t-1;h>=t;h--){const l=i.children[h];Lh(o,i.leaf?s(l):l),a+=hu(o)}return a}_adjustParentBBoxes(i,t,e){for(let n=e;n>=0;n--)Lh(t[n],i)}_condense(i){for(let t=i.length-1,e;t>=0;t--)i[t].children.length===0?t>0?(e=i[t-1].children,e.splice(e.indexOf(i[t]),1)):this.clear():ea(i[t],this.toBBox)}};function qv(i,t,e){if(!e)return t.indexOf(i);for(let n=0;n<t.length;n++)if(e(i,t[n]))return n;return-1}function ea(i,t){Ah(i,0,i.children.length,t,i)}function Ah(i,t,e,n,s){s||(s=ia(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<e;r++){const o=i.children[r];Lh(s,i.leaf?n(o):o)}return s}function Lh(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function Uv(i,t){return i.minX-t.minX}function zv(i,t){return i.minY-t.minY}function sf(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function hu(i){return i.maxX-i.minX+(i.maxY-i.minY)}function Wv(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function Yv(i,t){const e=Math.max(i.minX,t.minX),n=Math.max(i.minY,t.minY),s=Math.min(i.maxX,t.maxX),r=Math.min(i.maxY,t.maxY);return Math.max(0,s-e)*Math.max(0,r-n)}function rf(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function lu(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function ia(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z1(i,t,e,n,s){const r=[t,e];for(;r.length;){if(e=r.pop(),t=r.pop(),e-t<=n)continue;const o=t+Math.ceil((e-t)/n/2)*n;Bv(i,o,t,e,s),r.push(t,o,o,e)}}let Nh=null;class Vv extends ah{constructor(t,e,n,s,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===me.LOADED){Nh||(Nh=Xi(1,1,void 0,{willReadFrequently:!0})),Nh.drawImage(this.image_,0,0);try{Nh.getImageData(0,0,1,1),this.tainted_=!1}catch{Nh=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ue.CHANGE)}handleImageError_(){this.imageState_=me.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=me.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Xi(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===me.IDLE){this.image_||this.initializeImage_(),this.imageState_=me.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Wd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==me.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const s=n.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=yp(this.color_),s.fillRect(0,0,n.width/t,n.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Xv(i,t,e,n,s,r){let o=Bl.get(t,n,r);return o||(o=new Vv(i,t,e,n,s,r),Bl.set(t,n,r,o)),o}function W1(i,t,e,n){return e!==void 0&&n!==void 0?[e/i,n/t]:e!==void 0?e/i:n!==void 0?n/t:1}class of extends j1{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;ce(!(a!==void 0&&o),4),ce(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||ke(o)),ce(a!==void 0&&a.length>0,6),ce(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);const h=t.src!==void 0?me.IDLE:me.LOADED;if(this.color_=t.color!==void 0?jl(t.color):null,this.iconImage_=Xv(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,h,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let l,c;if(t.size)[l,c]=t.size;else{const d=this.getImage(1);if(d instanceof HTMLCanvasElement||d.src&&d.complete)l=d.width,c=d.height;else{this.initialOptions_=t;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(W1(p[0],p[1],t.width,t.height))};this.listenImageChange(g);return}}l!==void 0&&this.setScale(W1(l,c,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new of({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==me.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==me.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ue.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ue.CHANGE,t)}}const Y1=of;function V1(i){return new au({fill:Ph(i,""),stroke:Rh(i,""),text:Hv(i),image:Zv(i)})}function Ph(i,t){const e=i[t+"fill-color"];if(e)return new uo({color:e})}function Rh(i,t){const e=i[t+"stroke-width"],n=i[t+"stroke-color"];if(!(!e&&!n))return new co({width:e,color:n,lineCap:i[t+"stroke-line-cap"],lineJoin:i[t+"stroke-line-join"],lineDash:i[t+"stroke-line-dash"],lineDashOffset:i[t+"stroke-line-dash-offset"],miterLimit:i[t+"stroke-miter-limit"]})}function Hv(i){const t=i["text-value"];return t?new jv({text:t,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],repeat:i["text-repeat"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:Ph(i,"text-"),backgroundFill:Ph(i,"text-background-"),stroke:Rh(i,"text-"),backgroundStroke:Rh(i,"text-background-")}):void 0}function Zv(i){const t=i["icon-src"],e=i["icon-img"];if(t||e)return new Y1({src:t,img:e,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],width:i["icon-width"],height:i["icon-height"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const r="shape-";return new B1({points:n,fill:Ph(i,r),stroke:Rh(i,r),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const s=i["circle-radius"];if(s){const r="circle-";return new ou({radius:s,fill:Ph(i,r),stroke:Rh(i,r),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const X1={RENDER_ORDER:"renderOrder"};class Kv extends mh{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(X1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new U1(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(X1.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=Fv;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof au)e=t;else if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r){const o=t[r];o instanceof au?s[r]=o:s[r]=V1(o)}e=s}else e=V1(t);this.style_=e,this.styleFunction_=t===null?void 0:Ov(this.style_),this.changed()}}const Jv=Kv,Ih={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},uu=[Ih.FILL],yr=[Ih.STROKE],fo=[Ih.BEGIN_PATH],H1=[Ih.CLOSE_PATH],ne=Ih;class Qv{drawCustom(t,e,n,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Z1=Qv;class $v extends Z1{constructor(t,e,n,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,h=t.length;a<h;a+=e)s[0]=t[a],s[1]=t[a+1],lh(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,n,s,r,o){const a=this.coordinates;let h=a.length;const l=this.getBufferedMaxExtent();o&&(e+=s);let c=t[e],d=t[e+1];const g=this.tmpCoordinate_;let p=!0,y,v,x;for(y=e+s;y<n;y+=s)g[0]=t[y],g[1]=t[y+1],x=Hc(l,g),x!==v?(p&&(a[h++]=c,a[h++]=d,p=!1),a[h++]=g[0],a[h++]=g[1]):x===Ii.INTERSECTING?(a[h++]=g[0],a[h++]=g[1],p=!1):p=!0,c=g[0],d=g[1],v=x;return(r&&p||y===e+s)&&(a[h++]=c,a[h++]=d),h}drawCustomCoordinates_(t,e,n,s,r){for(let o=0,a=n.length;o<a;++o){const h=n[o],l=this.appendFlatLineCoordinates(t,e,h,s,!1,!1);r.push(l),e=h}return e}drawCustom(t,e,n,s){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let h,l,c,d,g;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),d=[];const p=t.getEndss();g=0;for(let y=0,v=p.length;y<v;++y){const x=[];g=this.drawCustomCoordinates_(h,g,p[y],o,x),d.push(x)}this.instructions.push([ne.CUSTOM,a,d,t,n,xd]),this.hitDetectionInstructions.push([ne.CUSTOM,a,d,t,s||n,xd]);break;case"Polygon":case"MultiLineString":c=[],h=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),g=this.drawCustomCoordinates_(h,0,t.getEnds(),o,c),this.instructions.push([ne.CUSTOM,a,c,t,n,gh]),this.hitDetectionInstructions.push([ne.CUSTOM,a,c,t,s||n,gh]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(h,0,h.length,o,!1,!1),this.instructions.push([ne.CUSTOM,a,l,t,n,pr]),this.hitDetectionInstructions.push([ne.CUSTOM,a,l,t,s||n,pr]);break;case"MultiPoint":h=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(h,o),l>a&&(this.instructions.push([ne.CUSTOM,a,l,t,n,pr]),this.hitDetectionInstructions.push([ne.CUSTOM,a,l,t,s||n,pr]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),l=this.coordinates.length,this.instructions.push([ne.CUSTOM,a,l,t,n]),this.hitDetectionInstructions.push([ne.CUSTOM,a,l,t,s||n]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[ne.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ne.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let s,r,o=-1;for(e=0;e<n;++e)s=t[e],r=s[0],r==ne.END_GEOMETRY?o=e:r==ne.BEGIN_GEOMETRY&&(s[2]=e,x5(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const s=t.getColor();n.fillStyle=bs(s||Gs)}else n.fillStyle=void 0;if(e){const s=e.getColor();n.strokeStyle=bs(s||wh);const r=e.getLineCap();n.lineCap=r!==void 0?r:$l;const o=e.getLineDash();n.lineDash=o?o.slice():_h;const a=e.getLineDashOffset();n.lineDashOffset=a||yh;const h=e.getLineJoin();n.lineJoin=h!==void 0?h:Vo;const l=e.getWidth();n.lineWidth=l!==void 0?l:xh;const c=e.getMiterLimit();n.miterLimit=c!==void 0?c:vh,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[ne.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ne.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,h=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=s||r!=t.currentLineDash&&!lr(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=h||t.currentMiterLimit!=l)&&(n!==void 0&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=h,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[ne.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=dp(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;hh(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Th=$v;class tw extends Th{constructor(t,e,n,s){super(t,e,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([ne.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([ne.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const ew=tw;class iw extends Th{constructor(t,e,n,s){super(t,e,n,s)}drawFlatCoordinates_(t,e,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,s,!1,!1),a=[ne.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(t,e){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,_h,yh],fo);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(yr),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],fo);const o=t.getEnds(),a=t.getFlatCoordinates(),h=t.getStride();let l=0;for(let c=0,d=o.length;c<d;++c)l=this.drawFlatCoordinates_(a,l,o[c],h);this.hitDetectionInstructions.push(yr),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(yr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(yr),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(fo)}}const nw=iw;class sw extends Th{constructor(t,e,n,s){super(t,e,n,s)}drawFlatCoordinatess_(t,e,n,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,h=n.length;this.instructions.push(fo),this.hitDetectionInstructions.push(fo);for(let l=0;l<h;++l){const c=n[l],d=this.coordinates.length,g=this.appendFlatLineCoordinates(t,e,c,s,!0,!a),p=[ne.MOVE_TO_LINE_TO,d,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(H1),this.hitDetectionInstructions.push(H1)),e=c}return o&&(this.instructions.push(uu),this.hitDetectionInstructions.push(uu)),a&&(this.instructions.push(yr),this.hitDetectionInstructions.push(yr)),e}drawCircle(t,e){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Gs]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getFlatCoordinates(),a=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[ne.CIRCLE,h];this.instructions.push(fo,l),this.hitDetectionInstructions.push(fo,l),n.fillStyle!==void 0&&(this.instructions.push(uu),this.hitDetectionInstructions.push(uu)),n.strokeStyle!==void 0&&(this.instructions.push(yr),this.hitDetectionInstructions.push(yr)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Gs]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(a,0,o,h),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,Gs]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),h=t.getStride();let l=0;for(let c=0,d=o.length;c<d;++c)l=this.drawFlatCoordinatess_(a,l,o[c],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,s=e.length;n<s;++n)e[n]=ro(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const K1=sw;function rw(i,t,e,n,s){const r=[];let o=e,a=0,h=t.slice(e,2);for(;a<i&&o+s<n;){const[l,c]=h.slice(-2),d=t[o+s],g=t[o+s+1],p=Math.sqrt((d-l)*(d-l)+(g-c)*(g-c));if(a+=p,a>=i){const y=(i-a+p)/p,v=Cn(l,d,y),x=Cn(c,g,y);h.push(v,x),r.push(h),h=[v,x],a==i&&(o+=s),a=0}else if(a<i)h.push(t[o+s],t[o+s+1]),o+=s;else{const y=p-a,v=Cn(l,d,y/p),x=Cn(c,g,y/p);h.push(v,x),r.push(h),h=[v,x],a=0,o+=s}}return a>0&&r.push(h),r}function ow(i,t,e,n,s){let r=e,o=e,a=0,h=0,l=e,c,d,g,p,y,v,x,b,S,A;for(d=e;d<n;d+=s){const O=t[d],k=t[d+1];y!==void 0&&(S=O-y,A=k-v,p=Math.sqrt(S*S+A*A),x!==void 0&&(h+=g,c=Math.acos((x*S+b*A)/(g*p)),c>i&&(h>a&&(a=h,r=l,o=d),h=0,l=d-s)),g=p,x=S,b=A),y=O,v=k}return h+=p,h>a?[l,d]:[r,o]}const Oh={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class aw extends Th{constructor(t,e,n,s){super(t,e,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const h=t.getType();let l=null,c=t.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Vi(this.getBufferedMaxExtent(),t.getExtent()))return;let d;if(l=t.getFlatCoordinates(),h=="LineString")d=[l.length];else if(h=="MultiLineString")d=t.getEnds();else if(h=="Polygon")d=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const v=t.getEndss();d=[];for(let x=0,b=v.length;x<b;++x)d.push(v[x][0])}this.beginGeometry(t,e);const g=r.repeat,p=g?void 0:r.textAlign;let y=0;for(let v=0,x=d.length;v<x;++v){let b;g?b=rw(g*this.resolution,l,y,d[v],c):b=[l.slice(y,d[v])];for(let S=0,A=b.length;S<A;++S){const O=b[S];let k=0,H=O.length;if(p==null){const F=ow(r.maxAngle,O,0,O.length,2);k=F[0],H=F[1]}for(let F=k;F<H;F+=c)o.push(O[F],O[F+1]);const W=o.length;y=d[v],this.drawChars_(a,W),a=W}}this.endGeometry(e)}else{let d=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),c=2;break;case"Polygon":l=t.getFlatInteriorPoint(),r.overflow||d.push(l[2]/this.resolution),c=3;break;case"MultiPolygon":const x=t.getFlatInteriorPoints();l=[];for(let b=0,S=x.length;b<S;b+=3)r.overflow||d.push(x[b+2]/this.resolution),l.push(x[b],x[b+1]);if(l.length===0)return;c=2;break}const g=this.appendFlatPointCoordinates(l,c);if(g===a)return;if(d&&(g-a)/2!==l.length/c){let x=a/2;d=d.filter((b,S)=>{const A=o[(x+S)*2]===l[S*c]&&o[(x+S)*2+1]===l[S*c+1];return A||--x,A})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let p=r.padding;if(p!=ho&&(r.scale[0]<0||r.scale[1]<0)){let x=r.padding[0],b=r.padding[1],S=r.padding[2],A=r.padding[3];r.scale[0]<0&&(b=-b,A=-A),r.scale[1]<0&&(x=-x,S=-S),p=[x,b,S,A]}const y=this.pixelRatio;this.instructions.push([ne.DRAW_IMAGE,a,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==ho?ho:p.map(function(x){return x*y}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const v=1/y;this.hitDetectionInstructions.push([ne.DRAW_IMAGE,a,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,void 0,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||bh,justify:e.justify,textBaseline:e.textBaseline||tu,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,l=Oh[s.textBaseline],c=this.textOffsetY_*h,d=this.text_,g=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ne.DRAW_CHARS,t,e,l,s.overflow,a,s.maxAngle,h,c,r,g*h,d,o,1]),this.hitDetectionInstructions.push([ne.DRAW_CHARS,t,e,l,s.overflow,a,s.maxAngle,1,c,r,g,d,o,1/h])}setTextStyle(t,e){let n,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=bs(o.getColor()||Gs)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const y=a.getLineDash(),v=a.getLineDashOffset(),x=a.getWidth(),b=a.getMiterLimit();r.lineCap=a.getLineCap()||$l,r.lineDash=y?y.slice():_h,r.lineDashOffset=v===void 0?yh:v,r.lineJoin=a.getLineJoin()||Vo,r.lineWidth=x===void 0?xh:x,r.miterLimit=b===void 0?vh:b,r.strokeStyle=bs(a.getColor()||wh)}n=this.textState_;const h=t.getFont()||c1;hy(h);const l=t.getScaleArray();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||tu,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||ho,n.scale=l===void 0?[1,1]:l;const c=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textRotation_=p===void 0?0:p,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:ke(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+ke(s.fillStyle):""}this.declutterImageWithText_=e}}const hw={Circle:K1,Default:Th,Image:ew,LineString:nw,Polygon:K1,Text:aw};class lw{constructor(t,e,n,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const s in n){const r=n[s].finish();t[e][s]=r}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[e];if(r===void 0){const o=hw[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r}return r}}const J1=lw;function uw(i,t,e,n,s,r,o,a,h,l,c,d){let g=i[t],p=i[t+1],y=0,v=0,x=0,b=0;function S(){y=g,v=p,t+=n,g=i[t],p=i[t+1],b+=x,x=Math.sqrt((g-y)*(g-y)+(p-v)*(p-v))}do S();while(t<e-n&&b+x<r);let A=x===0?0:(r-b)/x;const O=Cn(y,g,A),k=Cn(v,p,A),H=t-n,W=b,F=r+a*h(l,s,c);for(;t<e-n&&b+x<F;)S();A=x===0?0:(F-b)/x;const $=Cn(y,g,A),V=Cn(v,p,A);let P;if(d){const tt=[O,k,$,V];pd(tt,0,4,2,d,tt,tt),P=tt[0]>tt[2]}else P=O>$;const I=Math.PI,U=[],G=H+n===t;t=H,x=0,b=W,g=i[t],p=i[t+1];let nt;if(G){S(),nt=Math.atan2(p-v,g-y),P&&(nt+=nt>0?-I:I);const tt=($+O)/2,Q=(V+k)/2;return U[0]=[tt,Q,(F-r)/2,nt,s],U}s=s.replace(/\n/g," ");for(let tt=0,Q=s.length;tt<Q;){S();let J=Math.atan2(p-v,g-y);if(P&&(J+=J>0?-I:I),nt!==void 0){let B=J-nt;if(B+=B>I?-2*I:B<-I?2*I:0,Math.abs(B)>o)return null}nt=J;const dt=tt;let ct=0;for(;tt<Q;++tt){const B=P?Q-tt-1:tt,Y=a*h(l,s[B],c);if(t+n<e&&b+x<r+ct+Y/2)break;ct+=Y}if(tt===dt)continue;const Et=P?s.substring(Q-dt,Q-tt):s.substring(dt,tt);A=x===0?0:(r+ct/2-b)/x;const M=Cn(y,g,A),j=Cn(v,p,A);U.push([M,j,ct/2,J,Et]),r+=ct}return U}const na=Mn(),vr=[],Ws=[],Ys=[],wr=[];function Q1(i){return i[3].declutterBox}const cw=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function $1(i,t){return(t==="start"||t==="end")&&!cw.test(i)&&(t=t==="start"?"left":"right"),Oh[t]}function dw(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}class fw{constructor(t,e,n,s){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=_s(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,s){const r=t+e+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,h=this.textStates[e],l=this.pixelRatio,c=[h.scale[0]*l,h.scale[1]*l],d=Array.isArray(t),g=h.justify?Oh[h.justify]:$1(Array.isArray(t)?t[0]:t,h.textAlign||bh),p=s&&o.lineWidth?o.lineWidth:0,y=d?t:t.split(`
`).reduce(dw,[]),{width:v,height:x,widths:b,heights:S,lineWidths:A}=uy(h,y),O=v+p,k=[],H=(O+2)*c[0],W=(x+p)*c[1],F={width:H<0?Math.floor(H):Math.ceil(H),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:k};(c[0]!=1||c[1]!=1)&&k.push("scale",c),s&&(k.push("strokeStyle",o.strokeStyle),k.push("lineWidth",p),k.push("lineCap",o.lineCap),k.push("lineJoin",o.lineJoin),k.push("miterLimit",o.miterLimit),k.push("setLineDash",[o.lineDash]),k.push("lineDashOffset",o.lineDashOffset)),n&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const $=.5-g;let V=g*O+$*p;const P=[],I=[];let U=0,G=0,nt=0,tt=0,Q;for(let J=0,dt=y.length;J<dt;J+=2){const ct=y[J];if(ct===`
`){G+=U,U=0,V=g*O+$*p,++tt;continue}const Et=y[J+1]||h.font;Et!==Q&&(s&&P.push("font",Et),n&&I.push("font",Et),Q=Et),U=Math.max(U,S[nt]);const M=[ct,V+$*b[nt]+g*(b[nt]-A[tt]),.5*(p+U)+G];V+=b[nt],s&&P.push("strokeText",M),n&&I.push("fillText",M),++nt}return Array.prototype.push.apply(k,P),Array.prototype.push.apply(k,I),this.labels_[r]=F,F}replayTextBackground_(t,e,n,s,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,s,r,o,a,h,l,c,d,g,p,y,v,x){a*=g[0],h*=g[1];let b=n-a,S=s-h;const A=r+l>t?t-l:r,O=o+c>e?e-c:o,k=y[3]+A*g[0]+y[1],H=y[0]+O*g[1]+y[2],W=b-y[3],F=S-y[0];(v||d!==0)&&(vr[0]=W,wr[0]=W,vr[1]=F,Ws[1]=F,Ws[0]=W+k,Ys[0]=Ws[0],Ys[1]=F+H,wr[1]=Ys[1]);let $;return d!==0?($=ys(_s(),n,s,1,1,d,-n,-s),Pi($,vr),Pi($,Ws),Pi($,Ys),Pi($,wr),On(Math.min(vr[0],Ws[0],Ys[0],wr[0]),Math.min(vr[1],Ws[1],Ys[1],wr[1]),Math.max(vr[0],Ws[0],Ys[0],wr[0]),Math.max(vr[1],Ws[1],Ys[1],wr[1]),na)):On(Math.min(W,W+k),Math.min(F,F+H),Math.max(W,W+k),Math.max(F,F+H),na),p&&(b=Math.round(b),S=Math.round(S)),{drawImageX:b,drawImageY:S,drawImageW:A,drawImageH:O,originX:l,originY:c,declutterBox:{minX:na[0],minY:na[1],maxX:na[2],maxY:na[3],value:x},canvasTransform:$,scale:g}}replayImageOrLabel_(t,e,n,s,r,o,a){const h=!!(o||a),l=s.declutterBox,c=t.canvas,d=a?a[2]*s.scale[0]/2:0;return l.minX-d<=c.width/e&&l.maxX+d>=0&&l.minY-d<=c.height/e&&l.maxY+d>=0&&(h&&this.replayTextBackground_(t,vr,Ws,Ys,wr,o,a),cy(t,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=Pi(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,s){const r=this.textStates[e],o=this.createLabel(t,e,s,n),a=this.strokeStates[n],h=this.pixelRatio,l=$1(Array.isArray(t)?t[0]:t,r.textAlign||bh),c=Oh[r.textBaseline||tu],d=a&&a.lineWidth?a.lineWidth:0,g=o.width/h-2*r.scale[0],p=l*g+2*(.5-l)*d,y=c*o.height/h+2*(.5-c)*d;return{label:o,anchorX:p,anchorY:y}}execute_(t,e,n,s,r,o,a,h){let l;this.pixelCoordinates_&&lr(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=so(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),k5(this.renderedTransform_,n));let c=0;const d=s.length;let g=0,p,y,v,x,b,S,A,O,k,H,W,F,$=0,V=0,P=null,I=null;const U=this.coordinateCache_,G=this.viewRotation_,nt=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,tt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},Q=this.instructions!=s||this.overlaps?0:200;let J,dt,ct,Et;for(;c<d;){const M=s[c];switch(M[0]){case ne.BEGIN_GEOMETRY:J=M[1],Et=M[3],J.getGeometry()?a!==void 0&&!Vi(a,Et.getExtent())?c=M[2]+1:++c:c=M[2];break;case ne.BEGIN_PATH:$>Q&&(this.fill_(t),$=0),V>Q&&(t.stroke(),V=0),!$&&!V&&(t.beginPath(),x=NaN,b=NaN),++c;break;case ne.CIRCLE:g=M[1];const j=l[g],B=l[g+1],Y=l[g+2],it=l[g+3],ot=Y-j,at=it-B,ut=Math.sqrt(ot*ot+at*at);t.moveTo(j+ut,B),t.arc(j,B,ut,0,2*Math.PI,!0),++c;break;case ne.CLOSE_PATH:t.closePath(),++c;break;case ne.CUSTOM:g=M[1],p=M[2];const At=M[3],Mt=M[4],Tt=M.length==6?M[5]:void 0;tt.geometry=At,tt.feature=J,c in U||(U[c]=[]);const It=U[c];Tt?Tt(l,g,p,2,It):(It[0]=l[g],It[1]=l[g+1],It.length=2),Mt(It,tt),++c;break;case ne.DRAW_IMAGE:g=M[1],p=M[2],O=M[3],y=M[4],v=M[5];let Xt=M[6];const ft=M[7],z=M[8],oe=M[9],zt=M[10];let xt=M[11];const Pt=M[12];let Nt=M[13];const Lt=M[14],qt=M[15];if(!O&&M.length>=20){k=M[19],H=M[20],W=M[21],F=M[22];const Vt=this.drawLabelWithPointPlacement_(k,H,W,F);O=Vt.label,M[3]=O;const Ee=M[23];y=(Vt.anchorX-Ee)*this.pixelRatio,M[4]=y;const Mi=M[24];v=(Vt.anchorY-Mi)*this.pixelRatio,M[5]=v,Xt=O.height,M[6]=Xt,Nt=O.width,M[13]=Nt}let Zt;M.length>25&&(Zt=M[25]);let ae,le,ve;M.length>17?(ae=M[16],le=M[17],ve=M[18]):(ae=ho,le=!1,ve=!1),zt&&nt?xt+=G:!zt&&!nt&&(xt-=G);let Ne=0;for(;g<p;g+=2){if(Zt&&Zt[Ne++]<Nt/this.pixelRatio)continue;const Vt=this.calculateImageOrLabelDimensions_(O.width,O.height,l[g],l[g+1],Nt,Xt,y,v,z,oe,xt,Pt,r,ae,le||ve,J),Ee=[t,e,O,Vt,ft,le?P:null,ve?I:null];if(h){if(Lt==="none")continue;if(Lt==="obstacle"){h.insert(Vt.declutterBox);continue}else{let Mi,Je;if(qt){const ri=p-g;if(!qt[ri]){qt[ri]=Ee;continue}if(Mi=qt[ri],delete qt[ri],Je=Q1(Mi),h.collides(Je))continue}if(h.collides(Vt.declutterBox))continue;Mi&&(h.insert(Je),this.replayImageOrLabel_.apply(this,Mi)),h.insert(Vt.declutterBox)}}this.replayImageOrLabel_.apply(this,Ee)}++c;break;case ne.DRAW_CHARS:const te=M[1],Jt=M[2],Ot=M[3],Di=M[4];F=M[5];const Pe=M[6],yn=M[7],Ue=M[8];W=M[9];const Ve=M[10];k=M[11],H=M[12];const An=[M[13],M[13]],Re=this.textStates[H],Ln=Re.font,Xe=[Re.scale[0]*yn,Re.scale[1]*yn];let Wi;Ln in this.widths_?Wi=this.widths_[Ln]:(Wi={},this.widths_[Ln]=Wi);const jn=D1(l,te,Jt,2),si=Math.abs(Xe[0])*f1(Ln,k,Wi);if(Di||si<=jn){const Vt=this.textStates[H].textAlign,Ee=(jn-si)*Oh[Vt],Mi=uw(l,te,Jt,2,k,Ee,Pe,Math.abs(Xe[0]),f1,Ln,Wi,nt?0:this.viewRotation_);t:if(Mi){const Je=[];let ri,hn,Ht,ti,li;if(W)for(ri=0,hn=Mi.length;ri<hn;++ri){li=Mi[ri],Ht=li[4],ti=this.createLabel(Ht,H,"",W),y=li[2]+(Xe[0]<0?-Ve:Ve),v=Ot*ti.height+(.5-Ot)*2*Ve*Xe[1]/Xe[0]-Ue;const oi=this.calculateImageOrLabelDimensions_(ti.width,ti.height,li[0],li[1],ti.width,ti.height,y,v,0,0,li[3],An,!1,ho,!1,J);if(h&&h.collides(oi.declutterBox))break t;Je.push([t,e,ti,oi,1,null,null])}if(F)for(ri=0,hn=Mi.length;ri<hn;++ri){li=Mi[ri],Ht=li[4],ti=this.createLabel(Ht,H,F,""),y=li[2],v=Ot*ti.height-Ue;const oi=this.calculateImageOrLabelDimensions_(ti.width,ti.height,li[0],li[1],ti.width,ti.height,y,v,0,0,li[3],An,!1,ho,!1,J);if(h&&h.collides(oi.declutterBox))break t;Je.push([t,e,ti,oi,1,null,null])}h&&h.load(Je.map(Q1));for(let oi=0,vi=Je.length;oi<vi;++oi)this.replayImageOrLabel_.apply(this,Je[oi])}}++c;break;case ne.END_GEOMETRY:if(o!==void 0){J=M[1];const Vt=o(J,Et);if(Vt)return Vt}++c;break;case ne.FILL:Q?$++:this.fill_(t),++c;break;case ne.MOVE_TO_LINE_TO:for(g=M[1],p=M[2],dt=l[g],ct=l[g+1],S=dt+.5|0,A=ct+.5|0,(S!==x||A!==b)&&(t.moveTo(dt,ct),x=S,b=A),g+=2;g<p;g+=2)dt=l[g],ct=l[g+1],S=dt+.5|0,A=ct+.5|0,(g==p-2||S!==x||A!==b)&&(t.lineTo(dt,ct),x=S,b=A);++c;break;case ne.SET_FILL_STYLE:P=M,this.alignFill_=M[2],$&&(this.fill_(t),$=0,V&&(t.stroke(),V=0)),t.fillStyle=M[1],++c;break;case ne.SET_STROKE_STYLE:I=M,V&&(t.stroke(),V=0),this.setStrokeStyle_(t,M),++c;break;case ne.STROKE:Q?V++:t.stroke(),++c;break;default:++c;break}}$&&this.fill_(t),V&&t.stroke()}execute(t,e,n,s,r,o){this.viewRotation_=s,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,s,r){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,r)}}const pw=fw,af=["Polygon","Circle","LineString","Image","Text","Default"];class gw{constructor(t,e,n,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=_s(),this.createExecutors_(r)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];n===void 0&&(n={},this.executorsByZIndex_[e]=n);const s=t[e];for(const r in s){const o=s[r];n[r]=new pw(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,s,r,o){s=Math.round(s);const a=s*2+1,h=ys(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Xi(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):l||c.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Mn(),uh(d,t),hh(d,e*(this.renderBuffer_+s),d));const g=mw(s);let p;function y(k,H){const W=c.getImageData(0,0,a,a).data;for(let F=0,$=g.length;F<$;F++)if(W[g[F]]>0){if(!o||p!=="Image"&&p!=="Text"||o.includes(k)){const V=(g[F]-3)/4,P=s-V%a,I=s-(V/a|0),U=r(k,H,P*P+I*I);if(U)return U}c.clearRect(0,0,a,a);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Jr);let x,b,S,A,O;for(x=v.length-1;x>=0;--x){const k=v[x].toString();for(S=this.executorsByZIndex_[k],b=af.length-1;b>=0;--b)if(p=af[b],A=S[p],A!==void 0&&(O=A.executeHitDetection(c,h,n,y,d),O))return O}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],s=e[1],r=e[2],o=e[3],a=[n,s,n,o,r,o,r,s];return so(a,0,8,2,t,a),a}isEmpty(){return oh(this.executorsByZIndex_)}execute(t,e,n,s,r,o,a){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(Jr),this.maxExtent_&&(t.save(),this.clip(t,n)),o=o||af;let l,c,d,g,p,y;for(a&&h.reverse(),l=0,c=h.length;l<c;++l){const v=h[l].toString();for(p=this.executorsByZIndex_[v],d=0,g=o.length;d<g;++d){const x=o[d];y=p[x],y!==void 0&&y.execute(t,e,n,s,r,a)}}this.maxExtent_&&t.restore()}}const hf={};function mw(i){if(hf[i]!==void 0)return hf[i];const t=i*2+1,e=i*i,n=new Array(e+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>e)break;let h=n[a];h||(h=[],n[a]=h),h.push(((i+r)*t+(i+o))*4+3),r>0&&h.push(((i-r)*t+(i+o))*4+3),o>0&&(h.push(((i+r)*t+(i-o))*4+3),r>0&&h.push(((i-r)*t+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return hf[i]=s,s}const tg=gw;class _w extends Z1{constructor(t,e,n,s,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=s,this.transformRotation_=s?ch(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_s()}drawImages_(t,e,n,s){if(!this.image_)return;const r=so(t,e,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,h=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=h*this.imageOpacity_);let l=this.imageRotation_;this.transformRotation_===0&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let c=0,d=r.length;c<d;c+=2){const g=r[c]-this.imageAnchorX_,p=r[c+1]-this.imageAnchorY_;if(l!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const y=g+this.imageAnchorX_,v=p+this.imageAnchorY_;ys(a,y,v,1,1,l,-y,-v),o.setTransform.apply(o,a),o.translate(y,v),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=h)}drawText_(t,e,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=so(t,e,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=s){const h=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(h-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,h,l),this.textFillState_&&o.fillText(this.text_,h,l))}}moveToLineTo_(t,e,n,s,r){const o=this.context_,a=so(t,e,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let h=a.length;r&&(h-=2);for(let l=2;l<h;l+=2)o.lineTo(a[l],a[l+1]);return r&&o.closePath(),n}drawRings_(t,e,n,s){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=I_(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,s=e.length;n<s;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Vi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();n.beginPath();for(let h=0,l=o.length;h<l;++h)r=this.moveToLineTo_(s,r,o[h],a,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,h=r.length;a<h;++a){const l=r[a];s=this.drawRings_(n,s,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),lr(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,s=t.textAlign?t.textAlign:bh;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=s&&(n.textAlign=s,e.textAlign=s),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:bs(n||Gs)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit(),c=r||_h;this.strokeState_={lineCap:s!==void 0?s:$l,lineDash:this.pixelRatio_===1?c:c.map(d=>d*this.pixelRatio_),lineDashOffset:(o||yh)*this.pixelRatio_,lineJoin:a!==void 0?a:Vo,lineWidth:(h!==void 0?h:xh)*this.pixelRatio_,miterLimit:l!==void 0?l:vh,strokeStyle:bs(n||wh)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const p=e.getColor();this.textFillState_={fillStyle:bs(p||Gs)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const p=n.getColor(),y=n.getLineCap(),v=n.getLineDash(),x=n.getLineDashOffset(),b=n.getLineJoin(),S=n.getWidth(),A=n.getMiterLimit();this.textStrokeState_={lineCap:y!==void 0?y:$l,lineDash:v||_h,lineDashOffset:x||yh,lineJoin:b!==void 0?b:Vo,lineWidth:S!==void 0?S:xh,miterLimit:A!==void 0?A:vh,strokeStyle:bs(p||wh)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),h=t.getRotation(),l=t.getScaleArray(),c=t.getText(),d=t.getTextAlign(),g=t.getTextBaseline();this.textState_={font:s!==void 0?s:c1,textAlign:d!==void 0?d:bh,textBaseline:g!==void 0?g:tu},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,y,v)=>p+=v%2?" ":y,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}}}const yw=_w,xs=.5;function vw(i,t,e,n,s,r,o){const a=i[0]*xs,h=i[1]*xs,l=Xi(a,h);l.imageSmoothingEnabled=!1;const c=l.canvas,d=new yw(l,xs,s,null,o),g=e.length,p=Math.floor((256*256*256-1)/g),y={};for(let x=1;x<=g;++x){const b=e[x-1],S=b.getStyleFunction()||n;if(!n)continue;let A=S(b,r);if(!A)continue;Array.isArray(A)||(A=[A]);const O=(x*p).toString(16).padStart(7,"#00000");for(let k=0,H=A.length;k<H;++k){const W=A[k],F=W.getGeometryFunction()(b);if(!F||!Vi(s,F.getExtent()))continue;const $=W.clone(),V=$.getFill();V&&V.setColor(O);const P=$.getStroke();P&&(P.setColor(O),P.setLineDash(null)),$.setText(void 0);const I=W.getImage();if(I&&I.getOpacity()!==0){const tt=I.getImageSize();if(!tt)continue;const Q=Xi(tt[0],tt[1],void 0,{alpha:!1}),J=Q.canvas;Q.fillStyle=O,Q.fillRect(0,0,J.width,J.height),$.setImage(new Y1({img:J,imgSize:tt,anchor:I.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:I.getOrigin(),opacity:1,size:I.getSize(),scale:I.getScale(),rotation:I.getRotation(),rotateWithView:I.getRotateWithView()}))}const U=$.getZIndex()||0;let G=y[U];G||(G={},y[U]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]);const nt=F.getType();if(nt==="GeometryCollection"){const tt=F.getGeometriesArrayRecursive();for(let Q=0,J=tt.length;Q<J;++Q){const dt=tt[Q];G[dt.getType().replace("Multi","")].push(dt,$)}}else G[nt.replace("Multi","")].push(F,$)}}const v=Object.keys(y).map(Number).sort(Jr);for(let x=0,b=v.length;x<b;++x){const S=y[v[x]];for(const A in S){const O=S[A];for(let k=0,H=O.length;k<H;k+=2){d.setStyle(O[k+1]);for(let W=0,F=t.length;W<F;++W)d.setTransform(t[W]),d.drawGeometry(O[k])}}}return l.getImageData(0,0,c.width,c.height)}function ww(i,t,e){const n=[];if(e){const s=Math.floor(Math.round(i[0])*xs),r=Math.floor(Math.round(i[1])*xs),o=(ai(s,0,e.width-1)+ai(r,0,e.height-1)*e.width)*4,a=e.data[o],h=e.data[o+1],l=e.data[o+2]+256*(h+256*a),c=Math.floor((256*256*256-1)/t.length);l&&l%c===0&&n.push(t[l/c-1])}return n}const bw=.5,eg={Point:Pw,LineString:Aw,Polygon:Iw,MultiPoint:Rw,MultiLineString:Lw,MultiPolygon:Nw,GeometryCollection:Ew,Circle:Mw};function xw(i,t){return parseInt(ke(i),10)-parseInt(ke(t),10)}function Sw(i,t){const e=lf(i,t);return e*e}function lf(i,t){return bw*i/t}function Mw(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(r||o){const h=i.getBuilder(e.getZIndex(),"Circle");h.setFillStrokeStyle(r,o),h.drawCircle(t,n)}const a=e.getText();if(a&&a.getText()){const h=(s||i).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,n)}}function ig(i,t,e,n,s,r,o){let a=!1;const h=e.getImage();if(h){const l=h.getImageState();l==me.LOADED||l==me.ERROR?h.unlistenImageChange(s):(l==me.IDLE&&h.load(),h.listenImageChange(s),a=!0)}return Cw(i,t,e,n,r,o),a}function Cw(i,t,e,n,s,r){const o=e.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(n,s);if(e.getRenderer())ng(i,a,e,t);else{const h=eg[a.getType()];h(i,a,e,t,r)}}function ng(i,t,e,n){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let r=0,o=s.length;r<o;++r)ng(i,s[r],e,n);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer())}function Ew(i,t,e,n,s){const r=t.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const h=eg[r[o].getType()];h(i,r[o],e,n,s)}}function Aw(i,t,e,n,s){const r=e.getStroke();if(r){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,n)}const o=e.getText();if(o&&o.getText()){const a=(s||i).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n)}}function Lw(i,t,e,n,s){const r=e.getStroke();if(r){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,n)}const o=e.getText();if(o&&o.getText()){const a=(s||i).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n)}}function Nw(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(o||r){const h=i.getBuilder(e.getZIndex(),"Polygon");h.setFillStrokeStyle(r,o),h.drawMultiPolygon(t,n)}const a=e.getText();if(a&&a.getText()){const h=(s||i).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,n)}}function Pw(i,t,e,n,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=me.LOADED)return;let h=i;if(s){const c=r.getDeclutterMode();if(c!=="none")if(h=s,c==="obstacle"){const d=i.getBuilder(e.getZIndex(),"Image");d.setImageStyle(r,a),d.drawPoint(t,n)}else o&&o.getText()&&(a={})}const l=h.getBuilder(e.getZIndex(),"Image");l.setImageStyle(r,a),l.drawPoint(t,n)}if(o&&o.getText()){let h=i;s&&(h=s);const l=h.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(t,n)}}function Rw(i,t,e,n,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=me.LOADED)return;let h=i;if(s){const c=r.getDeclutterMode();if(c!=="none")if(h=s,c==="obstacle"){const d=i.getBuilder(e.getZIndex(),"Image");d.setImageStyle(r,a),d.drawMultiPoint(t,n)}else o&&o.getText()&&(a={})}const l=h.getBuilder(e.getZIndex(),"Image");l.setImageStyle(r,a),l.drawMultiPoint(t,n)}if(o&&o.getText()){let h=i;s&&(h=s);const l=h.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(t,n)}}function Iw(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(r||o){const h=i.getBuilder(e.getZIndex(),"Polygon");h.setFillStrokeStyle(r,o),h.drawPolygon(t,n)}const a=e.getText();if(a&&a.getText()){const h=(s||i).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,n)}}class Tw extends zd{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Mn(),this.wrappedRenderedExtent_=Mn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const s=e.extent,r=e.viewState,o=r.center,a=r.resolution,h=r.projection,l=r.rotation,c=h.getExtent(),d=this.getLayer().getSource(),g=e.pixelRatio,p=e.viewHints,y=!(p[Oi.ANIMATING]||p[Oi.INTERACTING]),v=this.compositionContext_,x=Math.round(e.size[0]*g),b=Math.round(e.size[1]*g),S=d.getWrapX()&&h.canWrapX(),A=S?Te(c):null,O=S?Math.ceil((s[2]-c[2])/A)+1:1;let k=S?Math.floor((s[0]-c[0])/A):0;do{const H=this.getRenderTransform(o,a,l,g,x,b,k*A);t.execute(v,1,H,l,y,void 0,n)}while(++k<O)}setupCompositionContext_(){if(this.opacity_!==1){const t=Xi(this.context.canvas.width,this.context.canvas.height,M1);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Jl(this.compositionContext_),M1.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];D5(this.pixelTransform,1/n,1/n),Tl(this.inversePixelTransform,this.pixelTransform);const r=Vc(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,a=o.canvas,h=this.replayGroup_,l=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!l||l.isEmpty()))return null;const c=Math.round(t.size[0]*n),d=Math.round(t.size[1]*n);a.width!=c||a.height!=d?(a.width=c,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,c,d),this.preRender(o,t);const g=t.viewState;g.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let p=!1,y=!0;if(s.extent&&this.clipping){const v=Bs(s.extent);y=Vi(v,t.extent),p=y&&!vs(v,t.extent),p&&this.clipUnrotated(this.compositionContext_,t,v)}return y&&this.renderWorlds(h,t),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];Pi(this.pixelTransform,n);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,h=this.wrappedRenderedExtent_,l=this.getLayer(),c=[],d=n[0]*xs,g=n[1]*xs;c.push(this.getRenderTransform(s,r,o,xs,d,g,0).slice());const p=l.getSource(),y=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!vs(y,h)){let v=h[0];const x=Te(y);let b=0,S;for(;v<y[0];)--b,S=x*b,c.push(this.getRenderTransform(s,r,o,xs,d,g,S).slice()),v+=x;for(b=0,v=h[2];v>y[2];)++b,S=x*b,c.push(this.getRenderTransform(s,r,o,xs,d,g,S).slice()),v-=x}this.hitDetectionImageData_=vw(n,c,this.renderedFeatures_,l.getStyleFunction(),h,r,o)}e(ww(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,s,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,h=this.getLayer(),l={},c=function(p,y,v){const x=ke(p),b=l[x];if(b){if(b!==!0&&v<b.distanceSq){if(v===0)return l[x]=!0,r.splice(r.lastIndexOf(b),1),s(p,h,y);b.geometry=y,b.distanceSq=v}}else{if(v===0)return l[x]=!0,s(p,h,y);r.push(l[x]={feature:p,layer:h,geometry:y,distanceSq:v,callback:s})}};let d;const g=[this.replayGroup_];return this.declutterExecutorGroup&&g.push(this.declutterExecutorGroup),g.some(p=>d=p.forEachFeatureAtCoordinate(t,o,a,n,c,p===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(y=>y.value):null)),d}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const s=t.viewHints[Oi.ANIMATING],r=t.viewHints[Oi.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=t.extent,l=t.viewState,c=l.projection,d=l.resolution,g=t.pixelRatio,p=e.getRevision(),y=e.getRenderBuffer();let v=e.getRenderOrder();v===void 0&&(v=xw);const x=l.center.slice(),b=hh(h,y*d),S=b.slice(),A=[b.slice()],O=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!vs(O,t.extent)){const nt=Te(O),tt=Math.max(Te(b)/2,nt);b[0]=O[0]-tt,b[2]=O[2]+tt,id(x,c);const Q=mp(A[0],c);Q[0]<O[0]&&Q[2]<O[2]?A.push([Q[0]+nt,Q[1],Q[2]+nt,Q[3]]):Q[0]>O[0]&&Q[2]>O[2]&&A.push([Q[0]-nt,Q[1],Q[2]-nt,Q[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&vs(this.wrappedRenderedExtent_,b))return lr(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new J1(lf(d,g),b,d,g);let H;this.getLayer().getDeclutter()&&(H=new J1(lf(d,g),b,d,g));let W;for(let nt=0,tt=A.length;nt<tt;++nt)n.loadFeatures(A[nt],d,c);const F=Sw(d,g);let $=!0;const V=nt=>{let tt;const Q=nt.getStyleFunction()||e.getStyleFunction();if(Q&&(tt=Q(nt,d)),tt){const J=this.renderFeature(nt,F,tt,k,W,H);$=$&&!J}},P=Bp(b),I=n.getFeaturesInExtent(P);v&&I.sort(v);for(let nt=0,tt=I.length;nt<tt;++nt)V(I[nt]);this.renderedFeatures_=I,this.ready=$;const U=k.finish(),G=new tg(b,d,g,n.getOverlaps(),U,e.getRenderBuffer());return H&&(this.declutterExecutorGroup=new tg(b,d,g,n.getOverlaps(),H.finish(),e.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedExtent_=S,this.wrappedRenderedExtent_=b,this.renderedCenter_=x,this.renderedProjection_=c,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,s,r,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let h=0,l=n.length;h<l;++h)a=ig(s,t,n[h],e,this.boundHandleStyleImageChange_,r,o)||a;else a=ig(s,t,n,e,this.boundHandleStyleImageChange_,r,o);return a}}const Ow=Tw;class Fw extends Jv{constructor(t){super(t)}createRenderer(){return new Ow(this)}}const cu=Fw;class kw{constructor(t){this.rbush_=new U1(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[ke(e)]=n}load(t,e){const n=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const o=t[s],a=e[s],h={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=h,this.items_[ke(a)]=h}this.rbush_.load(n)}remove(t){const e=ke(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[ke(e)],s=[n.minX,n.minY,n.maxX,n.maxY];Do(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let s=0,r=t.length;s<r;s++)if(n=e(t[s]),n)return n;return n}isEmpty(){return oh(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return On(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const sg=kw;class Dw extends Vn{constructor(t){super(),this.projection=Me(t.projection),this.attributions_=rg(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,s){e.viewResolver=n,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=rg(t),this.changed()}setState(t){this.state_=t,this.changed()}}function rg(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const uf=Dw,Kn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function jw(i,t){return[[-1/0,-1/0,1/0,1/0]]}function Bw(i,t){return[i]}let Gw=!1;function qw(i,t,e,n,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(e,n,s):i,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Gw,a.onload=function(h){if(!a.status||a.status>=200&&a.status<300){const l=t.getType();let c;l=="json"||l=="text"?c=a.responseText:l=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):l=="arraybuffer"&&(c=a.response),c?r(t.readFeatures(c,{extent:e,featureProjection:s}),t.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function og(i,t){return function(e,n,s,r,o){const a=this;qw(i,t,e,n,s,function(h,l){a.addFeatures(h),r!==void 0&&r(h)},o||Fo)}}class br extends Ni{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class Uw extends uf{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Fo,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(ce(this.format_,7),this.loader_=og(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:jw;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new sg:null,this.loadedExtentsRtree_=new sg,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(t.features)?s=t.features:t.features&&(n=t.features,s=n.getArray()),!e&&n===void 0&&(n=new ms(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=ke(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new br(Kn.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[Ce(e,ue.CHANGE,this.handleFeatureChange_,this),Ce(e,Tn.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const s=e.getId();return s!==void 0&&(s.toString()in this.idIndex_?n=!1:this.idIndex_[s.toString()]=e),n&&(ce(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],h=ke(a);this.addToIndex_(h,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],h=ke(a);this.setupChangeEvents_(h,a);const l=a.getGeometry();if(l){const c=l.getExtent();e.push(c),s.push(a)}else this.nullGeometryFeatures_[h]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(Kn.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new br(Kn.ADDFEATURE,n[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Kn.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(Kn.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(cn.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),t.addEventListener(cn.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Ze);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(n);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new br(Kn.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(s){if(s.getGeometry().intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const s=e(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),oh(this.nullGeometryFeatures_)||un(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=V5(t,e);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const h=[-1/0,-1/0,1/0,1/0];return e=e||To,this.featuresRtree_.forEachInExtent(h,function(l){if(e(l)){const c=l.getGeometry(),d=a;if(a=c.closestPointXY(n,s,o,a),a<d){r=l;const g=Math.sqrt(a);h[0]=n-g,h[1]=s-g,h[2]=n+g,h[3]=s+g}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=ke(e),s=e.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const r=e.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new br(Kn.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:ke(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&oh(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let o=0,a=r.length;o<a;++o){const h=r[o];s.forEachInExtent(h,function(l){return vs(l.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new br(Kn.FEATURESLOADSTART)),this.loader_.call(this,h,e,n,l=>{--this.loadingExtentsCount_,this.dispatchEvent(new br(Kn.FEATURESLOADEND,void 0,l))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new br(Kn.FEATURESLOADERROR))}),s.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(s){if(Do(s.extent,t))return n=s,!0}),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=ke(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=ke(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(Ze),delete this.featureChangeKeys_[e];const s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new br(Kn.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){ce(this.format_,7),this.url_=t,this.setLoader(og(t,this.format_))}}const cf=Uw;class zw extends mh{constructor(t){t=t||{},super(t)}}const Ww=zw;class Yw extends zd{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,s=t.viewState,r=s.resolution,o=this.getLayer().getSource(),a=t.viewHints;let h=t.extent;if(e.extent!==void 0&&(h=$r(h,Bs(e.extent,s.projection))),!a[Oi.ANIMATING]&&!a[Oi.INTERACTING]&&!Bo(h))if(o){const l=s.projection,c=o.getImage(h,r,n,l);c&&(this.loadImage(c)?this.image_=c:c.getState()===me.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=Pi(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!lh(r,s))return null;const o=this.image_.getExtent(),a=this.getImage(),h=Te(o),l=Math.floor(a.width*((s[0]-o[0])/h));if(l<0||l>=a.width)return null;const c=Ti(o),d=Math.floor(a.height*((o[3]-s[1])/c));return d<0||d>=a.height?null:this.getImageData(a,l,d)}renderFrame(t,e){const n=this.image_,s=n.getExtent(),r=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,l=t.viewState,c=l.center,d=l.resolution,g=h*r/(d*o),p=t.extent,y=l.resolution,v=l.rotation,x=Math.round(Te(p)/y*h),b=Math.round(Ti(p)/y*h);ys(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,v,-x/2,-b/2),Tl(this.inversePixelTransform,this.pixelTransform);const S=Vc(this.pixelTransform);this.useContainer(e,S,this.getBackground(t));const A=this.context,O=A.canvas;O.width!=x||O.height!=b?(O.width=x,O.height=b):this.containerReused||A.clearRect(0,0,x,b);let k=!1,H=!0;if(a.extent){const P=Bs(a.extent,l.projection);H=Vi(P,t.extent),k=H&&!vs(P,t.extent),k&&this.clipUnrotated(A,t,P)}const W=this.getImage(),F=ys(this.tempTransform,x/2,b/2,g,g,0,o*(s[0]-c[0])/r,o*(c[1]-s[3])/r);this.renderedResolution=r*h/o;const $=W.width*F[0],V=W.height*F[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,t),H&&$>=.5&&V>=.5){const P=F[4],I=F[5],U=a.opacity;let G;U!==1&&(G=A.globalAlpha,A.globalAlpha=U),A.drawImage(W,0,0,+W.width,+W.height,P,I,$,V),U!==1&&(A.globalAlpha=G)}return this.postRender(A,t),k&&A.restore(),A.imageSmoothingEnabled=!0,S!==O.style.transform&&(O.style.transform=S),this.container}}const Vw=Yw;class Xw extends Ww{constructor(t){super(t)}createRenderer(){return new Vw(this)}getData(t){return super.getData(t)}}const ag=Xw;class Hw{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?Me(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Me(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return pe()}readFeature(t,e){return pe()}readFeatures(t,e){return pe()}readGeometry(t,e){return pe()}readProjection(t){return pe()}writeFeature(t,e){return pe()}writeFeatures(t,e){return pe()}writeGeometry(t,e){return pe()}}const Zw=Hw;function df(i,t,e){const n=e?Me(e.featureProjection):null,s=e?Me(e.dataProjection):null;let r;if(n&&s&&!Fn(n,s)?r=(t?i.clone():i).transform(t?n:s,t?s:n):r=i,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(h){for(let l=0,c=h.length;l<c;++l)h[l]=Math.round(h[l]*o)/o;return h};r===i&&(r=i.clone()),r.applyTransform(a)}return r}function ff(i,t){const e=t?Me(t.featureProjection):null,n=t?Me(t.dataProjection):null;return e&&n&&!Fn(e,n)?ld(i,n,e):i}class du extends fr{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let s=this.getLayout();const r=t,o=[],a=[];for(let h=0,l=r.length;h<l;++h){const c=r[h];h===0&&(s=c.getLayout()),un(o,c.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new du(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<Qr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_d(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,s))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,Tv(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return gh(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new mr(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,a=e.length;o<a;++o){const h=e[o],l=new mr(t.slice(r,h),n);s.push(l),r=h}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const h=s[o],l=k1(e,n,h,r,.5);un(t,l),n=h}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=k_(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new du(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return z_(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=wd(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const fu=du;class pf extends fr{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?un(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new pf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<Qr(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,h=r.length;a<h;a+=o){const l=js(t,e,r[a],r[a+1]);if(l<s){s=l;for(let c=0;c<o;++c)n[c]=r[a+c];n.length=o}}return s}getCoordinates(){return pr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new oo(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=n){const a=new oo(t.slice(r,r+n),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let s=0,r=e.length;s<r;s+=n){const o=e[s],a=e[s+1];if(Xc(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const gf=pf;function Kw(i,t,e,n){const s=[];let r=Mn();for(let o=0,a=e.length;o<a;++o){const h=e[o];r=fp(i,t,h[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=h[h.length-1]}return s}class pu extends fr{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let h=0,l=r.length;h<l;++h){const c=r[h];h===0&&(s=c.getLayout());const d=o.length,g=c.getEnds();for(let p=0,y=g.length;p<y;++p)g[p]+=d;un(o,c.getFlatCoordinates()),a.push(g)}e=s,t=o,n=a}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;un(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const n=new pu(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,s){return s<Qr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(T_(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),O_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return q_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return B_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),n1(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,xd(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Kw(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=U_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new gf(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;V_(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=n1(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=j_(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new pu(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const n=this.endss_[t].slice(),s=n[n.length-1];if(e!==0)for(let r=0,o=n.length;r<o;++r)n[r]-=e;return new Zn(this.flatCoordinates.slice(e,s),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const h=n[o].slice(),l=h[h.length-1];if(r!==0)for(let d=0,g=h.length;d<g;++d)h[d]-=r;const c=new Zn(e.slice(r,l),t,h);s.push(c),r=l}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return W_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=F_(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const gu=pu;class mu extends fr{constructor(t,e,n){super(),n!==void 0&&e===void 0?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new mu(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=t-r[0],a=e-r[1],h=o*o+a*a;if(h<s){if(h===0)for(let l=0;l<this.stride;++l)n[l]=r[l];else{const l=this.getRadius()/Math.sqrt(h);n[0]=r[0]+l*o,n[1]=r[1]+l*a;for(let c=2;c<this.stride;++c)n[c]=r[c]}return n.length=this.stride,h}return s}containsXY(t,e){const n=this.flatCoordinates,s=t-n[0],r=e-n[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return On(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(Vi(t,e)){const n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||t[1]<=n[1]&&t[3]>=n[1]?!0:Zc(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],s=t.slice();s[e]=s[0]+n;for(let r=1;r<e;++r)s[e+r]=t[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=Xp(s,0,t,this.stride);s[r++]=s[0]+e;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),s=this.getStride();this.setCenter(pd(n,0,n.length,s,t,e,n)),this.changed()}}mu.prototype.transform;const Jw=mu;class _u extends gd{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ze),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Ce(this.geometries_[t],ue.CHANGE,this.changed,this))}clone(){const t=new _u(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<Qr(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,n,s);return s}containsXY(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(t,e))return!0;return!1}computeExtent(t){ko(t);const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)pp(t,e[n].getExtent());return t}getGeometries(){return hg(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],h=a.getSimplifiedGeometry(t);e.push(h),h!==a&&(s=!0)}if(s){const r=new _u(null);return r.setGeometriesArray(e),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Ds(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(hg(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function hg(i){const t=[];for(let e=0,n=i.length;e<n;++e)t.push(i[e].clone());return t}const Qw=_u;class $w{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return ce(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return ce(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){ce(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const tb=$w;function lg(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function yu(i,t,e){return i+"/"+t+"/"+e}function ug(i){return yu(i[0],i[1],i[2])}function eb(i){return i.split("/").map(Number)}function cg(i){return(i[1]<<i[0])+i[2]}function ib(i,t){const e=i[0],n=i[1],s=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const r=t.getFullTileRange(e);return r?r.containsXY(n,s):!0}class nb extends tb{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),e=eb(t)[0];this.forEach(n=>{n.tileCoord[0]!==e&&(this.remove(ug(n.tileCoord)),n.release())})}}const dg=nb,sa=[0,0,0],xr=5;class sb{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,ce(S5(this.resolutions_,function(s,r){return r-s},!0),17);let e;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!e)e=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,ce(this.origins_.length==this.resolutions_.length,20));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=to(n)),ce(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,ce(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Qc,ce(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new O1(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,h=s.maxY;a<=h;++a)n([e,r,a])}forEachTileCoordParentTileRange(t,e,n,s){let r,o,a,h=null,l=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):h=this.getTileCoordExtent(t,s);l>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=$o(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(h,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return $o(r,r+1,o,o+1,e)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(e===s)return $o(r,o,r,o,n);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,e-s),l=Math.floor(r*h),c=Math.floor(o*h);if(e<s)return $o(l,l,c,c,n);const d=Math.floor(h*(r+1))-1,g=Math.floor(h*(o+1))-1;return $o(l,d,c,g,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,sa);const s=sa[1],r=sa[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,sa);const o=sa[1],a=sa[2];return $o(s,o,r,a,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=dn(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*n,e[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=dn(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,a=n[1]-(t[2]+1)*r[1]*s,h=o+r[0]*s,l=a+r[1]*s;return On(o,a,h,l,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),h=this.getOrigin(o),l=dn(this.getTileSize(o),this.tmpSize_);let c=a*(t-h[0])/n/l[0],d=a*(h[1]-e)/n/l[1];return s?(c=cr(c,xr)-1,d=cr(d,xr)-1):(c=Go(c,xr),d=Go(d,xr)),lg(o,c,d,r)}getTileCoordForXYAndZ_(t,e,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),h=dn(this.getTileSize(n),this.tmpSize_);let l=(t-o[0])/a/h[0],c=(o[1]-e)/a/h[1];return s?(l=cr(l,xr)-1,c=cr(c,xr)-1):(l=Go(l,xr),c=Go(c,xr)),lg(n,l,c,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=Nl(this.resolutions_,t,e||0);return ai(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return $p(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let s=this.minZoom;s<e;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}const fg=sb,mf={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function pg(i){let t=i.getDefaultTileGrid();return t||(t=hb(i),i.setDefaultTileGrid(t)),t}function rb(i,t,e){const n=t[0],s=i.getTileCoordCenter(t),r=gg(e);if(!lh(r,s)){const o=Te(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return t}function ob(i,t,e,n){n=n!==void 0?n:"top-left";const s=ab(i,t,e);return new fg({extent:i,origin:U5(i,n),resolutions:s,tileSize:e})}function ab(i,t,e,n){t=t!==void 0?t:i_,e=dn(e!==void 0?e:Qc);const s=Ti(i),r=Te(i);n=n>0?n:Math.max(r/e[0],s/e[1]);const o=t+1,a=new Array(o);for(let h=0;h<o;++h)a[h]=n/Math.pow(2,h);return a}function hb(i,t,e,n){const s=gg(i);return ob(s,t,e,n)}function gg(i){i=Me(i);let t=i.getExtent();if(!t){const e=180*dh.degrees/i.getMetersPerUnit();t=On(-e,-e,e,e)}return t}class lb extends uf{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&dn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new dg(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,h,l;for(let c=n.minX;c<=n.maxX;++c)for(let d=n.minY;d<=n.maxY;++d)h=yu(e,c,d),l=!1,r.containsKey(h)&&(a=r.get(h),l=a.getState()===Qt.LOADED,l&&(l=s(a)!==!1)),l||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,s,r){return pe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:pg(t)}getTileCacheForProjection(t){const e=this.getProjection();return ce(e===null||Fn(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=dn(s.getTileSize(t),this.tmpSize);return r==1?o:b1(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=rb(n,t,e)),ib(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,s){}}class ub extends Ni{constructor(t,e){super(t),this.tile=e}}const cb=lb;function db(i,t){const e=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,h){if(o)return i.replace(e,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const l=o[0],c=t.getFullTileRange(l);return ce(c,55),(c.getHeight()-o[2]-1).toString()})}}function fb(i,t){const e=i.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=db(i[s],t);return _f(n)}function _f(i){return i.length===1?i[0]:function(t,e,n){if(!t)return;const s=cg(t),r=io(s,i.length);return i[r](t,e,n)}}function mg(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),s=e[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(i.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=n;s++)t.push(i.replace(e[0],s.toString()));return t}return t.push(i),t}class yf extends cb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===yf.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=ke(e),s=e.getState();let r;s==Qt.LOADING?(this.tileLoadingKeys_[n]=!0,r=mf.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==Qt.ERROR?mf.TILELOADERROR:s==Qt.LOADED?mf.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new ub(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=mg(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(fb(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const s=yu(t,e,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const pb=yf;class gb extends E1{constructor(t,e,n,s,r,o,a){let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const c=l?$r(n,l):n,d=Ds(c),g=Ch(t,e,d,s),p=L1,y=new P1(t,e,c,h,g*p,s),v=y.calculateSourceExtent(),x=Bo(v)?null:o(v,g,r),b=x?me.IDLE:me.EMPTY,S=x?x.getPixelRatio():1;super(n,s,S,b),this.targetProj_=e,this.maxSourceExtent_=h,this.triangulation_=y,this.targetResolution_=s,this.targetExtent_=n,this.sourceImage_=x,this.sourcePixelRatio_=S,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==me.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==me.LOADED){const e=Te(this.targetExtent_)/this.targetResolution_,n=Ti(this.targetExtent_)/this.targetResolution_;this.canvas_=I1(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==me.IDLE){this.state=me.LOADING,this.changed();const t=this.sourceImage_.getState();t==me.LOADED||t==me.ERROR?this.reproject_():(this.sourceListenerKey_=Ce(this.sourceImage_,ue.CHANGE,function(e){const n=this.sourceImage_.getState();(n==me.LOADED||n==me.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Ze(this.sourceListenerKey_),this.sourceListenerKey_=null}}const mb=gb,vf={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class _b extends Ni{constructor(t,e){super(t),this.image=e}}class yb extends uf{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=Nl(e,t,0);t=e[n]}return t}getImage(t,e,n,s){const r=this.getProjection();if(!r||!s||Fn(r,s))return r&&(s=r),this.getImageInternal(t,e,n,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Fn(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&Do(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new mb(r,s,t,e,n,(o,a,h)=>this.getImageInternal(o,a,h,r),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,s){return pe()}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case me.LOADING:this.loading=!0,n=vf.IMAGELOADSTART;break;case me.LOADED:this.loading=!1,n=vf.IMAGELOADEND;break;case me.ERROR:this.loading=!1,n=vf.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new _b(n,e))}}function vb(i,t){i.getImage().src=t}const wb=yb;class bb extends pb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:xb,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:A1,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Fn(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Fn(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Fn(e,t)))return this.tileGrid;const n=ke(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=pg(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Fn(e,t))return this.tileCache;const n=ke(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new dg(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,s,r,o){const a=[t,e,n],h=this.getTileCoordForTileUrlFunction(a,r),l=h?this.tileUrlFunction(h,s,r):void 0,c=new this.tileClass(a,l!==void 0?Qt.IDLE:Qt.EMPTY,l!==void 0?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(ue.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,n,s,r){const o=this.getProjection();if(!o||!r||Fn(o,r))return this.getTileInternal(t,e,n,s,o||r);const a=this.getTileCacheForProjection(r),h=[t,e,n];let l;const c=ug(h);a.containsKey(c)&&(l=a.get(c));const d=this.getKey();if(l&&l.key==d)return l;const g=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),y=this.getTileCoordForTileUrlFunction(h,r),v=new Xd(o,g,r,p,h,y,this.getTilePixelRatio(s),this.getGutter(),(x,b,S,A)=>this.getTileInternal(x,b,S,A,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return v.key=d,l?(v.interimTile=l,v.refreshInterimChain(),a.replace(c,v)):a.set(c,v),v}getTileInternal(t,e,n,s,r){let o=null;const a=yu(t,e,n),h=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,n,s,r,h),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=h){const l=o;o=this.createTile_(t,e,n,s,r,h),l.getState()==Qt.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=Me(t);if(n){const s=ke(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function xb(i,t){i.getImage().src=t}const _g=bb,Sr="1.3.0";function ra(i,t){const e=[];Object.keys(t).forEach(function(s){t[s]!==null&&t[s]!==void 0&&e.push(s+"="+encodeURIComponent(t[s]))});const n=e.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}const Mr=4,yg=[101,101];class Sb extends wb{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.context_=Xi(1,1),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:vb,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getFeatureInfoUrl(t,e,n,s){if(this.url_===void 0)return;const r=Me(n),o=this.getProjection();o&&o!==r&&(e=Ch(o,r,t,e),t=hd(t,r,o));const a=jo(t,e,0,yg),h={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(h,this.params_,s);const l=Go((t[0]-a[0])/e,Mr),c=Go((a[3]-t[1])/e,Mr);return h[this.v13_?"I":"X"]=l,h[this.v13_?"J":"Y"]=c,this.getRequestUrl_(a,yg,1,o||r,h)}getLegendUrl(t,e){if(this.url_===void 0)return;const n={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const s=this.params_.LAYERS;if(!(!Array.isArray(s)||s.length===1))return;n.LAYER=s}if(t!==void 0){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;n.SCALE=t*s/r}return Object.assign(n,e),ra(this.url_,n)}getParams(){return this.params_}getImageInternal(t,e,n,s){if(this.url_===void 0)return null;e=this.findNearestResolution(e),n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const r=e/n,o=Ds(t),a=cr(Te(t)/r,Mr),h=cr(Ti(t)/r,Mr),l=jo(o,r,0,[a,h]),c=cr(this.ratio_*Te(t)/r,Mr),d=cr(this.ratio_*Ti(t)/r,Mr),g=jo(o,r,0,[c,d]),p=this.image_;if(p&&this.renderedRevision_==this.getRevision()&&p.getResolution()==e&&p.getPixelRatio()==n&&vs(p.getExtent(),l))return p;const y={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(y,this.params_),this.imageSize_[0]=_p(Te(g)/r,Mr),this.imageSize_[1]=_p(Ti(g)/r,Mr);const v=this.getRequestUrl_(g,this.imageSize_,n,s,y);return this.image_=new bv(g,e,n,v,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ue.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,n,s,r){if(ce(this.url_!==void 0,9),r[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(r.STYLES=""),n!=1)switch(this.serverType_){case"geoserver":const h=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+h:r.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":r.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":r.DPI=90*n;break;default:ce(!1,8);break}r.WIDTH=e[0],r.HEIGHT=e[1];const o=s.getAxisOrientation();let a;return this.v13_&&o.substr(0,2)=="ne"?a=[t[1],t[0],t[3],t[2]]:a=t,r.BBOX=a.join(","),ra(this.url_,r)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_.VERSION||Sr;this.v13_=Ap(t,"1.3")>=0}}const vg=Sb;function Mb(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var po=1,go=2,oa=3,Cb=4,wf=5,wg=6378137,Eb=6356752314e-3,bg=.0066943799901413165,Fh=484813681109536e-20,Ct=Math.PI/2,Ab=.16666666666666666,Lb=.04722222222222222,Nb=.022156084656084655,kt=1e-10,qi=.017453292519943295,Ss=57.29577951308232,Ge=Math.PI/4,kh=Math.PI*2,gi=3.14159265359,fn={};fn.greenwich=0,fn.lisbon=-9.131906111111,fn.paris=2.337229166667,fn.bogota=-74.080916666667,fn.madrid=-3.687938888889,fn.rome=12.452333333333,fn.bern=7.439583333333,fn.jakarta=106.807719444444,fn.ferro=-17.666666666667,fn.brussels=4.367975,fn.stockholm=18.058277777778,fn.athens=23.7163375,fn.oslo=10.722916666667;const Pb={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var xg=/[\s_\-\/\(\)]/g;function Cr(i,t){if(i[t])return i[t];for(var e=Object.keys(i),n=t.toLowerCase().replace(xg,""),s=-1,r,o;++s<e.length;)if(r=e[s],o=r.toLowerCase().replace(xg,""),o===n)return i[r]}function bf(i){var t={},e=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,h){var l=h.split("=");return l.push(!0),a[l[0].toLowerCase()]=l[1],a},{}),n,s,r,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*qi},lat_1:function(a){t.lat1=a*qi},lat_2:function(a){t.lat2=a*qi},lat_ts:function(a){t.lat_ts=a*qi},lon_0:function(a){t.long0=a*qi},lon_1:function(a){t.long1=a*qi},lon_2:function(a){t.long2=a*qi},alpha:function(a){t.alpha=parseFloat(a)*qi},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*qi},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(h){return parseFloat(h)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var h=Cr(Pb,a);h&&(t.to_meter=h.to_meter)},from_greenwich:function(a){t.from_greenwich=a*qi},pm:function(a){var h=Cr(fn,a);t.from_greenwich=(h||parseFloat(a))*qi},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var h="ewnsud";a.length===3&&h.indexOf(a.substr(0,1))!==-1&&h.indexOf(a.substr(1,1))!==-1&&h.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(n in e)s=e[n],n in o?(r=o[n],typeof r=="function"?r(s):t[r]=s):t[n]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Dh=1,Sg=2,Mg=3,vu=4,Cg=5,xf=-1,Rb=/\s/,Ib=/[A-Za-z]/,Tb=/[A-Za-z84_]/,wu=/[,\]]/,Eg=/[\d\.E\-\+]/;function Vs(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Dh}Vs.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==vu)for(;Rb.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Dh:return this.neutral(i);case Sg:return this.keyword(i);case vu:return this.quoted(i);case Cg:return this.afterquote(i);case Mg:return this.number(i);case xf:return}},Vs.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=vu;return}if(wu.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)},Vs.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Dh;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Dh,this.currentObject=this.stack.pop(),this.currentObject||(this.state=xf);return}},Vs.prototype.number=function(i){if(Eg.test(i)){this.word+=i;return}if(wu.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)},Vs.prototype.quoted=function(i){if(i==='"'){this.state=Cg;return}this.word+=i},Vs.prototype.keyword=function(i){if(Tb.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Dh;return}if(wu.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)},Vs.prototype.neutral=function(i){if(Ib.test(i)){this.word=i,this.state=Sg;return}if(i==='"'){this.word="",this.state=vu;return}if(Eg.test(i)){this.word=i,this.state=Mg;return}if(wu.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)},Vs.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===xf)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ob(i){var t=new Vs(i);return t.output()}function Ag(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var n=t?{}:i,s=e.reduce(function(r,o){return aa(o,r),r},n);t&&(i[t]=s)}function aa(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},aa(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var n;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&aa(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&aa(i[3],t[e]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],Ag(t,e,i);return;default:for(n=-1;++n<i.length;)if(!Array.isArray(i[n]))return aa(i,t[e]);return Ag(t,e,i)}}var Fb=.017453292519943295;function kb(i,t){var e=t[0],n=t[1];!(e in i)&&n in i&&(i[e]=i[n],t.length===3&&(i[e]=t[2](i[e])))}function Ms(i){return i*Fb}function Db(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var t="",e=0,n=i.AXIS.length;e<n;++e){var s=[i.AXIS[e][0].toLowerCase(),i.AXIS[e][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(i.axis=t)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var r=i.GEOGCS;i.type==="GEOGCS"&&(r=i),r&&(r.DATUM?i.datumCode=r.DATUM.name.toLowerCase():i.datumCode=r.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(i.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=r.DATUM.SPHEROID.a,i.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(i.datum_params=r.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(l){var c=i.to_meter||1;return l*c}var a=function(l){return kb(i,l)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ms],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ms],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ms],["lat0","latitude_of_origin",Ms],["lat0","standard_parallel_1",Ms],["lat1","standard_parallel_1",Ms],["lat2","standard_parallel_2",Ms],["azimuth","Azimuth"],["alpha","azimuth",Ms],["srsCode","name"]];h.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=Ms(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=Ms(i.lat0>0?90:-90))}function Lg(i){var t=Ob(i),e=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",e]);var s={};return aa(t,s),Db(s),s}function sn(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?sn[i]=bf(arguments[1]):sn[i]=Lg(arguments[1]):sn[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(n){Array.isArray(n)?sn.apply(t,n):sn(n)});if(typeof i=="string"){if(i in sn)return sn[i]}else"EPSG"in i?sn["EPSG:"+i.EPSG]=i:"ESRI"in i?sn["ESRI:"+i.ESRI]=i:"IAU2000"in i?sn["IAU2000:"+i.IAU2000]=i:console.log(i);return}}Mb(sn);function jb(i){return typeof i=="string"}function Bb(i){return i in sn}var Gb=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function qb(i){return Gb.some(function(t){return i.indexOf(t)>-1})}var Ub=["3857","900913","3785","102113"];function zb(i){var t=Cr(i,"authority");if(t){var e=Cr(t,"epsg");return e&&Ub.indexOf(e)>-1}}function Wb(i){var t=Cr(i,"extension");if(t)return Cr(t,"proj4")}function Yb(i){return i[0]==="+"}function Vb(i){if(jb(i)){if(Bb(i))return sn[i];if(qb(i)){var t=Lg(i);if(zb(t))return sn["EPSG:3857"];var e=Wb(t);return e?bf(e):t}if(Yb(i))return bf(i)}else return i}function Ng(i,t){i=i||{};var e,n;if(!t)return i;for(n in t)e=t[n],e!==void 0&&(i[n]=e);return i}function Cs(i,t,e){var n=i*t;return e/Math.sqrt(1-n*n)}function jh(i){return i<0?-1:1}function Gt(i){return Math.abs(i)<=gi?i:i-jh(i)*kh}function Jn(i,t,e){var n=i*e,s=.5*i;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(Ct-t))/n}function Bh(i,t){for(var e=.5*i,n,s,r=Ct-2*Math.atan(t),o=0;o<=15;o++)if(n=i*Math.sin(r),s=Ct-2*Math.atan(t*Math.pow((1-n)/(1+n),e))-r,r+=s,Math.abs(s)<=1e-10)return r;return-9999}function Xb(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Cs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Hb(i){var t=i.x,e=i.y;if(e*Ss>90&&e*Ss<-90&&t*Ss>180&&t*Ss<-180)return null;var n,s;if(Math.abs(Math.abs(e)-Ct)<=kt)return null;if(this.sphere)n=this.x0+this.a*this.k0*Gt(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ge+.5*e));else{var r=Math.sin(e),o=Jn(this.e,e,r);n=this.x0+this.a*this.k0*Gt(t-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return i.x=n,i.y=s,i}function Zb(i){var t=i.x-this.x0,e=i.y-this.y0,n,s;if(this.sphere)s=Ct-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var r=Math.exp(-e/(this.a*this.k0));if(s=Bh(this.e,r),s===-9999)return null}return n=Gt(this.long0+t/(this.a*this.k0)),i.x=n,i.y=s,i}var Kb=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Jb={init:Xb,forward:Hb,inverse:Zb,names:Kb};function Qb(){}function Pg(i){return i}var $b=["longlat","identity"],tx=[Jb,{init:Qb,forward:Pg,inverse:Pg,names:$b}],bu={},xu=[];function Rg(i,t){var e=xu.length;return i.names?(xu[e]=i,i.names.forEach(function(n){bu[n.toLowerCase()]=e}),this):(console.log(t),!0)}function ex(i){if(!i)return!1;var t=i.toLowerCase();if(typeof bu[t]<"u"&&xu[bu[t]])return xu[bu[t]]}function ix(){tx.forEach(Rg)}const nx={start:ix,add:Rg,get:ex};var de={};de.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},de.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},de.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},de.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},de.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},de.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},de.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},de.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},de.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},de.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},de.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},de.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},de.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},de.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},de.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},de.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},de.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},de.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},de.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},de.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},de.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},de.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},de.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},de.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},de.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},de.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},de.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},de.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},de.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},de.hough={a:6378270,rf:297,ellipseName:"Hough"},de.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},de.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},de.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},de.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},de.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},de.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},de.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},de.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},de.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},de.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},de.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},de.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var sx=de.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};de.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function rx(i,t,e,n){var s=i*i,r=t*t,o=(s-r)/s,a=0;n?(i*=1-o*(Ab+o*(Lb+o*Nb)),s=i*i,o=0):a=Math.sqrt(o);var h=(s-r)/r;return{es:o,e:a,ep2:h}}function ox(i,t,e,n,s){if(!i){var r=Cr(de,n);r||(r=sx),i=r.a,t=r.b,e=r.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<kt)&&(s=!0,t=i),{a:i,b:t,rf:e,sphere:s}}var Fi={};Fi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Fi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Fi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Fi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Fi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Fi.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Fi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Fi.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Fi.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Fi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Fi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Fi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Fi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Fi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Fi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Fi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Fi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function ax(i,t,e,n,s,r,o){var a={};return i===void 0||i==="none"?a.datum_type=wf:a.datum_type=Cb,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=po),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=go,a.datum_params[3]*=Fh,a.datum_params[4]*=Fh,a.datum_params[5]*=Fh,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=oa,a.grids=o),a.a=e,a.b=n,a.es=s,a.ep2=r,a}var Ig={};function hx(i,t){var e=new DataView(t),n=cx(e),s=dx(e,n);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var r=fx(e,s,n),o={header:s,subgrids:r};return Ig[i]=o,o}function lx(i){if(i===void 0)return null;var t=i.split(",");return t.map(ux)}function ux(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:Ig[i]||null,isNull:!1}}function ha(i){return i/3600*Math.PI/180}function cx(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function dx(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:Sf(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function Sf(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function fx(i,t,e){for(var n=176,s=[],r=0;r<t.nSubgrids;r++){var o=gx(i,n,e),a=mx(i,n,o,e),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[ha(o.lowerLongitude),ha(o.lowerLatitude)],del:[ha(o.longitudeInterval),ha(o.latitudeInterval)],lim:[h,l],count:o.gridNodeCount,cvs:px(a)})}return s}function px(i){return i.map(function(t){return[ha(t.longitudeShift),ha(t.latitudeShift)]})}function gx(i,t,e){return{name:Sf(i,t+8,t+16).trim(),parent:Sf(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function mx(i,t,e,n){for(var s=t+176,r=16,o=[],a=0;a<e.gridNodeCount;a++){var h={latitudeShift:i.getFloat32(s+a*r,n),longitudeShift:i.getFloat32(s+a*r+4,n),latitudeAccuracy:i.getFloat32(s+a*r+8,n),longitudeAccuracy:i.getFloat32(s+a*r+12,n)};o.push(h)}return o}function Es(i,t){if(!(this instanceof Es))return new Es(i);t=t||function(l){if(l)throw l};var e=Vb(i);if(typeof e!="object"){t(i);return}var n=Es.projections.get(e.projName);if(!n){t(i);return}if(e.datumCode&&e.datumCode!=="none"){var s=Cr(Fi,e.datumCode);s&&(e.datum_params=e.datum_params||(s.towgs84?s.towgs84.split(","):null),e.ellps=s.ellipse,e.datumName=s.datumName?s.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var r=ox(e.a,e.b,e.rf,e.ellps,e.sphere),o=rx(r.a,r.b,r.rf,e.R_A),a=lx(e.nadgrids),h=e.datum||ax(e.datumCode,e.datum_params,r.a,r.b,o.es,o.ep2,a);Ng(this,e),Ng(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),t(null,this)}Es.projections=nx,Es.projections.start();function _x(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===po?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===go?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function Tg(i,t,e){var n=i.x,s=i.y,r=i.z?i.z:0,o,a,h,l;if(s<-Ct&&s>-1.001*Ct)s=-Ct;else if(s>Ct&&s<1.001*Ct)s=Ct;else{if(s<-Ct)return{x:-1/0,y:-1/0,z:i.z};if(s>Ct)return{x:1/0,y:1/0,z:i.z}}return n>Math.PI&&(n-=2*Math.PI),a=Math.sin(s),l=Math.cos(s),h=a*a,o=e/Math.sqrt(1-t*h),{x:(o+r)*l*Math.cos(n),y:(o+r)*l*Math.sin(n),z:(o*(1-t)+r)*a}}function Og(i,t,e,n){var s=1e-12,r=s*s,o=30,a,h,l,c,d,g,p,y,v,x,b,S,A,O=i.x,k=i.y,H=i.z?i.z:0,W,F,$;if(a=Math.sqrt(O*O+k*k),h=Math.sqrt(O*O+k*k+H*H),a/e<s){if(W=0,h/e<s)return F=Ct,$=-n,{x:i.x,y:i.y,z:i.z}}else W=Math.atan2(k,O);l=H/h,c=a/h,d=1/Math.sqrt(1-t*(2-t)*c*c),y=c*(1-t)*d,v=l*d,A=0;do A++,p=e/Math.sqrt(1-t*v*v),$=a*y+H*v-p*(1-t*v*v),g=t*p/(p+$),d=1/Math.sqrt(1-g*(2-g)*c*c),x=c*(1-g)*d,b=l*d,S=b*y-x*v,y=x,v=b;while(S*S>r&&A<o);return F=Math.atan(b/Math.abs(x)),{x:W,y:F,z:$}}function yx(i,t,e){if(t===po)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===go){var n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6];return{x:l*(i.x-h*i.y+a*i.z)+n,y:l*(h*i.x+i.y-o*i.z)+s,z:l*(-a*i.x+o*i.y+i.z)+r}}}function vx(i,t,e){if(t===po)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===go){var n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=(i.x-n)/l,d=(i.y-s)/l,g=(i.z-r)/l;return{x:c+h*d-a*g,y:-h*c+d+o*g,z:a*c-o*d+g}}}function Su(i){return i===po||i===go}function wx(i,t,e){if(_x(i,t)||i.datum_type===wf||t.datum_type===wf)return e;var n=i.a,s=i.es;if(i.datum_type===oa){var r=Fg(i,!1,e);if(r!==0)return;n=wg,s=bg}var o=t.a,a=t.b,h=t.es;if(t.datum_type===oa&&(o=wg,a=Eb,h=bg),s===h&&n===o&&!Su(i.datum_type)&&!Su(t.datum_type))return e;if(e=Tg(e,s,n),Su(i.datum_type)&&(e=yx(e,i.datum_type,i.datum_params)),Su(t.datum_type)&&(e=vx(e,t.datum_type,t.datum_params)),e=Og(e,h,o,a),t.datum_type===oa){var l=Fg(t,!0,e);if(l!==0)return}return e}function Fg(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-e.x,y:e.y},s={x:Number.NaN,y:Number.NaN},r=[],o=0;o<i.grids.length;o++){var a=i.grids[o];if(r.push(a.name),a.isNull){s=n;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}var h=a.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,c=h.ll[0]-l,d=h.ll[1]-l,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,p=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(d>n.y||c>n.x||p<n.y||g<n.x)&&(s=bx(n,t,h),!isNaN(s.x)))break}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Ss+" "+n.y*Ss+" tried: '"+r+"'"),-1):(e.x=-s.x,e.y=s.y,0)}function bx(i,t,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return n;var s={x:i.x,y:i.y};s.x-=e.ll[0],s.y-=e.ll[1],s.x=Gt(s.x-Math.PI)+Math.PI;var r=kg(s,e);if(t){if(isNaN(r.x))return n;r.x=s.x-r.x,r.y=s.y-r.y;var o=9,a=1e-12,h,l;do{if(l=kg(r,e),isNaN(l.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:s.x-(l.x+r.x),y:s.y-(l.y+r.y)},r.x+=h.x,r.y+=h.y}while(o--&&Math.abs(h.x)>a&&Math.abs(h.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Gt(r.x+e.ll[0]),n.y=r.y+e.ll[1]}else isNaN(r.x)||(n.x=i.x+r.x,n.y=i.y+r.y);return n}function kg(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},n={x:Math.floor(e.x),y:Math.floor(e.y)},s={x:e.x-1*n.x,y:e.y-1*n.y},r={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return r;o=n.y*t.lim[0]+n.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var h={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var l={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var c={x:t.cvs[o][0],y:t.cvs[o][1]},d=s.x*s.y,g=s.x*(1-s.y),p=(1-s.x)*(1-s.y),y=(1-s.x)*s.y;return r.x=p*a.x+g*h.x+y*c.x+d*l.x,r.y=p*a.y+g*h.y+y*c.y+d*l.y,r}function Dg(i,t,e){var n=e.x,s=e.y,r=e.z||0,o,a,h,l={};for(h=0;h<3;h++)if(!(t&&h===2&&e.z===void 0))switch(h===0?(o=n,"ew".indexOf(i.axis[h])!==-1?a="x":a="y"):h===1?(o=s,"ns".indexOf(i.axis[h])!==-1?a="y":a="x"):(o=r,a="z"),i.axis[h]){case"e":l[a]=o;break;case"w":l[a]=-o;break;case"n":l[a]=o;break;case"s":l[a]=-o;break;case"u":e[a]!==void 0&&(l.z=o);break;case"d":e[a]!==void 0&&(l.z=-o);break;default:return null}return l}function jg(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function xx(i){Bg(i.x),Bg(i.y)}function Bg(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function Sx(i,t){return(i.datum.datum_type===po||i.datum.datum_type===go||i.datum.datum_type===oa)&&t.datumCode!=="WGS84"||(t.datum.datum_type===po||t.datum.datum_type===go||t.datum.datum_type===oa)&&i.datumCode!=="WGS84"}function Mu(i,t,e,n){var s;Array.isArray(e)?e=jg(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var r=e.z!==void 0;if(xx(e),i.datum&&t.datum&&Sx(i,t)&&(s=new Es("WGS84"),e=Mu(i,s,e,n),i=s),n&&i.axis!=="enu"&&(e=Dg(i,!1,e)),i.projName==="longlat")e={x:e.x*qi,y:e.y*qi,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=wx(i.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*Ss,y:e.y*Ss,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),n&&t.axis!=="enu"?Dg(t,!0,e):(r||delete e.z,e)}var Gg=Es("WGS84");function Mf(i,t,e,n){var s,r,o;return Array.isArray(e)?(s=Mu(i,t,e,n)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(e.splice(3)):[s.x,s.y,e[2]].concat(e.splice(3)):[s.x,s.y].concat(e.splice(2)):[s.x,s.y]):(r=Mu(i,t,e,n),o=Object.keys(e),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;r[a]=e[a]}),r)}function qg(i){return i instanceof Es?i:i.oProj?i.oProj:Es(i)}function pn(i,t,e){i=qg(i);var n=!1,s;return typeof t>"u"?(t=i,i=Gg,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=i,i=Gg,n=!0),t=qg(t),e?Mf(i,t,e):(s={forward:function(r,o){return Mf(i,t,r,o)},inverse:function(r,o){return Mf(t,i,r,o)}},n&&(s.oProj=t),s)}var Ug=6,zg="AJSAJS",Wg="AFAFAF",la=65,gn=73,kn=79,Gh=86,qh=90;const Mx={forward:Yg,inverse:Cx,toPoint:Vg};function Yg(i,t){return t=t||5,Lx(Ex({lat:i[1],lon:i[0]}),t)}function Cx(i){var t=Ef(Zg(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Vg(i){var t=Ef(Zg(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Cf(i){return i*(Math.PI/180)}function Xg(i){return 180*(i/Math.PI)}function Ex(i){var t=i.lat,e=i.lon,n=6378137,s=.00669438,r=.9996,o,a,h,l,c,d,g,p=Cf(t),y=Cf(e),v,x;x=Math.floor((e+180)/6)+1,e===180&&(x=60),t>=56&&t<64&&e>=3&&e<12&&(x=32),t>=72&&t<84&&(e>=0&&e<9?x=31:e>=9&&e<21?x=33:e>=21&&e<33?x=35:e>=33&&e<42&&(x=37)),o=(x-1)*6-180+3,v=Cf(o),a=s/(1-s),h=n/Math.sqrt(1-s*Math.sin(p)*Math.sin(p)),l=Math.tan(p)*Math.tan(p),c=a*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(y-v),g=n*((1-s/4-3*s*s/64-5*s*s*s/256)*p-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*p)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*p)-35*s*s*s/3072*Math.sin(6*p));var b=r*h*(d+(1-l+c)*d*d*d/6+(5-18*l+l*l+72*c-58*a)*d*d*d*d*d/120)+5e5,S=r*(g+h*Math.tan(p)*(d*d/2+(5-l+9*c+4*c*c)*d*d*d*d/24+(61-58*l+l*l+600*c-330*a)*d*d*d*d*d*d/720));return t<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(b),zoneNumber:x,zoneLetter:Ax(t)}}function Ef(i){var t=i.northing,e=i.easting,n=i.zoneLetter,s=i.zoneNumber;if(s<0||s>60)return null;var r=.9996,o=6378137,a=.00669438,h,l=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,d,g,p,y,v,x,b,S,A=e-5e5,O=t;n<"N"&&(O-=1e7),x=(s-1)*6-180+3,h=a/(1-a),v=O/r,b=v/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),S=b+(3*l/2-27*l*l*l/32)*Math.sin(2*b)+(21*l*l/16-55*l*l*l*l/32)*Math.sin(4*b)+151*l*l*l/96*Math.sin(6*b),c=o/Math.sqrt(1-a*Math.sin(S)*Math.sin(S)),d=Math.tan(S)*Math.tan(S),g=h*Math.cos(S)*Math.cos(S),p=o*(1-a)/Math.pow(1-a*Math.sin(S)*Math.sin(S),1.5),y=A/(c*r);var k=S-c*Math.tan(S)/p*(y*y/2-(5+3*d+10*g-4*g*g-9*h)*y*y*y*y/24+(61+90*d+298*g+45*d*d-252*h-3*g*g)*y*y*y*y*y*y/720);k=Xg(k);var H=(y-(1+2*d+g)*y*y*y/6+(5-2*g+28*d-3*g*g+8*h+24*d*d)*y*y*y*y*y/120)/Math.cos(S);H=x+Xg(H);var W;if(i.accuracy){var F=Ef({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});W={top:F.lat,right:F.lon,bottom:k,left:H}}else W={lat:k,lon:H};return W}function Ax(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function Lx(i,t){var e="00000"+i.easting,n="00000"+i.northing;return i.zoneNumber+i.zoneLetter+Nx(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+n.substr(n.length-5,t)}function Nx(i,t,e){var n=Hg(e),s=Math.floor(i/1e5),r=Math.floor(t/1e5)%20;return Px(s,r,n)}function Hg(i){var t=i%Ug;return t===0&&(t=Ug),t}function Px(i,t,e){var n=e-1,s=zg.charCodeAt(n),r=Wg.charCodeAt(n),o=s+i-1,a=r+t,h=!1;o>qh&&(o=o-qh+la-1,h=!0),(o===gn||s<gn&&o>gn||(o>gn||s<gn)&&h)&&o++,(o===kn||s<kn&&o>kn||(o>kn||s<kn)&&h)&&(o++,o===gn&&o++),o>qh&&(o=o-qh+la-1),a>Gh?(a=a-Gh+la-1,h=!0):h=!1,(a===gn||r<gn&&a>gn||(a>gn||r<gn)&&h)&&a++,(a===kn||r<kn&&a>kn||(a>kn||r<kn)&&h)&&(a++,a===gn&&a++),a>Gh&&(a=a-Gh+la-1);var l=String.fromCharCode(o)+String.fromCharCode(a);return l}function Zg(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,n="",s,r=0;!/[A-Z]/.test(s=i.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+i;n+=s,r++}var o=parseInt(n,10);if(r===0||r+3>t)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(r++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;e=i.substring(r,r+=2);for(var h=Hg(o),l=Rx(e.charAt(0),h),c=Ix(e.charAt(1),h);c<Tx(a);)c+=2e6;var d=t-r;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var g=d/2,p=0,y=0,v,x,b,S,A;return g>0&&(v=1e5/Math.pow(10,g),x=i.substring(r,r+g),p=parseFloat(x)*v,b=i.substring(r+g),y=parseFloat(b)*v),S=p+l,A=y+c,{easting:S,northing:A,zoneLetter:a,zoneNumber:o,accuracy:v}}function Rx(i,t){for(var e=zg.charCodeAt(t-1),n=1e5,s=!1;e!==i.charCodeAt(0);){if(e++,e===gn&&e++,e===kn&&e++,e>qh){if(s)throw"Bad character: "+i;e=la,s=!0}n+=1e5}return n}function Ix(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=Wg.charCodeAt(t-1),n=0,s=!1;e!==i.charCodeAt(0);){if(e++,e===gn&&e++,e===kn&&e++,e>Gh){if(s)throw"Bad character: "+i;e=la,s=!0}n+=1e5}return n}function Tx(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function ua(i,t,e){if(!(this instanceof ua))return new ua(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var n=i.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ua.fromMGRS=function(i){return new ua(Vg(i))},ua.prototype.toMGRS=function(i){return Yg([this.x,this.y],i)};var Ox=1,Fx=.25,Kg=.046875,Jg=.01953125,Qg=.01068115234375,kx=.75,Dx=.46875,jx=.013020833333333334,Bx=.007120768229166667,Gx=.3645833333333333,qx=.005696614583333333,Ux=.3076171875;function $g(i){var t=[];t[0]=Ox-i*(Fx+i*(Kg+i*(Jg+i*Qg))),t[1]=i*(kx-i*(Kg+i*(Jg+i*Qg)));var e=i*i;return t[2]=e*(Dx-i*(jx+i*Bx)),e*=i,t[3]=e*(Gx-i*qx),t[4]=e*i*Ux,t}function Cu(i,t,e,n){return e*=t,t*=t,n[0]*i-e*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var zx=20;function t2(i,t,e){for(var n=1/(1-t),s=i,r=zx;r;--r){var o=Math.sin(s),a=1-t*o*o;if(a=(Cu(s,o,Math.cos(s),e)-i)*(a*Math.sqrt(a))*n,s-=a,Math.abs(a)<kt)return s}return s}function Wx(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=$g(this.es),this.ml0=Cu(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Yx(i){var t=i.x,e=i.y,n=Gt(t-this.long0),s,r,o,a=Math.sin(e),h=Math.cos(e);if(this.es){var l=h*n,c=Math.pow(l,2),d=this.ep2*Math.pow(h,2),g=Math.pow(d,2),p=Math.abs(h)>kt?Math.tan(e):0,y=Math.pow(p,2),v=Math.pow(y,2);s=1-this.es*Math.pow(a,2),l=l/Math.sqrt(s);var x=Cu(e,a,h,this.en);r=this.a*(this.k0*l*(1+c/6*(1-y+d+c/20*(5-18*y+v+14*d-58*y*d+c/42*(61+179*v-v*y-479*y)))))+this.x0,o=this.a*(this.k0*(x-this.ml0+a*n*l/2*(1+c/12*(5-y+9*d+4*g+c/30*(61+v-58*y+270*d-330*y*d+c/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var b=h*Math.sin(n);if(Math.abs(Math.abs(b)-1)<kt)return 93;if(r=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,o=h*Math.cos(n)/Math.sqrt(1-Math.pow(b,2)),b=Math.abs(o),b>=1){if(b-1>kt)return 93;o=0}else o=Math.acos(o);e<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=r,i.y=o,i}function Vx(i){var t,e,n,s,r=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,e=t2(t,this.es,this.en),Math.abs(e)<Ct){var a=Math.sin(e),h=Math.cos(e),l=Math.abs(h)>kt?Math.tan(e):0,c=this.ep2*Math.pow(h,2),d=Math.pow(c,2),g=Math.pow(l,2),p=Math.pow(g,2);t=1-this.es*Math.pow(a,2);var y=r*Math.sqrt(t)/this.k0,v=Math.pow(y,2);t=t*l,n=e-t*v/(1-this.es)*.5*(1-v/12*(5+3*g-9*c*g+c-4*d-v/30*(61+90*g-252*c*g+45*p+46*c-v/56*(1385+3633*g+4095*p+1574*p*g)))),s=Gt(this.long0+y*(1-v/6*(1+2*g+c-v/20*(5+28*g+24*p+8*c*g+6*c-v/42*(61+662*g+1320*p+720*p*g))))/h)}else n=Ct*jh(o),s=0;else{var x=Math.exp(r/this.k0),b=.5*(x-1/x),S=this.lat0+o/this.k0,A=Math.cos(S);t=Math.sqrt((1-Math.pow(A,2))/(1+Math.pow(b,2))),n=Math.asin(t),o<0&&(n=-n),b===0&&A===0?s=0:s=Gt(Math.atan2(b,A)+this.long0)}return i.x=s,i.y=n,i}var Xx=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Eu={init:Wx,forward:Yx,inverse:Vx,names:Xx};function e2(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function Qn(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),n=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function Hx(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function Zx(i){var t=Math.abs(i);return t=Hx(t*(1+t/(Qn(1,t)+1))),i<0?-t:t}function Af(i,t){for(var e=2*Math.cos(2*t),n=i.length-1,s=i[n],r=0,o;--n>=0;)o=-r+e*s+i[n],r=s,s=o;return t+o*Math.sin(2*t)}function Kx(i,t){for(var e=2*Math.cos(t),n=i.length-1,s=i[n],r=0,o;--n>=0;)o=-r+e*s+i[n],r=s,s=o;return Math.sin(t)*o}function Jx(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function i2(i,t,e){for(var n=Math.sin(t),s=Math.cos(t),r=e2(e),o=Jx(e),a=2*s*o,h=-2*n*r,l=i.length-1,c=i[l],d=0,g=0,p=0,y,v;--l>=0;)y=g,v=d,g=c,d=p,c=-y+a*g-h*d+i[l],p=-v+h*g+a*d;return a=n*o,h=s*r,[a*c-h*p,a*p+h*c]}function Qx(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Eu.init.apply(this),this.forward=Eu.forward,this.inverse=Eu.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-.6666666666666666+t*(-2+t*(2.577777777777778+t*(.5777777777777777+t*-4.228148148148148))))),this.cbg[0]=t*(-2+t*(.6666666666666666+t*(1.3333333333333333+t*(-1.8222222222222222+t*(.7111111111111111+t*.9824338624338624))))),e=e*t,this.cgb[1]=e*(2.3333333333333335+t*(-1.6+t*(-5.044444444444444+t*(8.584126984126984+t*2.458201058201058)))),this.cbg[1]=e*(1.6666666666666667+t*(-1.0666666666666667+t*(-1.4444444444444444+t*(2.86984126984127+t*-1.6105820105820106)))),e=e*t,this.cgb[2]=e*(3.7333333333333334+t*(-3.8857142857142857+t*(-12.019047619047619+t*26.03668430335097))),this.cbg[2]=e*(-1.7333333333333334+t*(1.619047619047619+t*(1.6+t*-4.474779541446208))),e=e*t,this.cgb[3]=e*(6.792063492063492+t*(-9.485714285714286+t*-28.188500881834216)),this.cbg[3]=e*(1.9634920634920634+t*(-2.4+t*-1.7518165784832451)),e=e*t,this.cgb[4]=e*(13.250793650793652+t*-23.22238255571589),this.cbg[4]=e*(-2.3301587301587303+t*3.5144460477793813),e=e*t,this.cgb[5]=e*27.011268237934903,this.cbg[5]=e*2.8496841430174764,e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(.25+e*(.015625+e/256))),this.utg[0]=t*(-.5+t*(.6666666666666666+t*(-.3854166666666667+t*(.002777777777777778+t*(.158203125+t*-.15905919312169312))))),this.gtu[0]=t*(.5+t*(-.6666666666666666+t*(.3125+t*(.22777777777777777+t*(-.4409722222222222+t*.20875661375661375))))),this.utg[1]=e*(-.020833333333333332+t*(-.06666666666666667+t*(.3034722222222222+t*(-.4380952380952381+t*.2890188388723545)))),this.gtu[1]=e*(.2708333333333333+t*(-.6+t*(.38680555555555557+t*(.44603174603174606+t*-1.0248393063822752)))),e=e*t,this.utg[2]=e*(-.035416666666666666+t*(.04404761904761905+t*(.046651785714285715+t*-.06138668430335097))),this.gtu[2]=e*(.25416666666666665+t*(-.7357142857142858+t*(.5603050595238095+t*.9237378747795415))),e=e*t,this.utg[3]=e*(-.02726314484126984+t*(.021825396825396824+t*.11439745921516754)),this.gtu[3]=e*(.30729786706349205+t*(-1.0654761904761905+t*.9096203979276896)),e=e*t,this.utg[4]=e*(-.02841641865079365+t*.027268468414301746),this.gtu[4]=e*(.4306671626984127+t*-1.713007555715889),e=e*t,this.utg[5]=e*-.03233083094085698,this.gtu[5]=e*.6650675310896665;var n=Af(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Kx(this.gtu,2*n))}function $x(i){var t=Gt(i.x-this.long0),e=i.y;e=Af(this.cbg,e);var n=Math.sin(e),s=Math.cos(e),r=Math.sin(t),o=Math.cos(t);e=Math.atan2(n,o*s),t=Math.atan2(r*s,Qn(n,s*o)),t=Zx(Math.tan(t));var a=i2(this.gtu,2*e,2*t);e=e+a[0],t=t+a[1];var h,l;return Math.abs(t)<=2.623395162778?(h=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*e+this.Zb)+this.y0):(h=1/0,l=1/0),i.x=h,i.y=l,i}function t3(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var r=i2(this.utg,2*e,2*t);e=e+r[0],t=t+r[1],t=Math.atan(e2(t));var o=Math.sin(e),a=Math.cos(e),h=Math.sin(t),l=Math.cos(t);e=Math.atan2(o*l,Qn(h,l*a)),t=Math.atan2(h,l*a),n=Gt(t+this.long0),s=Af(this.cgb,e)}else n=1/0,s=1/0;return i.x=n,i.y=s,i}var e3=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const Au={init:Qx,forward:$x,inverse:t3,names:e3};function i3(i,t){if(i===void 0){if(i=Math.floor((Gt(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var n3="etmerc";function s3(){var i=i3(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*qi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Au.init.apply(this),this.forward=Au.forward,this.inverse=Au.inverse}var r3=["Universal Transverse Mercator System","utm"];const o3={init:s3,names:r3,dependsOn:n3};function Lf(i,t){return Math.pow((1-i)/(1+i),t)}var a3=20;function h3(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ge)/(Math.pow(Math.tan(.5*this.lat0+Ge),this.C)*Lf(this.e*i,this.ratexp))}function l3(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+Ge),this.C)*Lf(this.e*Math.sin(e),this.ratexp))-Ct,i.x=this.C*t,i}function u3(i){for(var t=1e-14,e=i.x/this.C,n=i.y,s=Math.pow(Math.tan(.5*n+Ge)/this.K,1/this.C),r=a3;r>0&&(n=2*Math.atan(s*Lf(this.e*Math.sin(i.y),-.5*this.e))-Ct,!(Math.abs(n-i.y)<t));--r)i.y=n;return r?(i.x=e,i.y=n,i):null}var c3=["gauss"];const Nf={init:h3,forward:l3,inverse:u3,names:c3};function d3(){Nf.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function f3(i){var t,e,n,s;return i.x=Gt(i.x-this.long0),Nf.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*n),i.x=s*e*Math.sin(i.x),i.y=s*(this.cosc0*t-this.sinc0*e*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function p3(i){var t,e,n,s,r;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,r=Math.sqrt(i.x*i.x+i.y*i.y)){var o=2*Math.atan2(r,this.R2);t=Math.sin(o),e=Math.cos(o),s=Math.asin(e*this.sinc0+i.y*t*this.cosc0/r),n=Math.atan2(i.x*t,r*this.cosc0*e-i.y*this.sinc0*t)}else s=this.phic0,n=0;return i.x=n,i.y=s,Nf.inverse.apply(this,[i]),i.x=Gt(i.x+this.long0),i}var g3=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const m3={init:d3,forward:f3,inverse:p3,names:g3};function _3(i,t,e){return t*=e,Math.tan(.5*(Ct+i))*Math.pow((1-t)/(1+t),.5*e)}function y3(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=kt&&(this.k0=.5*(1+jh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=kt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=kt&&(this.k0=.5*this.cons*Cs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Jn(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Cs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ct,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function v3(i){var t=i.x,e=i.y,n=Math.sin(e),s=Math.cos(e),r,o,a,h,l,c,d=Gt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=kt&&Math.abs(e+this.lat0)<=kt?(i.x=NaN,i.y=NaN,i):this.sphere?(r=2*this.k0/(1+this.sinlat0*n+this.coslat0*s*Math.cos(d)),i.x=this.a*r*s*Math.sin(d)+this.x0,i.y=this.a*r*(this.coslat0*n-this.sinlat0*s*Math.cos(d))+this.y0,i):(o=2*Math.atan(this.ssfn_(e,n,this.e))-Ct,h=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=kt?(l=Jn(this.e,e*this.con,this.con*n),c=2*this.a*this.k0*l/this.cons,i.x=this.x0+c*Math.sin(t-this.long0),i.y=this.y0-this.con*c*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<kt?(r=2*this.a*this.k0/(1+h*Math.cos(d)),i.y=r*a):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*h*Math.cos(d))),i.y=r*(this.cosX0*a-this.sinX0*h*Math.cos(d))+this.y0),i.x=r*h*Math.sin(d)+this.x0,i))}function w3(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,s,r,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,e=this.lat0,o<=kt?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<kt?this.lat0>0?t=Gt(this.long0+Math.atan2(i.x,-1*i.y)):t=Gt(this.long0+Math.atan2(i.x,i.y)):t=Gt(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=kt){if(o<=kt)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,n=o*this.cons/(2*this.a*this.k0),e=this.con*Bh(this.e,n),t=this.con*Gt(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=kt?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+i.y*Math.sin(s)*this.cosX0/o),t=Gt(this.long0+Math.atan2(i.x*Math.sin(s),o*this.cosX0*Math.cos(s)-i.y*this.sinX0*Math.sin(s)))),e=-1*Bh(this.e,Math.tan(.5*(Ct+r)));return i.x=t,i.y=e,i}var b3=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const x3={init:y3,forward:v3,inverse:w3,names:b3,ssfn_:_3};function S3(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,n=this.rf,s=1/n,r=2*s-Math.pow(s,2),o=this.e=Math.sqrt(r);this.R=this.k0*e*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+i/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*h+this.alpha*o/2*l}function M3(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),n=-this.alpha*(t+e)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function C3(i){for(var t=i.x-this.x0,e=i.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,h=0,l=r,c=-1e3,d=0;Math.abs(l-c)>1e-7;){if(++d>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return i.x=a,i.y=l,i}var E3=["somerc"];const A3={init:S3,forward:M3,inverse:C3,names:E3};var ca=1e-7;function L3(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1}function N3(){var i,t,e,n,s,r,o,a,h,l,c=0,d,g=0,p=0,y=0,v=0,x=0,b=0;this.no_off=L3(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),S&&(b=this.alpha),A&&(c=this.rectified_grid_angle*qi),S||A)g=this.longc;else if(p=this.long1,v=this.lat1,y=this.long2,x=this.lat2,Math.abs(v-x)<=ca||(i=Math.abs(v))<=ca||Math.abs(i-Ct)<=ca||Math.abs(Math.abs(this.lat0)-Ct)<=ca||Math.abs(Math.abs(x)-Ct)<=ca)throw new Error;var O=1-this.es;t=Math.sqrt(O),Math.abs(this.lat0)>kt?(a=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*a*a,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*t/i,n=this.B*t/(e*Math.sqrt(i)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(Jn(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=s=1),S||A?(S?(d=Math.asin(Math.sin(b)/n),A||(c=b)):(d=c,b=Math.asin(n*Math.sin(d))),this.lam0=g-Math.asin(.5*(s-1/s)*Math.tan(d))/this.B):(r=Math.pow(Jn(this.e,v,Math.sin(v)),this.B),o=Math.pow(Jn(this.e,x,Math.sin(x)),this.B),s=this.E/r,h=(o-r)/(o+r),l=this.E*this.E,l=(l-o*r)/(l+o*r),i=p-y,i<-Math.pi?y-=kh:i>Math.pi&&(y+=kh),this.lam0=Gt(.5*(p+y)-Math.atan(l*Math.tan(.5*this.B*(p-y))/h)/this.B),d=Math.atan(2*Math.sin(this.B*Gt(p-this.lam0))/(s-1/s)),c=b=Math.asin(n*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(Ge-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ge+s))}function P3(i){var t={},e,n,s,r,o,a,h,l;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-Ct)>kt){if(o=this.E/Math.pow(Jn(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,e=.5*(o-a),n=.5*(o+a),r=Math.sin(this.B*i.x),s=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(s)-1)<kt)throw new Error;l=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*i.x),Math.abs(a)<ca?h=this.A*i.x:h=this.ArB*Math.atan2(e*this.cosgam+r*this.singam,a)}else l=i.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*i.y;return this.no_rot?(t.x=h,t.y=l):(h-=this.u_0,t.x=l*this.cosrot+h*this.sinrot,t.y=h*this.cosrot-l*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function R3(i){var t,e,n,s,r,o,a,h={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*e),s=.5*(n-1/n),r=.5*(n+1/n),o=Math.sin(this.BrA*t),a=(o*this.cosgam+s*this.singam)/r,Math.abs(Math.abs(a)-1)<kt)h.x=0,h.y=a<0?-Ct:Ct;else{if(h.y=this.E/Math.sqrt((1+a)/(1-a)),h.y=Bh(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return h.x+=this.lam0,h}var I3=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const T3={init:N3,forward:P3,inverse:R3,names:I3};function O3(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<kt)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),n=Cs(this.e,t,e),s=Jn(this.e,this.lat1,t),r=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Cs(this.e,r,o),h=Jn(this.e,this.lat2,r),l=Jn(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>kt?this.ns=Math.log(n/a)/Math.log(s/h):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function F3(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=kt&&(e=jh(e)*(Ct-2*kt));var n=Math.abs(Math.abs(e)-Ct),s,r;if(n>kt)s=Jn(this.e,e,Math.sin(e)),r=this.a*this.f0*Math.pow(s,this.ns);else{if(n=e*this.ns,n<=0)return null;r=0}var o=this.ns*Gt(t-this.long0);return i.x=this.k0*(r*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,i}function k3(i){var t,e,n,s,r,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),e=1):(t=-Math.sqrt(o*o+a*a),e=-1);var h=0;if(t!==0&&(h=Math.atan2(e*o,e*a)),t!==0||this.ns>0){if(e=1/this.ns,n=Math.pow(t/(this.a*this.f0),e),s=Bh(this.e,n),s===-9999)return null}else s=-Ct;return r=Gt(h/this.ns+this.long0),i.x=r,i.y=s,i}var D3=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const j3={init:O3,forward:F3,inverse:k3,names:D3};function B3(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function G3(i){var t,e,n,s,r,o,a,h=i.x,l=i.y,c=Gt(h-this.long0);return t=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),r=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(s)),o=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function q3(i){var t,e,n,s,r,o,a,h,l=i.x;i.x=i.y,i.y=l,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),r=Math.atan2(i.y,i.x),s=r/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),e=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),i.x=this.long0-e/this.alfa,a=t,h=0;var c=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(h=1),a=i.y,c+=1;while(h===0&&c<15);return c>=15?null:i}var U3=["Krovak","krovak"];const z3={init:B3,forward:G3,inverse:q3,names:U3};function rn(i,t,e,n,s){return i*s-t*Math.sin(2*s)+e*Math.sin(4*s)-n*Math.sin(6*s)}function Uh(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function zh(i){return .375*i*(1+.25*i*(1+.46875*i))}function Wh(i){return .05859375*i*i*(1+.75*i)}function Yh(i){return i*i*i*.011393229166666666}function da(i,t,e){var n=t*e;return i/Math.sqrt(1-n*n)}function fa(i){return Math.abs(i)<Ct?i:i-jh(i)*Math.PI}function Lu(i,t,e,n,s){var r,o;r=i/t;for(var a=0;a<15;a++)if(o=(i-(t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-s*Math.sin(6*r)))/(t-2*e*Math.cos(2*r)+4*n*Math.cos(4*r)-6*s*Math.cos(6*r)),r+=o,Math.abs(o)<=1e-10)return r;return NaN}function W3(){this.sphere||(this.e0=Uh(this.es),this.e1=zh(this.es),this.e2=Wh(this.es),this.e3=Yh(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Y3(i){var t,e,n=i.x,s=i.y;if(n=Gt(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),a=da(this.a,this.e,r),h=Math.tan(s)*Math.tan(s),l=n*Math.cos(s),c=l*l,d=this.es*o*o/(1-this.es),g=this.a*rn(this.e0,this.e1,this.e2,this.e3,s);t=a*l*(1-c*h*(.16666666666666666-(8-h+8*d)*c/120)),e=g-this.ml0+a*r/o*c*(.5+(5-h+6*d)*c/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function V3(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,s;if(this.sphere){var r=e+this.lat0;n=Math.asin(Math.sin(r)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(r))}else{var o=this.ml0/this.a+e,a=Lu(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ct)<=kt)return i.x=this.long0,i.y=Ct,e<0&&(i.y*=-1),i;var h=da(this.a,this.e,Math.sin(a)),l=h*h*h/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),d=t*this.a/h,g=d*d;n=a-h*Math.tan(a)/l*d*d*(.5-(1+3*c)*d*d/24),s=d*(1-g*(c/3+(1+3*c)*c*g/15))/Math.cos(a)}return i.x=Gt(s+this.long0),i.y=fa(n),i}var X3=["Cassini","Cassini_Soldner","cass"];const H3={init:W3,forward:Y3,inverse:V3,names:X3};function Er(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var Z3=1,K3=2,J3=3,Q3=4;function $3(){var i=Math.abs(this.lat0);if(Math.abs(i-Ct)<kt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<kt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Er(this.e,1),this.mmf=.5/(1-this.es),this.apa=hS(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Er(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function tS(i){var t,e,n,s,r,o,a,h,l,c,d=i.x,g=i.y;if(d=Gt(d-this.long0),this.sphere){if(r=Math.sin(g),c=Math.cos(g),n=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+c*n:1+this.sinph0*r+this.cosph0*c*n,e<=kt)return null;e=Math.sqrt(2/e),t=e*c*Math.sin(d),e*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(g+this.lat0)<kt)return null;e=Ge-g*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(d),e*=n}}else{switch(a=0,h=0,l=0,n=Math.cos(d),s=Math.sin(d),r=Math.sin(g),o=Er(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:l=1+this.sinb1*a+this.cosb1*h*n;break;case this.EQUIT:l=1+h*n;break;case this.N_POLE:l=Ct+g,o=this.qp-o;break;case this.S_POLE:l=g-Ct,o=this.qp+o;break}if(Math.abs(l)<kt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),this.mode===this.OBLIQ?e=this.ymf*l*(this.cosb1*a-this.sinb1*h*n):e=(l=Math.sqrt(2/(1+h*n)))*a*this.ymf,t=this.xmf*l*h*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(l=Math.sqrt(o))*s,e=n*(this.mode===this.S_POLE?l:-l)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function eS(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,s,r,o,a,h,l;if(this.sphere){var c=0,d,g=0;if(d=Math.sqrt(t*t+e*e),s=d*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(s),c=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(d)<=kt?0:Math.asin(e*g/d),t*=g,e=c*d;break;case this.OBLIQ:s=Math.abs(d)<=kt?this.lat0:Math.asin(c*this.sinph0+e*g*this.cosph0/d),t*=g*this.cosph0,e=(c-Math.sin(s)*this.sinph0)*d;break;case this.N_POLE:e=-e,s=Ct-s;break;case this.S_POLE:s-=Ct;break}n=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,h=Math.sqrt(t*t+e*e),h<kt)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*h/this.rq),r=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(l=r*this.sinb1+e*o*this.cosb1/h,a=this.qp*l,e=h*this.cosb1*r-e*this.sinb1*o):(l=e*o/h,a=this.qp*l,e=h*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),a=t*t+e*e,!a)return i.x=this.long0,i.y=this.lat0,i;l=1-a/this.qp,this.mode===this.S_POLE&&(l=-l)}n=Math.atan2(t,e),s=lS(Math.asin(l),this.apa)}return i.x=Gt(this.long0+n),i.y=s,i}var iS=.3333333333333333,nS=.17222222222222222,sS=.10257936507936508,rS=.06388888888888888,oS=.0664021164021164,aS=.016415012942191543;function hS(i){var t,e=[];return e[0]=i*iS,t=i*i,e[0]+=t*nS,e[1]=t*rS,t*=i,e[0]+=t*sS,e[1]+=t*oS,e[2]=t*aS,e}function lS(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var uS=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const cS={init:$3,forward:tS,inverse:eS,names:uS,S_POLE:Z3,N_POLE:K3,EQUIT:J3,OBLIQ:Q3};function Ar(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function dS(){Math.abs(this.lat1+this.lat2)<kt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Cs(this.e3,this.sin_po,this.cos_po),this.qs1=Er(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Cs(this.e3,this.sin_po,this.cos_po),this.qs2=Er(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Er(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>kt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function fS(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=Er(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*Gt(t-this.long0),o=s*Math.sin(r)+this.x0,a=this.rh-s*Math.cos(r)+this.y0;return i.x=o,i.y=a,i}function pS(i){var t,e,n,s,r,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),n=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),n=-1),s=0,t!==0&&(s=Math.atan2(n*i.x,n*i.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(e=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,e)),r=Gt(s/this.ns0+this.long0),i.x=r,i.y=o,i}function gS(i,t){var e,n,s,r,o,a=Ar(.5*t);if(i<kt)return a;for(var h=i*i,l=1;l<=25;l++)if(e=Math.sin(a),n=Math.cos(a),s=i*e,r=1-s*s,o=.5*r*r/n*(t/(1-h)-e/r+.5/i*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var mS=["Albers_Conic_Equal_Area","Albers","aea"];const _S={init:dS,forward:fS,inverse:pS,names:mS,phi1z:gS};function yS(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function vS(i){var t,e,n,s,r,o,a,h,l=i.x,c=i.y;return n=Gt(l-this.long0),t=Math.sin(c),e=Math.cos(c),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*s,r=1,o>0||Math.abs(o)<=kt?(a=this.x0+this.a*r*e*Math.sin(n)/o,h=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*e*s)/o):(a=this.x0+this.infinity_dist*e*Math.sin(n),h=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*s)),i.x=a,i.y=h,i}function wS(i){var t,e,n,s,r,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(s=Math.atan2(t,this.rc),e=Math.sin(s),n=Math.cos(s),o=Ar(n*this.sin_p14+i.y*e*this.cos_p14/t),r=Math.atan2(i.x*e,t*this.cos_p14*n-i.y*this.sin_p14*e),r=Gt(this.long0+r)):(o=this.phic0,r=0),i.x=r,i.y=o,i}var bS=["gnom"];const xS={init:yS,forward:vS,inverse:wS,names:bS};function SS(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*Ct:Ct;for(var n=Math.asin(.5*t),s,r,o,a,h=0;h<30;h++)if(r=Math.sin(n),o=Math.cos(n),a=i*r,s=Math.pow(1-a*a,2)/(2*o)*(t/(1-i*i)-r/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),n+=s,Math.abs(s)<=1e-10)return n;return NaN}function MS(){this.sphere||(this.k0=Cs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function CS(i){var t=i.x,e=i.y,n,s,r=Gt(t-this.long0);if(this.sphere)n=this.x0+this.a*r*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var o=Er(this.e,Math.sin(e));n=this.x0+this.a*this.k0*r,s=this.y0+this.a*o*.5/this.k0}return i.x=n,i.y=s,i}function ES(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=Gt(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=SS(this.e,2*i.y*this.k0/this.a),t=Gt(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var AS=["cea"];const LS={init:MS,forward:CS,inverse:ES,names:AS};function NS(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function PS(i){var t=i.x,e=i.y,n=Gt(t-this.long0),s=fa(e-this.lat0);return i.x=this.x0+this.a*n*this.rc,i.y=this.y0+this.a*s,i}function RS(i){var t=i.x,e=i.y;return i.x=Gt(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=fa(this.lat0+(e-this.y0)/this.a),i}var IS=["Equirectangular","Equidistant_Cylindrical","eqc"];const TS={init:NS,forward:PS,inverse:RS,names:IS};var n2=20;function OS(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Uh(this.es),this.e1=zh(this.es),this.e2=Wh(this.es),this.e3=Yh(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function FS(i){var t=i.x,e=i.y,n,s,r,o=Gt(t-this.long0);if(r=o*Math.sin(e),this.sphere)Math.abs(e)<=kt?(n=this.a*o,s=-1*this.a*this.lat0):(n=this.a*Math.sin(r)/Math.tan(e),s=this.a*(fa(e-this.lat0)+(1-Math.cos(r))/Math.tan(e)));else if(Math.abs(e)<=kt)n=this.a*o,s=-1*this.ml0;else{var a=da(this.a,this.e,Math.sin(e))/Math.tan(e);n=a*Math.sin(r),s=this.a*rn(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(r))}return i.x=n+this.x0,i.y=s+this.y0,i}function kS(i){var t,e,n,s,r,o,a,h,l;if(n=i.x-this.x0,s=i.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=kt)t=Gt(n/this.a+this.long0),e=0;else{o=this.lat0+s/this.a,a=n*n/this.a/this.a+o*o,h=o;var c;for(r=n2;r;--r)if(c=Math.tan(h),l=-1*(o*(h*c+1)-h-.5*(h*h+a)*c)/((h-o)/c-1),h+=l,Math.abs(l)<=kt){e=h;break}t=Gt(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(e))}else if(Math.abs(s+this.ml0)<=kt)e=0,t=Gt(this.long0+n/this.a);else{o=(this.ml0+s)/this.a,a=n*n/this.a/this.a+o*o,h=o;var d,g,p,y,v;for(r=n2;r;--r)if(v=this.e*Math.sin(h),d=Math.sqrt(1-v*v)*Math.tan(h),g=this.a*rn(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),y=g/this.a,l=(o*(d*y+1)-y-.5*d*(y*y+a))/(this.es*Math.sin(2*h)*(y*y+a-2*o*y)/(4*d)+(o-y)*(d*p-2/Math.sin(2*h))-p),h-=l,Math.abs(l)<=kt){e=h;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=Gt(this.long0+Math.asin(n*d/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var DS=["Polyconic","poly"];const jS={init:OS,forward:FS,inverse:kS,names:DS};function BS(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function GS(i){var t,e=i.x,n=i.y,s=n-this.lat0,r=e-this.long0,o=s/Fh*1e-5,a=r,h=1,l=0;for(t=1;t<=10;t++)h=h*o,l=l+this.A[t]*h;var c=l,d=a,g=1,p=0,y,v,x=0,b=0;for(t=1;t<=6;t++)y=g*c-p*d,v=p*c+g*d,g=y,p=v,x=x+this.B_re[t]*g-this.B_im[t]*p,b=b+this.B_im[t]*g+this.B_re[t]*p;return i.x=b*this.a+this.x0,i.y=x*this.a+this.y0,i}function qS(i){var t,e=i.x,n=i.y,s=e-this.x0,r=n-this.y0,o=r/this.a,a=s/this.a,h=1,l=0,c,d,g=0,p=0;for(t=1;t<=6;t++)c=h*o-l*a,d=l*o+h*a,h=c,l=d,g=g+this.C_re[t]*h-this.C_im[t]*l,p=p+this.C_im[t]*h+this.C_re[t]*l;for(var y=0;y<this.iterations;y++){var v=g,x=p,b,S,A=o,O=a;for(t=2;t<=6;t++)b=v*g-x*p,S=x*g+v*p,v=b,x=S,A=A+(t-1)*(this.B_re[t]*v-this.B_im[t]*x),O=O+(t-1)*(this.B_im[t]*v+this.B_re[t]*x);v=1,x=0;var k=this.B_re[1],H=this.B_im[1];for(t=2;t<=6;t++)b=v*g-x*p,S=x*g+v*p,v=b,x=S,k=k+t*(this.B_re[t]*v-this.B_im[t]*x),H=H+t*(this.B_im[t]*v+this.B_re[t]*x);var W=k*k+H*H;g=(A*k+O*H)/W,p=(O*k-A*H)/W}var F=g,$=p,V=1,P=0;for(t=1;t<=9;t++)V=V*F,P=P+this.D[t]*V;var I=this.lat0+P*Fh*1e5,U=this.long0+$;return i.x=U,i.y=I,i}var US=["New_Zealand_Map_Grid","nzmg"];const zS={init:BS,forward:GS,inverse:qS,names:US};function WS(){}function YS(i){var t=i.x,e=i.y,n=Gt(t-this.long0),s=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=s,i.y=r,i}function VS(i){i.x-=this.x0,i.y-=this.y0;var t=Gt(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var XS=["Miller_Cylindrical","mill"];const HS={init:WS,forward:YS,inverse:VS,names:XS};var ZS=20;function KS(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$g(this.es)}function JS(i){var t,e,n=i.x,s=i.y;if(n=Gt(n-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var r=this.n*Math.sin(s),o=ZS;o;--o){var a=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<kt)break}t=this.a*this.C_x*n*(this.m+Math.cos(s)),e=this.a*this.C_y*s}else{var h=Math.sin(s),l=Math.cos(s);e=this.a*Cu(s,h,l,this.en),t=this.a*n*l/Math.sqrt(1-this.es*h*h)}return i.x=t,i.y=e,i}function QS(i){var t,e,n,s;return i.x-=this.x0,n=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Ar((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Ar(Math.sin(t)/this.n)),n=Gt(n+this.long0),t=fa(t)):(t=t2(i.y/this.a,this.es,this.en),s=Math.abs(t),s<Ct?(s=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=Gt(e)):s-kt<Ct&&(n=this.long0)),i.x=n,i.y=t,i}var $S=["Sinusoidal","sinu"];const t4={init:KS,forward:JS,inverse:QS,names:$S};function e4(){}function i4(i){for(var t=i.x,e=i.y,n=Gt(t-this.long0),s=e,r=Math.PI*Math.sin(e);;){var o=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=o,Math.abs(o)<kt)break}s/=2,Math.PI/2-Math.abs(e)<kt&&(n=0);var a=.900316316158*this.a*n*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return i.x=a,i.y=h,i}function n4(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var n=Gt(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var s=Math.asin(e);return i.x=n,i.y=s,i}var s4=["Mollweide","moll"];const r4={init:e4,forward:i4,inverse:n4,names:s4};function o4(){Math.abs(this.lat1+this.lat2)<kt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Uh(this.es),this.e1=zh(this.es),this.e2=Wh(this.es),this.e3=Yh(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Cs(this.e,this.sinphi,this.cosphi),this.ml1=rn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<kt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Cs(this.e,this.sinphi,this.cosphi),this.ml2=rn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=rn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function a4(i){var t=i.x,e=i.y,n;if(this.sphere)n=this.a*(this.g-e);else{var s=rn(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-s)}var r=this.ns*Gt(t-this.long0),o=this.x0+n*Math.sin(r),a=this.y0+this.rh-n*Math.cos(r);return i.x=o,i.y=a,i}function h4(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,n,s;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var r=0;if(e!==0&&(r=Math.atan2(t*i.x,t*i.y)),this.sphere)return s=Gt(this.long0+r/this.ns),n=fa(this.g-e/this.a),i.x=s,i.y=n,i;var o=this.g-e/this.a;return n=Lu(o,this.e0,this.e1,this.e2,this.e3),s=Gt(this.long0+r/this.ns),i.x=s,i.y=n,i}var l4=["Equidistant_Conic","eqdc"];const u4={init:o4,forward:a4,inverse:h4,names:l4};function c4(){this.R=this.a}function d4(i){var t=i.x,e=i.y,n=Gt(t-this.long0),s,r;Math.abs(e)<=kt&&(s=this.x0+this.R*n,r=this.y0);var o=Ar(2*Math.abs(e/Math.PI));(Math.abs(n)<=kt||Math.abs(Math.abs(e)-Ct)<=kt)&&(s=this.x0,e>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*o):r=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/n-n/Math.PI),h=a*a,l=Math.sin(o),c=Math.cos(o),d=c/(l+c-1),g=d*d,p=d*(2/l-1),y=p*p,v=Math.PI*this.R*(a*(d-y)+Math.sqrt(h*(d-y)*(d-y)-(y+h)*(g-y)))/(y+h);n<0&&(v=-v),s=this.x0+v;var x=h+d;return v=Math.PI*this.R*(p*x-a*Math.sqrt((y+h)*(h+1)-x*x))/(y+h),e>=0?r=this.y0+v:r=this.y0-v,i.x=s,i.y=r,i}function f4(i){var t,e,n,s,r,o,a,h,l,c,d,g,p;return i.x-=this.x0,i.y-=this.y0,d=Math.PI*this.R,n=i.x/d,s=i.y/d,r=n*n+s*s,o=-Math.abs(s)*(1+r),a=o-2*s*s+n*n,h=-2*o+1+2*s*s+r*r,p=s*s/h+(2*a*a*a/h/h/h-9*o*a/h/h)/27,l=(o-a*a/3/h)/h,c=2*Math.sqrt(-l/3),d=3*p/l/c,Math.abs(d)>1&&(d>=0?d=1:d=-1),g=Math.acos(d)/3,i.y>=0?e=(-c*Math.cos(g+Math.PI/3)-a/3/h)*Math.PI:e=-(-c*Math.cos(g+Math.PI/3)-a/3/h)*Math.PI,Math.abs(n)<kt?t=this.long0:t=Gt(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-s*s)+r*r))/2/n),i.x=t,i.y=e,i}var p4=["Van_der_Grinten_I","VanDerGrinten","vandg"];const g4={init:c4,forward:d4,inverse:f4,names:p4};function m4(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _4(i){var t=i.x,e=i.y,n=Math.sin(i.y),s=Math.cos(i.y),r=Gt(t-this.long0),o,a,h,l,c,d,g,p,y,v,x,b,S,A,O,k,H,W,F,$,V,P,I;return this.sphere?Math.abs(this.sin_p12-1)<=kt?(i.x=this.x0+this.a*(Ct-e)*Math.sin(r),i.y=this.y0-this.a*(Ct-e)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=kt?(i.x=this.x0+this.a*(Ct+e)*Math.sin(r),i.y=this.y0+this.a*(Ct+e)*Math.cos(r),i):(W=this.sin_p12*n+this.cos_p12*s*Math.cos(r),k=Math.acos(W),H=k?k/Math.sin(k):1,i.x=this.x0+this.a*H*s*Math.sin(r),i.y=this.y0+this.a*H*(this.cos_p12*n-this.sin_p12*s*Math.cos(r)),i):(o=Uh(this.es),a=zh(this.es),h=Wh(this.es),l=Yh(this.es),Math.abs(this.sin_p12-1)<=kt?(c=this.a*rn(o,a,h,l,Ct),d=this.a*rn(o,a,h,l,e),i.x=this.x0+(c-d)*Math.sin(r),i.y=this.y0-(c-d)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=kt?(c=this.a*rn(o,a,h,l,Ct),d=this.a*rn(o,a,h,l,e),i.x=this.x0+(c+d)*Math.sin(r),i.y=this.y0+(c+d)*Math.cos(r),i):(g=n/s,p=da(this.a,this.e,this.sin_p12),y=da(this.a,this.e,n),v=Math.atan((1-this.es)*g+this.es*p*this.sin_p12/(y*s)),x=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(r)),x===0?F=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(x)-Math.PI)<=kt?F=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):F=Math.asin(Math.sin(r)*Math.cos(v)/Math.sin(x)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es),A=b*S,O=S*S,$=F*F,V=$*F,P=V*F,I=P*F,k=p*F*(1-$*O*(1-O)/6+V/8*A*(1-2*O)+P/120*(O*(4-7*O)-3*b*b*(1-7*O))-I/48*A),i.x=this.x0+k*Math.sin(x),i.y=this.y0+k*Math.cos(x),i))}function y4(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,s,r,o,a,h,l,c,d,g,p,y,v,x,b,S,A,O,k,H,W,F;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*Ct*this.a?void 0:(e=t/this.a,n=Math.sin(e),s=Math.cos(e),r=this.long0,Math.abs(t)<=kt?o=this.lat0:(o=Ar(s*this.sin_p12+i.y*n*this.cos_p12/t),a=Math.abs(this.lat0)-Ct,Math.abs(a)<=kt?this.lat0>=0?r=Gt(this.long0+Math.atan2(i.x,-i.y)):r=Gt(this.long0-Math.atan2(-i.x,i.y)):r=Gt(this.long0+Math.atan2(i.x*n,t*this.cos_p12*s-i.y*this.sin_p12*n))),i.x=r,i.y=o,i)):(h=Uh(this.es),l=zh(this.es),c=Wh(this.es),d=Yh(this.es),Math.abs(this.sin_p12-1)<=kt?(g=this.a*rn(h,l,c,d,Ct),t=Math.sqrt(i.x*i.x+i.y*i.y),p=g-t,o=Lu(p/this.a,h,l,c,d),r=Gt(this.long0+Math.atan2(i.x,-1*i.y)),i.x=r,i.y=o,i):Math.abs(this.sin_p12+1)<=kt?(g=this.a*rn(h,l,c,d,Ct),t=Math.sqrt(i.x*i.x+i.y*i.y),p=t-g,o=Lu(p/this.a,h,l,c,d),r=Gt(this.long0+Math.atan2(i.x,i.y)),i.x=r,i.y=o,i):(t=Math.sqrt(i.x*i.x+i.y*i.y),x=Math.atan2(i.x,i.y),y=da(this.a,this.e,this.sin_p12),b=Math.cos(x),S=this.e*this.cos_p12*b,A=-S*S/(1-this.es),O=3*this.es*(1-A)*this.sin_p12*this.cos_p12*b/(1-this.es),k=t/y,H=k-A*(1+A)*Math.pow(k,3)/6-O*(1+3*A)*Math.pow(k,4)/24,W=1-A*H*H/2-k*H*H*H/6,v=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*b),r=Gt(this.long0+Math.asin(Math.sin(x)*Math.sin(H)/Math.cos(v))),F=Math.sin(v),o=Math.atan2((F-this.es*W*this.sin_p12)*Math.tan(v),F*(1-this.es)),i.x=r,i.y=o,i))}var v4=["Azimuthal_Equidistant","aeqd"];const w4={init:m4,forward:_4,inverse:y4,names:v4};function b4(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function x4(i){var t,e,n,s,r,o,a,h,l=i.x,c=i.y;return n=Gt(l-this.long0),t=Math.sin(c),e=Math.cos(c),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*s,r=1,(o>0||Math.abs(o)<=kt)&&(a=this.a*r*e*Math.sin(n),h=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*e*s)),i.x=a,i.y=h,i}function S4(i){var t,e,n,s,r,o,a;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=Ar(t/this.a),n=Math.sin(e),s=Math.cos(e),o=this.long0,Math.abs(t)<=kt?(a=this.lat0,i.x=o,i.y=a,i):(a=Ar(s*this.sin_p14+i.y*n*this.cos_p14/t),r=Math.abs(this.lat0)-Ct,Math.abs(r)<=kt?(this.lat0>=0?o=Gt(this.long0+Math.atan2(i.x,-i.y)):o=Gt(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=Gt(this.long0+Math.atan2(i.x*n,t*this.cos_p14*s-i.y*this.sin_p14*n)),i.x=o,i.y=a,i))}var M4=["ortho"];const C4={init:b4,forward:x4,inverse:S4,names:M4};var hi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},qe={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function E4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ct-Ge/2?this.face=hi.TOP:this.lat0<=-(Ct-Ge/2)?this.face=hi.BOTTOM:Math.abs(this.long0)<=Ge?this.face=hi.FRONT:Math.abs(this.long0)<=Ct+Ge?this.face=this.long0>0?hi.RIGHT:hi.LEFT:this.face=hi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function A4(i){var t={x:0,y:0},e,n,s,r,o,a,h={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,n=i.x,this.face===hi.TOP)r=Ct-e,n>=Ge&&n<=Ct+Ge?(h.value=qe.AREA_0,s=n-Ct):n>Ct+Ge||n<=-(Ct+Ge)?(h.value=qe.AREA_1,s=n>0?n-gi:n+gi):n>-(Ct+Ge)&&n<=-Ge?(h.value=qe.AREA_2,s=n+Ct):(h.value=qe.AREA_3,s=n);else if(this.face===hi.BOTTOM)r=Ct+e,n>=Ge&&n<=Ct+Ge?(h.value=qe.AREA_0,s=-n+Ct):n<Ge&&n>=-Ge?(h.value=qe.AREA_1,s=-n):n<-Ge&&n>=-(Ct+Ge)?(h.value=qe.AREA_2,s=-n-Ct):(h.value=qe.AREA_3,s=n>0?-n+gi:-n-gi);else{var l,c,d,g,p,y,v;this.face===hi.RIGHT?n=pa(n,+Ct):this.face===hi.BACK?n=pa(n,+gi):this.face===hi.LEFT&&(n=pa(n,-Ct)),g=Math.sin(e),p=Math.cos(e),y=Math.sin(n),v=Math.cos(n),l=p*v,c=p*y,d=g,this.face===hi.FRONT?(r=Math.acos(l),s=Nu(r,d,c,h)):this.face===hi.RIGHT?(r=Math.acos(c),s=Nu(r,d,-l,h)):this.face===hi.BACK?(r=Math.acos(-l),s=Nu(r,d,-c,h)):this.face===hi.LEFT?(r=Math.acos(-c),s=Nu(r,d,l,h)):(r=s=0,h.value=qe.AREA_0)}return a=Math.atan(12/gi*(s+Math.acos(Math.sin(s)*Math.cos(Ge))-Ct)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),h.value===qe.AREA_1?a+=Ct:h.value===qe.AREA_2?a+=gi:h.value===qe.AREA_3&&(a+=1.5*gi),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function L4(i){var t={lam:0,phi:0},e,n,s,r,o,a,h,l,c,d={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,n=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?d.value=qe.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(d.value=qe.AREA_1,e-=Ct):i.x<0&&-i.x>=Math.abs(i.y)?(d.value=qe.AREA_2,e=e<0?e+gi:e-gi):(d.value=qe.AREA_3,e+=Ct),c=gi/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(e),r=Math.tan(n),h=1-s*s*r*r*(1-Math.cos(Math.atan(1/Math.cos(a)))),h<-1?h=-1:h>1&&(h=1),this.face===hi.TOP)l=Math.acos(h),t.phi=Ct-l,d.value===qe.AREA_0?t.lam=a+Ct:d.value===qe.AREA_1?t.lam=a<0?a+gi:a-gi:d.value===qe.AREA_2?t.lam=a-Ct:t.lam=a;else if(this.face===hi.BOTTOM)l=Math.acos(h),t.phi=l-Ct,d.value===qe.AREA_0?t.lam=-a+Ct:d.value===qe.AREA_1?t.lam=-a:d.value===qe.AREA_2?t.lam=-a-Ct:t.lam=a<0?-a-gi:-a+gi;else{var g,p,y;g=h,c=g*g,c>=1?y=0:y=Math.sqrt(1-c)*Math.sin(a),c+=y*y,c>=1?p=0:p=Math.sqrt(1-c),d.value===qe.AREA_1?(c=p,p=-y,y=c):d.value===qe.AREA_2?(p=-p,y=-y):d.value===qe.AREA_3&&(c=p,p=y,y=-c),this.face===hi.RIGHT?(c=g,g=-p,p=c):this.face===hi.BACK?(g=-g,p=-p):this.face===hi.LEFT&&(c=g,g=p,p=-c),t.phi=Math.acos(-y)-Ct,t.lam=Math.atan2(p,g),this.face===hi.RIGHT?t.lam=pa(t.lam,-Ct):this.face===hi.BACK?t.lam=pa(t.lam,-gi):this.face===hi.LEFT&&(t.lam=pa(t.lam,+Ct))}if(this.es!==0){var v,x,b;v=t.phi<0?1:0,x=Math.tan(t.phi),b=this.b/Math.sqrt(x*x+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-b*b)/(this.one_minus_f*b)),v&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function Nu(i,t,e,n){var s;return i<kt?(n.value=qe.AREA_0,s=0):(s=Math.atan2(t,e),Math.abs(s)<=Ge?n.value=qe.AREA_0:s>Ge&&s<=Ct+Ge?(n.value=qe.AREA_1,s-=Ct):s>Ct+Ge||s<=-(Ct+Ge)?(n.value=qe.AREA_2,s=s>=0?s-gi:s+gi):(n.value=qe.AREA_3,s+=Ct)),s}function pa(i,t){var e=i+t;return e<-gi?e+=kh:e>+gi&&(e-=kh),e}var N4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const P4={init:E4,forward:A4,inverse:L4,names:N4};var Pf=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Vh=[[-52041700000000004e-34,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],s2=.8487,r2=1.3523,o2=Ss/5,R4=1/o2,ga=18,Pu=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},I4=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function T4(i,t,e,n){for(var s=t;n;--n){var r=i(s);if(s-=r,Math.abs(r)<e)break}return s}function O4(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function F4(i){var t=Gt(i.x-this.long0),e=Math.abs(i.y),n=Math.floor(e*o2);n<0?n=0:n>=ga&&(n=ga-1),e=Ss*(e-R4*n);var s={x:Pu(Pf[n],e)*t,y:Pu(Vh[n],e)};return i.y<0&&(s.y=-s.y),s.x=s.x*this.a*s2+this.x0,s.y=s.y*this.a*r2+this.y0,s}function k4(i){var t={x:(i.x-this.x0)/(this.a*s2),y:Math.abs(i.y-this.y0)/(this.a*r2)};if(t.y>=1)t.x/=Pf[ga][0],t.y=i.y<0?-Ct:Ct;else{var e=Math.floor(t.y*ga);for(e<0?e=0:e>=ga&&(e=ga-1);;)if(Vh[e][0]>t.y)--e;else if(Vh[e+1][0]<=t.y)++e;else break;var n=Vh[e],s=5*(t.y-n[0])/(Vh[e+1][0]-n[0]);s=T4(function(r){return(Pu(n,r)-t.y)/I4(n,r)},s,kt,100),t.x/=Pu(Pf[e],s),t.y=(5*e+s)*qi,i.y<0&&(t.y=-t.y)}return t.x=Gt(t.x+this.long0),t}var D4=["Robinson","robin"];const j4={init:O4,forward:F4,inverse:k4,names:D4};function B4(){this.name="geocent"}function G4(i){var t=Tg(i,this.es,this.a);return t}function q4(i){var t=Og(i,this.es,this.a,this.b);return t}var U4=["Geocentric","geocentric","geocent","Geocent"];const z4={init:B4,forward:G4,inverse:q4,names:U4};var Zi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Xh={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function W4(){if(Object.keys(Xh).forEach((function(e){if(typeof this[e]>"u")this[e]=Xh[e].def;else{if(Xh[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Xh[e].num&&(this[e]=parseFloat(this[e]))}Xh[e].degrees&&(this[e]=this[e]*qi)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ct)<kt?this.mode=this.lat0<0?Zi.S_POLE:Zi.N_POLE:Math.abs(this.lat0)<kt?this.mode=Zi.EQUIT:(this.mode=Zi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function Y4(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),s,r;switch(this.mode){case Zi.OBLIQ:r=this.sinph0*t+this.cosph0*e*n;break;case Zi.EQUIT:r=e*n;break;case Zi.S_POLE:r=-t;break;case Zi.N_POLE:r=t;break}switch(r=this.pn1/(this.p-r),s=r*e*Math.sin(i.x),this.mode){case Zi.OBLIQ:r*=this.cosph0*t-this.sinph0*e*n;break;case Zi.EQUIT:r*=t;break;case Zi.N_POLE:r*=-(e*n);break;case Zi.S_POLE:r*=e*n;break}var o,a;return o=r*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-r*this.sg)*this.cw*a,r=o*a,i.x=s*this.a,i.y=r*this.a,i}function V4(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,n,s;s=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*s,n=this.pn1*i.y*this.cw*s,i.x=e*this.cg+n*this.sg,i.y=n*this.cg-e*this.sg;var r=Qn(i.x,i.y);if(Math.abs(r)<kt)t.x=0,t.y=i.y;else{var o,a;switch(a=1-r*r*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Zi.OBLIQ:t.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/r),i.y=(o-this.sinph0*Math.sin(t.y))*r,i.x*=a*this.cosph0;break;case Zi.EQUIT:t.y=Math.asin(i.y*a/r),i.y=o*r,i.x*=a;break;case Zi.N_POLE:t.y=Math.asin(o),i.y=-i.y;break;case Zi.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var X4=["Tilted_Perspective","tpers"];const H4={init:W4,forward:Y4,inverse:V4,names:X4};function Z4(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function K4(i){var t=i.x,e=i.y,n,s,r,o;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var a=this.radius_p/Qn(this.radius_p*Math.cos(e),Math.sin(e));if(s=a*Math.cos(t)*Math.cos(e),r=a*Math.sin(t)*Math.cos(e),o=a*Math.sin(e),(this.radius_g-s)*s-r*r-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;n=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/Qn(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(r/n),i.y=this.radius_g_1*Math.atan(o/Qn(r,n)))}else this.shape==="sphere"&&(n=Math.cos(e),s=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),n=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/Qn(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(r/n),i.y=this.radius_g_1*Math.atan(o/Qn(r,n))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function J4(i){var t=-1,e=0,n=0,s,r,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Qn(1,n)):(e=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Qn(1,e));var h=n/this.radius_p;if(s=e*e+h*h+t*t,r=2*this.radius_g*t,o=r*r-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-r-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,e*=a,n*=a,i.x=Math.atan2(e,t),i.y=Math.atan(n*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+n*n)):(e=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),s=e*e+n*n+t*t,r=2*this.radius_g*t,o=r*r-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-r-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,e*=a,n*=a,i.x=Math.atan2(e,t),i.y=Math.atan(n*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var Q4=["Geostationary Satellite View","Geostationary_Satellite","geos"];const $4={init:Z4,forward:K4,inverse:J4,names:Q4};function tM(i){i.Proj.projections.add(Eu),i.Proj.projections.add(Au),i.Proj.projections.add(o3),i.Proj.projections.add(m3),i.Proj.projections.add(x3),i.Proj.projections.add(A3),i.Proj.projections.add(T3),i.Proj.projections.add(j3),i.Proj.projections.add(z3),i.Proj.projections.add(H3),i.Proj.projections.add(cS),i.Proj.projections.add(_S),i.Proj.projections.add(xS),i.Proj.projections.add(LS),i.Proj.projections.add(TS),i.Proj.projections.add(jS),i.Proj.projections.add(zS),i.Proj.projections.add(HS),i.Proj.projections.add(t4),i.Proj.projections.add(r4),i.Proj.projections.add(u4),i.Proj.projections.add(g4),i.Proj.projections.add(w4),i.Proj.projections.add(C4),i.Proj.projections.add(P4),i.Proj.projections.add(j4),i.Proj.projections.add(z4),i.Proj.projections.add(H4),i.Proj.projections.add($4)}pn.defaultDatum="WGS84",pn.Proj=Es,pn.WGS84=new pn.Proj("WGS84"),pn.Point=ua,pn.toPoint=jg,pn.defs=sn,pn.nadgrid=hx,pn.transform=Mu,pn.mgrs=Mx,pn.version="__VERSION__",tM(pn);let eM=null;function iM(i){eM=i;const t=Object.keys(i.defs),e=t.length;let n,s;for(n=0;n<e;++n){const r=t[n];if(!Me(r)){const o=i.defs(r);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),kp(new $c({code:r,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(n=0;n<e;++n){const r=t[n],o=Me(r);for(s=0;s<e;++s){const a=t[s],h=Me(a);if(!Ep(r,a))if(i.defs[r]===i.defs[a])od([o,h]);else{const l=i(r,a);y_(o,h,Gp(o,h,l.forward),Gp(h,o,l.inverse))}}}}const Rf="projection",a2="coordinateFormat";class nM extends Zo{constructor(t){t=t||{};const e=document.createElement("div");e.className=t.className!==void 0?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(Rf,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=t.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=t.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(a2)}getProjection(){return this.get(Rf)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(Ce(e,Sh.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Ce(e,Sh.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(a2,t)}setProjection(t){this.set(Rf,Me(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=zl(this.mapProjection_,s):this.transform_=rd}const n=this.getMap().getCoordinateFromPixelInternal(t);if(n){if(this.transform_(n,n),this.wrapX_){const r=this.getProjection()||this.mapProjection_;id(n,r)}const s=this.getCoordinateFormat();s?e=s(n):e=n.toString()}}(!this.renderedHTML_||e!==this.renderedHTML_)&&(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}const sM=nM,Ki={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class rM extends Vn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+ny,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ki.ELEMENT,this.handleElementChanged),this.addChangeListener(Ki.MAP,this.handleMapChanged),this.addChangeListener(Ki.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ki.POSITION,this.handlePositionChanged),this.addChangeListener(Ki.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Ki.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ki.MAP)||null}getOffset(){return this.get(Ki.OFFSET)}getPosition(){return this.get(Ki.POSITION)}getPositioning(){return this.get(Ki.POSITIONING)}handleElementChanged(){u1(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Ql(this.element),Ze(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Ce(t,zs.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Ki.ELEMENT,t)}setMap(t){this.set(Ki.MAP,t)}setOffset(t){this.set(Ki.OFFSET,t)}setPosition(t){this.set(Ki.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Ki.POSITION))return;const n=this.getRect(e.getTargetElement(),e.getSize()),s=this.getElement(),r=this.getRect(s,[ry(s),oy(s)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!vs(n,r)){const a=r[0]-n[0],h=n[2]-r[2],l=r[1]-n[1],c=n[3]-r[3],d=[0,0];if(a<0?d[0]=a-o:h<0&&(d[0]=Math.abs(h)+o),l<0?d[1]=l-o:c<0&&(d[1]=Math.abs(c)+o),d[0]!==0||d[1]!==0){const g=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(g);if(!p)return;const y=[p[0]+d[0],p[1]+d[1]],v=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:v.duration,easing:v.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),s=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[s,r,s+e[0],r+e[1]]}setPositioning(t){this.set(Ki.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const n=t.getPixelFromCoordinate(e),s=t.getSize();this.updateRenderedPosition(n,s)}updateRenderedPosition(t,e){const n=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+s[0])+"px",a=Math.round(t[1]+s[1])+"px";let h="0%",l="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?h="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(h="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?l="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(l="-50%");const c=`translate(${h}, ${l}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c)}getOptions(){return this.options}}const h2=rM;class oM extends _g{constructor(t){t=t||{};const e=Object.assign({},t.params),n="TRANSPARENT"in e?e.TRANSPARENT:!0;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Mn(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,s){const r=Me(n),o=this.getProjection();let a=this.getTileGrid();a||(a=this.getTileGridForProjection(r));const h=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,h);if(a.getResolutions().length<=l[0])return;let c=a.getResolution(l[0]),d=a.getTileCoordExtent(l,this.tmpExtent_),g=dn(a.getTileSize(l[0]),this.tmpSize);const p=this.gutter_;p!==0&&(g=v1(g,p,this.tmpSize),d=hh(d,c*p,d)),o&&o!==r&&(c=Ch(o,r,t,c),d=ld(d,r,o),t=hd(t,r,o));const y={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(y,this.params_,s);const v=Math.floor((t[0]-d[0])/c),x=Math.floor((d[3]-t[1])/c);return y[this.v13_?"I":"X"]=v,y[this.v13_?"J":"Y"]=x,this.getRequestUrl_(l,g,d,1,o||r,y)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const s=this.params_.LAYERS;if(!(!Array.isArray(s)||s.length===1))return;n.LAYER=s}if(t!==void 0){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;n.SCALE=t*s/r}return Object.assign(n,e),ra(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,s,r,o){const a=this.urls;if(!a)return;if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),s!=1)switch(this.serverType_){case"geoserver":const d=90*s+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+d:o.FORMAT_OPTIONS="dpi:"+d;break;case"mapserver":o.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":o.DPI=90*s;break;default:ce(!1,52);break}const h=r.getAxisOrientation(),l=n;if(this.v13_&&h.substr(0,2)=="ne"){let d;d=n[0],l[0]=n[1],l[1]=d,d=n[2],l[2]=n[3],l[3]=d}o.BBOX=l.join(",");let c;if(a.length==1)c=a[0];else{const d=io(cg(t),a.length);c=a[d]}return ra(c,o)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||Sr;this.v13_=Ap(t,"1.3")>=0}tileUrlFunction(t,e,n){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(n)),s.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const r=s.getResolution(t[0]);let o=s.getTileCoordExtent(t,this.tmpExtent_),a=dn(s.getTileSize(t[0]),this.tmpSize);const h=this.gutter_;h!==0&&(a=v1(a,h,this.tmpSize),o=hh(o,r*h,o)),e!=1&&(a=b1(a,e,this.tmpSize));const l={SERVICE:"WMS",VERSION:Sr,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(l,this.params_),this.getRequestUrl_(t,a,o,e,n,l)}}const aM=oM;class hM extends fg{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}function lM(i,t,e){const n=[],s=[],r=[],o=[],a=[];e=e!==void 0?e:[];const h="SupportedCRS",l="TileMatrix",c="Identifier",d="ScaleDenominator",g="TopLeftCorner",p="TileWidth",y="TileHeight",v=i[h],x=Me(v),b=x.getMetersPerUnit(),S=x.getAxisOrientation().substr(0,2)=="ne";return i[l].sort(function(A,O){return O[d]-A[d]}),i[l].forEach(function(A){let O;if(e.length>0?O=e.find(function(k){return A[c]==k[l]?!0:A[c].includes(":")?!1:i[c]+":"+A[c]===k[l]}):O=!0,O){s.push(A[c]);const k=A[d]*28e-5/b,H=A[p],W=A[y];S?r.push([A[g][1],A[g][0]]):r.push(A[g]),n.push(k),o.push(H==W?H:[H,W]),a.push([A.MatrixWidth,A.MatrixHeight])}}),new hM({extent:t,origins:r,resolutions:n,matrixIds:s,tileSizes:o,sizes:a})}class uM extends _g{constructor(t){const e=t.requestEncoding!==void 0?t.requestEncoding:"KVP",n=t.tileGrid;let s=t.urls;s===void 0&&t.url!==void 0&&(s=mg(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection}),this.version_=t.version!==void 0?t.version:"1.0.0",this.format_=t.format!==void 0?t.format:"image/jpeg",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),s&&s.length>0&&(this.tileUrlFunction=_f(s.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join(`
`);this.setTileUrlFunction(_f(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e=="KVP"?ra(t,n):t.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const s=this.tileGrid,r=this.dimensions_;return function(o,a,h){if(!o)return;const l={TileMatrix:s.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(l,r);let c=t;return e=="KVP"?c=ra(c,l):c=c.replace(/\{(\w+?)\}/g,function(d,g){return l[g]}),c}}}const cM=uM;function dM(i,t){const e=i.Contents.Layer.find(function(V){return V.Identifier==t.layer});if(!e)return null;const n=i.Contents.TileMatrixSet;let s;e.TileMatrixSetLink.length>1?"projection"in t?s=e.TileMatrixSetLink.findIndex(function(V){const P=n.find(function(G){return G.Identifier==V.TileMatrixSet}).SupportedCRS,I=Me(P),U=Me(t.projection);return I&&U?Fn(I,U):P==t.projection}):s=e.TileMatrixSetLink.findIndex(function(V){return V.TileMatrixSet==t.matrixSet}):s=0,s<0&&(s=0);const r=e.TileMatrixSetLink[s].TileMatrixSet,o=e.TileMatrixSetLink[s].TileMatrixSetLimits;let a=e.Format[0];"format"in t&&(a=t.format),s=e.Style.findIndex(function(V){return"style"in t?V.Title==t.style:V.isDefault}),s<0&&(s=0);const h=e.Style[s].Identifier,l={};"Dimension"in e&&e.Dimension.forEach(function(V,P,I){const U=V.Identifier;let G=V.Default;G===void 0&&(G=V.Value[0]),l[U]=G});const c=i.Contents.TileMatrixSet.find(function(V){return V.Identifier==r});let d;const g=c.SupportedCRS;if(g&&(d=Me(g)),"projection"in t){const V=Me(t.projection);V&&(!d||Fn(V,d))&&(d=V)}let p=!1;const y=d.getAxisOrientation().substr(0,2)=="ne";let v=c.TileMatrix[0],x={MinTileCol:0,MinTileRow:0,MaxTileCol:v.MatrixWidth-1,MaxTileRow:v.MatrixHeight-1};if(o){x=o[o.length-1];const V=c.TileMatrix.find(P=>P.Identifier===x.TileMatrix||c.Identifier+":"+P.Identifier===x.TileMatrix);V&&(v=V)}const b=v.ScaleDenominator*28e-5/d.getMetersPerUnit(),S=y?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,A=v.TileWidth*b,O=v.TileHeight*b;let k=c.BoundingBox;k&&y&&(k=[k[1],k[0],k[3],k[2]]);let H=[S[0]+A*x.MinTileCol,S[1]-O*(1+x.MaxTileRow),S[0]+A*(1+x.MaxTileCol),S[1]-O*x.MinTileRow];if(k!==void 0&&!vs(k,H)){const V=e.WGS84BoundingBox,P=Me("EPSG:4326").getExtent();if(H=k,V)p=V[0]===P[0]&&V[2]===P[2];else{const I=ld(k,c.SupportedCRS,"EPSG:4326");p=I[0]-1e-10<=P[0]&&I[2]+1e-10>=P[2]}}const W=lM(c,H,o),F=[];let $=t.requestEncoding;if($=$!==void 0?$:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const V=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let P=0,I=V.length;P<I;++P)if(V[P].Constraint){const U=V[P].Constraint.find(function(G){return G.name=="GetEncoding"}).AllowedValues.Value;if($===""&&($=U[0]),$==="KVP")U.includes("KVP")&&F.push(V[P].href);else break}else V[P].href&&($="KVP",F.push(V[P].href))}return F.length===0&&($="REST",e.ResourceURL.forEach(function(V){V.resourceType==="tile"&&(a=V.format,F.push(V.template))})),{urls:F,layer:t.layer,matrixSet:r,format:a,projection:d,requestEncoding:$,tileGrid:W,style:h,dimensions:l,wrapX:p,crossOrigin:t.crossOrigin}}const l2=[2116.6709,1058.33545,529.167725,264.5838625,132.29193125,66.145965625,26.45838625,13.229193125,6.6145965625,2.645838625000001,1.3229193125000005,.5291677250021167,.26458386250105836,.13229193125052918,.06614596562526459],fM=[8e6,4e6,2e6,1e6,5e5,25e4,1e5,5e4,25e3,1e4,5e3,2e3,1e3,500,250];class pM extends Zo{constructor(e){const n=document.createElement("div");n.classList.add("layers-control-container");super({element:n});y5(this,"_layers");this._layers=e;const s=setInterval(()=>{this.getMap()&&(clearInterval(s),n.addEventListener("mouseenter",this.handleMouseEnter),n.addEventListener("mouseleave",this.handleMouseLeave),this.initLayers(n))},100)}initLayers(e){const n=document.createElement("div");n.classList.add("layers-control","layers-icon");const s=document.createElement("div");s.classList.add("layers-control","hidden"),e.appendChild(s),e.appendChild(n);for(const r of Object.keys(this._layers)){const o=this._layers[r],a=document.createElement("div");a.classList.add("layers-control-item");const h=document.createElement("label"),l=document.createElement("input");l.type="checkbox",o.isVisible()&&l.setAttribute("checked","checked"),h.appendChild(l),h.innerHTML+=r,a.appendChild(h),s.appendChild(a),a.addEventListener("change",c=>{const d=c.target;o.setVisible(!o.isVisible()),d.checked=o.isVisible()})}}handleMouseEnter(e){const n=document.querySelector(".layers-control"),s=document.querySelector(".layers-icon");n&&n.classList.remove("hidden"),s&&s.classList.add("hidden")}handleMouseLeave(e){const n=document.querySelector(".layers-control"),s=document.querySelector(".layers-icon");n&&n.classList.add("hidden"),s&&s.classList.remove("hidden")}}const gM="modulepreload",mM=function(i){return"/OL/"+i},u2={},If=function(i,t,e){if(!t||t.length===0)return i();const n=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=mM(s),s in u2)return;u2[s]=!0;const r=s.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(e)for(let h=n.length-1;h>=0;h--){const l=n[h];if(l.href===s&&(!r||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":gM,r||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),r)return new Promise((h,l)=>{a.addEventListener("load",h),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>i()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};je=function(i){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(i)};var on=Uint8Array,an=Uint16Array,Hh=Uint32Array,Ru=new on([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Iu=new on([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tf=new on([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c2=function(i,t){for(var e=new an(31),n=0;n<31;++n)e[n]=t+=1<<i[n-1];for(var s=new Hh(e[30]),n=1;n<30;++n)for(var r=e[n];r<e[n+1];++r)s[r]=r-e[n]<<5|n;return[e,s]},d2=c2(Ru,2),f2=d2[0],Of=d2[1];f2[28]=258,Of[258]=28;for(var p2=c2(Iu,0),_M=p2[0],g2=p2[1],Ff=new an(32768),ni=0;ni<32768;++ni){var Lr=(ni&43690)>>>1|(ni&21845)<<1;Lr=(Lr&52428)>>>2|(Lr&13107)<<2,Lr=(Lr&61680)>>>4|(Lr&3855)<<4,Ff[ni]=((Lr&65280)>>>8|(Lr&255)<<8)>>>1}for(var As=function(i,t,e){for(var n=i.length,s=0,r=new an(t);s<n;++s)++r[i[s]-1];var o=new an(t);for(s=0;s<t;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(e){a=new an(1<<t);var h=15-t;for(s=0;s<n;++s)if(i[s])for(var l=s<<4|i[s],c=t-i[s],d=o[i[s]-1]++<<c,g=d|(1<<c)-1;d<=g;++d)a[Ff[d]>>>h]=l}else for(a=new an(n),s=0;s<n;++s)a[s]=Ff[o[i[s]-1]++]>>>15-i[s];return a},Nr=new on(288),ni=0;ni<144;++ni)Nr[ni]=8;for(var ni=144;ni<256;++ni)Nr[ni]=9;for(var ni=256;ni<280;++ni)Nr[ni]=7;for(var ni=280;ni<288;++ni)Nr[ni]=8;for(var Zh=new on(32),ni=0;ni<32;++ni)Zh[ni]=5;var yM=As(Nr,9,0),vM=As(Nr,9,1),wM=As(Zh,5,0),bM=As(Zh,5,1),kf=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},$n=function(i,t,e){var n=t/8>>0;return(i[n]|i[n+1]<<8)>>>(t&7)&e},Df=function(i,t){var e=t/8>>0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>>(t&7)},jf=function(i){return(i/8>>0)+(i&7&&1)},m2=function(i,t,e){(t==null||t<0)&&(t=0),(e==null||e>i.length)&&(e=i.length);var n=new(i instanceof an?an:i instanceof Hh?Hh:on)(e-t);return n.set(i.subarray(t,e)),n},xM=function(i,t,e){var n=i.length,s=!t||e,r=!e||e.i;e||(e={}),t||(t=new on(n*3));var o=function(it){var ot=t.length;if(it>ot){var at=new on(Math.max(ot*2,it));at.set(t),t=at}},a=e.f||0,h=e.p||0,l=e.b||0,c=e.l,d=e.d,g=e.m,p=e.n,y=n*8;do{if(!c){e.f=a=$n(i,h,1);var v=$n(i,h+1,3);if(h+=3,v)if(v==1)c=vM,d=bM,g=9,p=5;else if(v==2){var x=$n(i,h,31)+257,b=$n(i,h+10,15)+4,S=x+$n(i,h+5,31)+1;h+=14;for(var A=new on(S),O=new on(19),k=0;k<b;++k)O[Tf[k]]=$n(i,h+k*3,7);h+=b*3;var H=kf(O),W=(1<<H)-1;if(!r&&h+S*(H+7)>y)break;for(var F=As(O,H,1),k=0;k<S;){var $=F[$n(i,h,W)];h+=$&15;var V=$>>>4;if(V<16)A[k++]=V;else{var P=0,I=0;for(V==16?(I=3+$n(i,h,3),h+=2,P=A[k-1]):V==17?(I=3+$n(i,h,7),h+=3):V==18&&(I=11+$n(i,h,127),h+=7);I--;)A[k++]=P}}var U=A.subarray(0,x),G=A.subarray(x);g=kf(U),p=kf(G),c=As(U,g,1),d=As(G,p,1)}else throw"invalid block type";else{var V=jf(h)+4,nt=i[V-4]|i[V-3]<<8,tt=V+nt;if(tt>n){if(r)throw"unexpected EOF";break}s&&o(l+nt),t.set(i.subarray(V,tt),l),e.b=l+=nt,e.p=h=tt*8;continue}if(h>y)throw"unexpected EOF"}s&&o(l+131072);for(var Q=(1<<g)-1,J=(1<<p)-1,dt=g+p+18;r||h+dt<y;){var P=c[Df(i,h)&Q],ct=P>>>4;if(h+=P&15,h>y)throw"unexpected EOF";if(!P)throw"invalid length/literal";if(ct<256)t[l++]=ct;else if(ct==256){c=null;break}else{var Et=ct-254;if(ct>264){var k=ct-257,M=Ru[k];Et=$n(i,h,(1<<M)-1)+f2[k],h+=M}var j=d[Df(i,h)&J],B=j>>>4;if(!j)throw"invalid distance";h+=j&15;var G=_M[B];if(B>3){var M=Iu[B];G+=Df(i,h)&(1<<M)-1,h+=M}if(h>y)throw"unexpected EOF";s&&o(l+131072);for(var Y=l+Et;l<Y;l+=4)t[l]=t[l-G],t[l+1]=t[l+1-G],t[l+2]=t[l+2-G],t[l+3]=t[l+3-G];l=Y}}e.l=c,e.p=h,e.b=l,c&&(a=1,e.m=g,e.d=d,e.n=p)}while(!a);return l==t.length?t:m2(t,0,l)},Xs=function(i,t,e){e<<=t&7;var n=t/8>>0;i[n]|=e,i[n+1]|=e>>>8},Kh=function(i,t,e){e<<=t&7;var n=t/8>>0;i[n]|=e,i[n+1]|=e>>>8,i[n+2]|=e>>>16},Bf=function(i,t){for(var e=[],n=0;n<i.length;++n)i[n]&&e.push({s:n,f:i[n]});var s=e.length,r=e.slice();if(!s)return[new on(0),0];if(s==1){var o=new on(e[0].s+1);return o[e[0].s]=1,[o,1]}e.sort(function(k,H){return k.f-H.f}),e.push({s:-1,f:25001});var a=e[0],h=e[1],l=0,c=1,d=2;for(e[0]={s:-1,f:a.f+h.f,l:a,r:h};c!=s-1;)a=e[e[l].f<e[d].f?l++:d++],h=e[l!=c&&e[l].f<e[d].f?l++:d++],e[c++]={s:-1,f:a.f+h.f,l:a,r:h};for(var g=r[0].s,n=1;n<s;++n)r[n].s>g&&(g=r[n].s);var p=new an(g+1),y=Gf(e[c-1],p,0);if(y>t){var n=0,v=0,x=y-t,b=1<<x;for(r.sort(function(H,W){return p[W.s]-p[H.s]||H.f-W.f});n<s;++n){var S=r[n].s;if(p[S]>t)v+=b-(1<<y-p[S]),p[S]=t;else break}for(v>>>=x;v>0;){var A=r[n].s;p[A]<t?v-=1<<t-p[A]++-1:++n}for(;n>=0&&v;--n){var O=r[n].s;p[O]==t&&(--p[O],++v)}y=t}return[new on(p),y]},Gf=function(i,t,e){return i.s==-1?Math.max(Gf(i.l,t,e+1),Gf(i.r,t,e+1)):t[i.s]=e},_2=function(i){for(var t=i.length;t&&!i[--t];);for(var e=new an(++t),n=0,s=i[0],r=1,o=function(h){e[n++]=h},a=1;a<=t;++a)if(i[a]==s&&a!=t)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=i[a]}return[e.subarray(0,n),t]},Jh=function(i,t){for(var e=0,n=0;n<t.length;++n)e+=i[n]*t[n];return e},Tu=function(i,t,e){var n=e.length,s=jf(t+2);i[s]=n&255,i[s+1]=n>>>8,i[s+2]=i[s]^255,i[s+3]=i[s+1]^255;for(var r=0;r<n;++r)i[s+r+4]=e[r];return(s+4+n)*8},y2=function(i,t,e,n,s,r,o,a,h,l,c){Xs(t,c++,e),++s[256];for(var d=Bf(s,15),g=d[0],p=d[1],y=Bf(r,15),v=y[0],x=y[1],b=_2(g),S=b[0],A=b[1],O=_2(v),k=O[0],H=O[1],W=new an(19),F=0;F<S.length;++F)W[S[F]&31]++;for(var F=0;F<k.length;++F)W[k[F]&31]++;for(var $=Bf(W,7),V=$[0],P=$[1],I=19;I>4&&!V[Tf[I-1]];--I);var U=l+5<<3,G=Jh(s,Nr)+Jh(r,Zh)+o,nt=Jh(s,g)+Jh(r,v)+o+14+3*I+Jh(W,V)+(2*W[16]+3*W[17]+7*W[18]);if(U<=G&&U<=nt)return Tu(t,c,i.subarray(h,h+l));var tt,Q,J,dt;if(Xs(t,c,1+(nt<G)),c+=2,nt<G){tt=As(g,p,0),Q=g,J=As(v,x,0),dt=v;var ct=As(V,P,0);Xs(t,c,A-257),Xs(t,c+5,H-1),Xs(t,c+10,I-4),c+=14;for(var F=0;F<I;++F)Xs(t,c+3*F,V[Tf[F]]);c+=3*I;for(var Et=[S,k],M=0;M<2;++M)for(var j=Et[M],F=0;F<j.length;++F){var B=j[F]&31;Xs(t,c,ct[B]),c+=V[B],B>15&&(Xs(t,c,j[F]>>>5&127),c+=j[F]>>>12)}}else tt=yM,Q=Nr,J=wM,dt=Zh;for(var F=0;F<a;++F)if(n[F]>255){var B=n[F]>>>18&31;Kh(t,c,tt[B+257]),c+=Q[B+257],B>7&&(Xs(t,c,n[F]>>>23&31),c+=Ru[B]);var Y=n[F]&31;Kh(t,c,J[Y]),c+=dt[Y],Y>3&&(Kh(t,c,n[F]>>>5&8191),c+=Iu[Y])}else Kh(t,c,tt[n[F]]),c+=Q[n[F]];return Kh(t,c,tt[256]),c+Q[256]},SM=new Hh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MM=new on(0),CM=function(i,t,e,n,s,r){var o=i.length,a=new on(n+o+5*(1+Math.floor(o/7e3))+s),h=a.subarray(n,a.length-s),l=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?l=Tu(h,l,i.subarray(c,d)):(h[c]=r,l=Tu(h,l,i.subarray(c,o)))}else{for(var g=SM[t-1],p=g>>>13,y=g&8191,v=(1<<e)-1,x=new an(32768),b=new an(v+1),S=Math.ceil(e/3),A=2*S,O=function(Xt){return(i[Xt]^i[Xt+1]<<S^i[Xt+2]<<A)&v},k=new Hh(25e3),H=new an(288),W=new an(32),F=0,$=0,c=0,V=0,P=0,I=0;c<o;++c){var U=O(c),G=c&32767,nt=b[U];if(x[G]=nt,b[U]=G,P<=c){var tt=o-c;if((F>7e3||V>24576)&&tt>423){l=y2(i,h,0,k,H,W,$,V,I,c-I,l),V=F=$=0,I=c;for(var Q=0;Q<286;++Q)H[Q]=0;for(var Q=0;Q<30;++Q)W[Q]=0}var J=2,dt=0,ct=y,Et=G-nt&32767;if(tt>2&&U==O(c-Et))for(var M=Math.min(p,tt)-1,j=Math.min(32767,c),B=Math.min(258,tt);Et<=j&&--ct&&G!=nt;){if(i[c+J]==i[c+J-Et]){for(var Y=0;Y<B&&i[c+Y]==i[c+Y-Et];++Y);if(Y>J){if(J=Y,dt=Et,Y>M)break;for(var it=Math.min(Et,Y-2),ot=0,Q=0;Q<it;++Q){var at=c-Et+Q+32768&32767,ut=x[at],At=at-ut+32768&32767;At>ot&&(ot=At,nt=at)}}}G=nt,nt=x[G],Et+=G-nt+32768&32767}if(dt){k[V++]=268435456|Of[J]<<18|g2[dt];var Mt=Of[J]&31,Tt=g2[dt]&31;$+=Ru[Mt]+Iu[Tt],++H[257+Mt],++W[Tt],P=c+J,++F}else k[V++]=i[c],++H[i[c]]}}l=y2(i,h,r,k,H,W,$,V,I,c-I,l),r||(l=Tu(h,l,MM))}return m2(a,0,n+jf(l)+s)},EM=function(){var i=1,t=0;return{p:function(e){for(var n=i,s=t,r=e.length,o=0;o!=r;){for(var a=Math.min(o+5552,r);o<a;++o)n+=e[o],s+=n;n%=65521,s%=65521}i=n,t=s},d:function(){return(i>>>8<<16|(t&255)<<8|t>>>8)+((i&255)<<23)*2}}},AM=function(i,t,e,n,s){return CM(i,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+t.mem,e,n,!s)},LM=function(i,t,e){for(;e;++t)i[t]=e,e>>>=8},NM=function(i,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;i[0]=120,i[1]=n<<6|(n?32-2*n:1)},PM=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function qf(i,t){t===void 0&&(t={});var e=EM();e.p(i);var n=AM(i,t,2,4);return NM(n,t),LM(n,n.length-4,e.d()),n}function RM(i,t){return xM((PM(i),i.subarray(2,-4)),t)}var se=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Uf(){se.console&&typeof se.console.log=="function"&&se.console.log.apply(se.console,arguments)}var Ke={log:Uf,warn:function(i){se.console&&(typeof se.console.warn=="function"?se.console.warn.apply(se.console,arguments):Uf.call(null,arguments))},error:function(i){se.console&&(typeof se.console.error=="function"?se.console.error.apply(se.console,arguments):Uf(i))}};function zf(i,t,e){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){mo(n.response,t,e)},n.onerror=function(){Ke.error("could not download file")},n.send()}function v2(i){var t=new XMLHttpRequest;t.open("HEAD",i,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ou(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(t)}}var Qh,Wf,mo=se.saveAs||((typeof window>"u"?"undefined":je(window))!=="object"||window!==se?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,t,e){var n=se.URL||se.webkitURL,s=document.createElement("a");t=t||i.name||"download",s.download=t,s.rel="noopener",typeof i=="string"?(s.href=i,s.origin!==location.origin?v2(s.href)?zf(i,t,e):Ou(s,s.target="_blank"):Ou(s)):(s.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Ou(s)},0))}:"msSaveOrOpenBlob"in navigator?function(i,t,e){if(t=t||i.name||"download",typeof i=="string")if(v2(i))zf(i,t,e);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){Ou(n)})}else navigator.msSaveOrOpenBlob(function(s,r){return r===void 0?r={autoBom:!1}:je(r)!=="object"&&(Ke.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob([String.fromCharCode(65279),s],{type:s.type}):s}(i,e),t)}:function(i,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return zf(i,t,e);var s=i.type==="application/octet-stream",r=/constructor/i.test(se.HTMLElement)||se.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&r)&&(typeof FileReader>"u"?"undefined":je(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=c:location=c,n=null},a.readAsDataURL(i)}else{var h=se.URL||se.webkitURL,l=h.createObjectURL(i);n?n.location=l:location.href=l,n=null,setTimeout(function(){h.revokeObjectURL(l)},4e4)}});function w2(i){var t;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<e.length;n++){var s=e[n].re,r=e[n].process,o=s.exec(i);o&&(t=r(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),h=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),h.length==1&&(h="0"+h),l.length==1&&(l="0"+l),"#"+a+h+l}}function Yf(i,t){var e=i[0],n=i[1],s=i[2],r=i[3];e=Ji(e,n,s,r,t[0],7,-680876936),r=Ji(r,e,n,s,t[1],12,-389564586),s=Ji(s,r,e,n,t[2],17,606105819),n=Ji(n,s,r,e,t[3],22,-1044525330),e=Ji(e,n,s,r,t[4],7,-176418897),r=Ji(r,e,n,s,t[5],12,1200080426),s=Ji(s,r,e,n,t[6],17,-1473231341),n=Ji(n,s,r,e,t[7],22,-45705983),e=Ji(e,n,s,r,t[8],7,1770035416),r=Ji(r,e,n,s,t[9],12,-1958414417),s=Ji(s,r,e,n,t[10],17,-42063),n=Ji(n,s,r,e,t[11],22,-1990404162),e=Ji(e,n,s,r,t[12],7,1804603682),r=Ji(r,e,n,s,t[13],12,-40341101),s=Ji(s,r,e,n,t[14],17,-1502002290),e=Qi(e,n=Ji(n,s,r,e,t[15],22,1236535329),s,r,t[1],5,-165796510),r=Qi(r,e,n,s,t[6],9,-1069501632),s=Qi(s,r,e,n,t[11],14,643717713),n=Qi(n,s,r,e,t[0],20,-373897302),e=Qi(e,n,s,r,t[5],5,-701558691),r=Qi(r,e,n,s,t[10],9,38016083),s=Qi(s,r,e,n,t[15],14,-660478335),n=Qi(n,s,r,e,t[4],20,-405537848),e=Qi(e,n,s,r,t[9],5,568446438),r=Qi(r,e,n,s,t[14],9,-1019803690),s=Qi(s,r,e,n,t[3],14,-187363961),n=Qi(n,s,r,e,t[8],20,1163531501),e=Qi(e,n,s,r,t[13],5,-1444681467),r=Qi(r,e,n,s,t[2],9,-51403784),s=Qi(s,r,e,n,t[7],14,1735328473),e=$i(e,n=Qi(n,s,r,e,t[12],20,-1926607734),s,r,t[5],4,-378558),r=$i(r,e,n,s,t[8],11,-2022574463),s=$i(s,r,e,n,t[11],16,1839030562),n=$i(n,s,r,e,t[14],23,-35309556),e=$i(e,n,s,r,t[1],4,-1530992060),r=$i(r,e,n,s,t[4],11,1272893353),s=$i(s,r,e,n,t[7],16,-155497632),n=$i(n,s,r,e,t[10],23,-1094730640),e=$i(e,n,s,r,t[13],4,681279174),r=$i(r,e,n,s,t[0],11,-358537222),s=$i(s,r,e,n,t[3],16,-722521979),n=$i(n,s,r,e,t[6],23,76029189),e=$i(e,n,s,r,t[9],4,-640364487),r=$i(r,e,n,s,t[12],11,-421815835),s=$i(s,r,e,n,t[15],16,530742520),e=tn(e,n=$i(n,s,r,e,t[2],23,-995338651),s,r,t[0],6,-198630844),r=tn(r,e,n,s,t[7],10,1126891415),s=tn(s,r,e,n,t[14],15,-1416354905),n=tn(n,s,r,e,t[5],21,-57434055),e=tn(e,n,s,r,t[12],6,1700485571),r=tn(r,e,n,s,t[3],10,-1894986606),s=tn(s,r,e,n,t[10],15,-1051523),n=tn(n,s,r,e,t[1],21,-2054922799),e=tn(e,n,s,r,t[8],6,1873313359),r=tn(r,e,n,s,t[15],10,-30611744),s=tn(s,r,e,n,t[6],15,-1560198380),n=tn(n,s,r,e,t[13],21,1309151649),e=tn(e,n,s,r,t[4],6,-145523070),r=tn(r,e,n,s,t[11],10,-1120210379),s=tn(s,r,e,n,t[2],15,718787259),n=tn(n,s,r,e,t[9],21,-343485551),i[0]=Pr(e,i[0]),i[1]=Pr(n,i[1]),i[2]=Pr(s,i[2]),i[3]=Pr(r,i[3])}function Fu(i,t,e,n,s,r){return t=Pr(Pr(t,i),Pr(n,r)),Pr(t<<s|t>>>32-s,e)}function Ji(i,t,e,n,s,r,o){return Fu(t&e|~t&n,i,t,s,r,o)}function Qi(i,t,e,n,s,r,o){return Fu(t&n|e&~n,i,t,s,r,o)}function $i(i,t,e,n,s,r,o){return Fu(t^e^n,i,t,s,r,o)}function tn(i,t,e,n,s,r,o){return Fu(e^(t|~n),i,t,s,r,o)}function b2(i){var t,e=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=i.length;t+=64)Yf(n,IM(i.substring(t-64,t)));i=i.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i.length;t++)s[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Yf(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,Yf(n,s),n}function IM(i){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=i.charCodeAt(t)+(i.charCodeAt(t+1)<<8)+(i.charCodeAt(t+2)<<16)+(i.charCodeAt(t+3)<<24);return e}Qh=se.atob.bind(se),Wf=se.btoa.bind(se);var x2="0123456789abcdef".split("");function TM(i){for(var t="",e=0;e<4;e++)t+=x2[i>>8*e+4&15]+x2[i>>8*e&15];return t}function OM(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function Vf(i){return b2(i).map(OM).join("")}var FM=function(i){for(var t=0;t<i.length;t++)i[t]=TM(i[t]);return i.join("")}(b2("hello"))!="5d41402abc4b2a76b9719d911017c592";function Pr(i,t){if(FM){var e=(65535&i)+(65535&t);return(i>>16)+(t>>16)+(e>>16)<<16|65535&e}return i+t&4294967295}function Xf(i,t){var e,n,s,r;if(i!==e){for(var o=(s=i,r=1+(256/i.length>>0),new Array(r+1).join(s)),a=[],h=0;h<256;h++)a[h]=h;var l=0;for(h=0;h<256;h++){var c=a[h];l=(l+c+o.charCodeAt(h))%256,a[h]=a[l],a[l]=c}e=i,n=a}else a=n;var d=t.length,g=0,p=0,y="";for(h=0;h<d;h++)p=(p+(c=a[g=(g+1)%256]))%256,a[g]=a[p],a[p]=c,o=a[(a[g]+a[p])%256],y+=String.fromCharCode(t.charCodeAt(h)^o);return y}var S2={print:4,modify:8,copy:16,"annot-forms":32};function ma(i,t,e,n){this.v=1,this.r=2;var s=192;i.forEach(function(a){if(S2.perm!==void 0)throw new Error("Invalid permission: "+a);s+=S2[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var r=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^s)),this.encryptionKey=Vf(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Xf(this.encryptionKey,this.padding)}function _a(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var t="",e=i.length,n=0;n<e;n++){var s=i.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=i[n]}return t}function M2(i){if(je(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,s){if(s=s||!1,typeof e!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[n,!!s],r},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var r in t[e]){var o=t[e][r];try{o[0].apply(i,n)}catch(a){se.console&&Ke.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ku(i){if(!(this instanceof ku))return new ku(i);var t="opacity,stroke-opacity".split(",");for(var e in i)i.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=i[e]);this.id="",this.objectNumber=-1}function C2(i,t){this.gState=i,this.matrix=t,this.id="",this.objectNumber=-1}function _o(i,t,e,n,s){if(!(this instanceof _o))return new _o(i,t,e,n,s);this.type=i==="axial"?2:3,this.coords=t,this.colors=e,C2.call(this,n,s)}function ya(i,t,e,n,s){if(!(this instanceof ya))return new ya(i,t,e,n,s);this.boundingBox=i,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,C2.call(this,n,s)}function re(i){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],r=arguments[3],o=[],a=1,h=16,l="S",c=null;je(i=i||{})==="object"&&(e=i.orientation,n=i.unit||n,s=i.format||s,r=i.compress||i.compressPdf||r,(c=i.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(t=i.precision),i.floatPrecision!==void 0&&(h=i.floatPrecision),l=i.defaultPathOperation||"S"),o=i.filters||(r===!0?["FlateEncode"]:o),n=n||"mm",e=(""+(e||"P")).toLowerCase();var d=i.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=M2;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(m){y=m};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var b=p.__private__.getPageFormat=function(m){return x[m]};s=s||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},A=S.COMPAT;function O(){this.saveGraphicsState(),z(new Ht(Ot,0,0,-Ot,0,Dr()*Ot).toString()+" cm"),this.setFontSize(this.getFontSize()/Ot),l="n",A=S.ADVANCED}function k(){this.restoreGraphicsState(),l="S",A=S.COMPAT}var H=p.__private__.combineFontStyleAndFontWeight=function(m,E){if(m=="bold"&&E=="normal"||m=="bold"&&E==400||m=="normal"&&E=="italic"||m=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(m=E==400||E==="normal"?m==="italic"?"italic":"normal":E!=700&&E!=="bold"||m!=="normal"?(E==700?"bold":E)+""+m:"bold"),m};p.advancedAPI=function(m){var E=A===S.COMPAT;return E&&O.call(this),typeof m!="function"||(m(this),E&&k.call(this)),this},p.compatAPI=function(m){var E=A===S.ADVANCED;return E&&k.call(this),typeof m!="function"||(m(this),E&&O.call(this)),this},p.isAdvancedAPI=function(){return A===S.ADVANCED};var W,F=function(m){if(A!==S.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=p.roundToPrecision=p.__private__.roundToPrecision=function(m,E){var q=t||E;if(isNaN(m)||isNaN(q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(q).replace(/0+$/,"")};W=p.hpf=p.__private__.hpf=typeof h=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,h)}:h==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,16)};var V=p.f2=p.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return $(m,2)},P=p.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return $(m,3)},I=p.scale=p.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return A===S.COMPAT?m*Ot:A===S.ADVANCED?m:void 0},U=function(m){return A===S.COMPAT?Dr()-m:A===S.ADVANCED?m:void 0},G=function(m){return I(U(m))};p.__private__.setPrecision=p.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var nt,tt="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return tt},J=p.__private__.setFileId=function(m){return tt=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():tt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(en=new ma(c.userPermissions,c.userPassword,c.ownerPassword,tt)),tt};p.setFileId=function(m){return J(m),this},p.getFileId=function(){return Q()};var dt=p.__private__.convertDateToPDFDate=function(m){var E=m.getTimezoneOffset(),q=E<0?"+":"-",X=Math.floor(Math.abs(E/60)),rt=Math.abs(E%60),gt=[q,B(X),"'",B(rt),"'"].join("");return["D:",m.getFullYear(),B(m.getMonth()+1),B(m.getDate()),B(m.getHours()),B(m.getMinutes()),B(m.getSeconds()),gt].join("")},ct=p.__private__.convertPDFDateToDate=function(m){var E=parseInt(m.substr(2,4),10),q=parseInt(m.substr(6,2),10)-1,X=parseInt(m.substr(8,2),10),rt=parseInt(m.substr(10,2),10),gt=parseInt(m.substr(12,2),10),St=parseInt(m.substr(14,2),10);return new Date(E,q,X,rt,gt,St,0)},Et=p.__private__.setCreationDate=function(m){var E;if(m===void 0&&(m=new Date),m instanceof Date)E=dt(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=m}return nt=E},M=p.__private__.getCreationDate=function(m){var E=nt;return m==="jsDate"&&(E=ct(nt)),E};p.setCreationDate=function(m){return Et(m),this},p.getCreationDate=function(m){return M(m)};var j,B=p.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},Y=p.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},it=0,ot=[],at=[],ut=0,At=[],Mt=[],Tt=!1,It=at,Xt=function(){it=0,ut=0,at=[],ot=[],At=[],Qs=Ci(),ss=Ci()};p.__private__.setCustomOutputDestination=function(m){Tt=!0,It=m};var ft=function(m){Tt||(It=m)};p.__private__.resetCustomOutputDestination=function(){Tt=!1,It=at};var z=p.__private__.out=function(m){return m=m.toString(),ut+=m.length+1,It.push(m),It},oe=p.__private__.write=function(m){return z(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},zt=p.__private__.getArrayBuffer=function(m){for(var E=m.length,q=new ArrayBuffer(E),X=new Uint8Array(q);E--;)X[E]=m.charCodeAt(E);return q},xt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return xt};var Pt=i.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(m){return Pt=A===S.ADVANCED?m/Ot:m,this};var Nt,Lt=p.__private__.getFontSize=p.getFontSize=function(){return A===S.COMPAT?Pt:Pt*Ot},qt=i.R2L||!1;p.__private__.setR2L=p.setR2L=function(m){return qt=m,this},p.__private__.getR2L=p.getR2L=function(){return qt};var Zt,ae=p.__private__.setZoomMode=function(m){var E=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Nt=m;else if(isNaN(m)){if(E.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Nt=m}else Nt=parseInt(m,10)};p.__private__.getZoomMode=function(){return Nt};var le,ve=p.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');Zt=m};p.__private__.getPageMode=function(){return Zt};var Ne=p.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');le=m};p.__private__.getLayoutMode=function(){return le},p.__private__.setDisplayMode=p.setDisplayMode=function(m,E,q){return ae(m),Ne(E),ve(q),this};var te={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(m){if(Object.keys(te).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return te[m]},p.__private__.getDocumentProperties=function(){return te},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(m){for(var E in te)te.hasOwnProperty(E)&&m[E]&&(te[E]=m[E]);return this},p.__private__.setDocumentProperty=function(m,E){if(Object.keys(te).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return te[m]=E};var Jt,Ot,Di,Pe,yn,Ue={},Ve={},An=[],Re={},Ln={},Xe={},Wi={},jn=null,si=0,Vt=[],Ee=new M2(p),Mi=i.hotfixes||[],Je={},ri={},hn=[],Ht=function m(E,q,X,rt,gt,St){if(!(this instanceof m))return new m(E,q,X,rt,gt,St);isNaN(E)&&(E=1),isNaN(q)&&(q=0),isNaN(X)&&(X=0),isNaN(rt)&&(rt=1),isNaN(gt)&&(gt=0),isNaN(St)&&(St=0),this._matrix=[E,q,X,rt,gt,St]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(m)},Ht.prototype.multiply=function(m){var E=m.sx*this.sx+m.shy*this.shx,q=m.sx*this.shy+m.shy*this.sy,X=m.shx*this.sx+m.sy*this.shx,rt=m.shx*this.shy+m.sy*this.sy,gt=m.tx*this.sx+m.ty*this.shx+this.tx,St=m.tx*this.shy+m.ty*this.sy+this.ty;return new Ht(E,q,X,rt,gt,St)},Ht.prototype.decompose=function(){var m=this.sx,E=this.shy,q=this.shx,X=this.sy,rt=this.tx,gt=this.ty,St=Math.sqrt(m*m+E*E),jt=(m/=St)*q+(E/=St)*X;q-=m*jt,X-=E*jt;var Kt=Math.sqrt(q*q+X*X);return jt/=Kt,m*(X/=Kt)<E*(q/=Kt)&&(m=-m,E=-E,jt=-jt,St=-St),{scale:new Ht(St,0,0,Kt,0,0),translate:new Ht(1,0,0,1,rt,gt),rotate:new Ht(m,E,-E,m,0,0),skew:new Ht(1,0,jt,1,0,0)}},Ht.prototype.toString=function(m){return this.join(" ")},Ht.prototype.inversed=function(){var m=this.sx,E=this.shy,q=this.shx,X=this.sy,rt=this.tx,gt=this.ty,St=1/(m*X-E*q),jt=X*St,Kt=-E*St,_e=-q*St,Se=m*St;return new Ht(jt,Kt,_e,Se,-jt*rt-_e*gt,-Kt*rt-Se*gt)},Ht.prototype.applyToPoint=function(m){var E=m.x*this.sx+m.y*this.shx+this.tx,q=m.x*this.shy+m.y*this.sy+this.ty;return new Wa(E,q)},Ht.prototype.applyToRectangle=function(m){var E=this.applyToPoint(m),q=this.applyToPoint(new Wa(m.x+m.w,m.y+m.h));return new ul(E.x,E.y,q.x-E.x,q.y-E.y)},Ht.prototype.clone=function(){var m=this.sx,E=this.shy,q=this.shx,X=this.sy,rt=this.tx,gt=this.ty;return new Ht(m,E,q,X,rt,gt)},p.Matrix=Ht;var ti=p.matrixMult=function(m,E){return E.multiply(m)},li=new Ht(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=li;var oi=function(m,E){if(!Ln[m]){var q=(E instanceof _o?"Sh":"P")+(Object.keys(Re).length+1).toString(10);E.id=q,Ln[m]=q,Re[q]=E,Ee.publish("addPattern",E)}};p.ShadingPattern=_o,p.TilingPattern=ya,p.addShadingPattern=function(m,E){return F("addShadingPattern()"),oi(m,E),this},p.beginTilingPattern=function(m){F("beginTilingPattern()"),bc(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},p.endTilingPattern=function(m,E){F("endTilingPattern()"),E.stream=Mt[j].join(`
`),oi(m,E),Ee.publish("endTilingPattern",E),hn.pop().restore()};var vi=p.__private__.newObject=function(){var m=Ci();return Nn(m,!0),m},Ci=p.__private__.newObjectDeferred=function(){return it++,ot[it]=function(){return ut},it},Nn=function(m,E){return E=typeof E=="boolean"&&E,ot[m]=ut,E&&z(m+" 0 obj"),m},Ra=p.__private__.newAdditionalObject=function(){var m={objId:Ci(),content:""};return At.push(m),m},Qs=Ci(),ss=Ci(),rs=p.__private__.decodeColorString=function(m){var E=m.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length===5&&(E[4]==="k"||E[4]==="K")&&(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var q=parseFloat(E[0]);E=[q,q,q,"r"]}for(var X="#",rt=0;rt<3;rt++)X+=("0"+Math.floor(255*parseFloat(E[rt])).toString(16)).slice(-2);return X},os=p.__private__.encodeColorString=function(m){var E;typeof m=="string"&&(m={ch1:m});var q=m.ch1,X=m.ch2,rt=m.ch3,gt=m.ch4,St=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof q=="string"&&q.charAt(0)!=="#"){var jt=new w2(q);if(jt.ok)q=jt.toHex();else if(!/^\d*\.?\d*$/.test(q))throw new Error('Invalid color "'+q+'" passed to jsPDF.encodeColorString.')}if(typeof q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(q)&&(q="#"+q[1]+q[1]+q[2]+q[2]+q[3]+q[3]),typeof q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(q)){var Kt=parseInt(q.substr(1),16);q=Kt>>16&255,X=Kt>>8&255,rt=255&Kt}if(X===void 0||gt===void 0&&q===X&&X===rt)if(typeof q=="string")E=q+" "+St[0];else switch(m.precision){case 2:E=V(q/255)+" "+St[0];break;case 3:default:E=P(q/255)+" "+St[0]}else if(gt===void 0||je(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return E=["1.","1.","1.",St[1]].join(" ");if(typeof q=="string")E=[q,X,rt,St[1]].join(" ");else switch(m.precision){case 2:E=[V(q/255),V(X/255),V(rt/255),St[1]].join(" ");break;default:case 3:E=[P(q/255),P(X/255),P(rt/255),St[1]].join(" ")}}else if(typeof q=="string")E=[q,X,rt,gt,St[2]].join(" ");else switch(m.precision){case 2:E=[V(q),V(X),V(rt),V(gt),St[2]].join(" ");break;case 3:default:E=[P(q),P(X),P(rt),P(gt),St[2]].join(" ")}return E},Is=p.__private__.getFilters=function(){return o},Bn=p.__private__.putStream=function(m){var E=(m=m||{}).data||"",q=m.filters||Is(),X=m.alreadyAppliedFilters||[],rt=m.addLength1||!1,gt=E.length,St=m.objectId,jt=function(nn){return nn};if(c!==null&&St===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(jt=en.encryptor(St,0));var Kt={};q===!0&&(q=["FlateEncode"]);var _e=m.additionalKeyValues||[],Se=(Kt=re.API.processDataByFilters!==void 0?re.API.processDataByFilters(E,q):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(X)?X.join(" "):X.toString());if(Kt.data.length!==0&&(_e.push({key:"Length",value:Kt.data.length}),rt===!0&&_e.push({key:"Length1",value:gt})),Se.length!=0)if(Se.split("/").length-1==1)_e.push({key:"Filter",value:Se});else{_e.push({key:"Filter",value:"["+Se+"]"});for(var Ie=0;Ie<_e.length;Ie+=1)if(_e[Ie].key==="DecodeParms"){for(var ui=[],bi=0;bi<Kt.reverseChain.split("/").length-1;bi+=1)ui.push("null");ui.push(_e[Ie].value),_e[Ie].value="["+ui.join(" ")+"]"}}z("<<");for(var Ei=0;Ei<_e.length;Ei++)z("/"+_e[Ei].key+" "+_e[Ei].value);z(">>"),Kt.data.length!==0&&(z("stream"),z(jt(Kt.data)),z("endstream"))},Ts=p.__private__.putPage=function(m){var E=m.number,q=m.data,X=m.objId,rt=m.contentsObjId;Nn(X,!0),z("<</Type /Page"),z("/Parent "+m.rootDictionaryObjId+" 0 R"),z("/Resources "+m.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(W(m.mediaBox.bottomLeftX))+" "+parseFloat(W(m.mediaBox.bottomLeftY))+" "+W(m.mediaBox.topRightX)+" "+W(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&z("/CropBox ["+W(m.cropBox.bottomLeftX)+" "+W(m.cropBox.bottomLeftY)+" "+W(m.cropBox.topRightX)+" "+W(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&z("/BleedBox ["+W(m.bleedBox.bottomLeftX)+" "+W(m.bleedBox.bottomLeftY)+" "+W(m.bleedBox.topRightX)+" "+W(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&z("/TrimBox ["+W(m.trimBox.bottomLeftX)+" "+W(m.trimBox.bottomLeftY)+" "+W(m.trimBox.topRightX)+" "+W(m.trimBox.topRightY)+"]"),m.artBox!==null&&z("/ArtBox ["+W(m.artBox.bottomLeftX)+" "+W(m.artBox.bottomLeftY)+" "+W(m.artBox.topRightX)+" "+W(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&z("/UserUnit "+m.userUnit),Ee.publish("putPage",{objId:X,pageContext:Vt[E],pageNumber:E,page:q}),z("/Contents "+rt+" 0 R"),z(">>"),z("endobj");var gt=q.join(`
`);return A===S.ADVANCED&&(gt+=`
Q`),Nn(rt,!0),Bn({data:gt,filters:Is(),objectId:rt}),z("endobj"),X},Co=p.__private__.putPages=function(){var m,E,q=[];for(m=1;m<=si;m++)Vt[m].objId=Ci(),Vt[m].contentsObjId=Ci();for(m=1;m<=si;m++)q.push(Ts({number:m,data:Mt[m],objId:Vt[m].objId,contentsObjId:Vt[m].contentsObjId,mediaBox:Vt[m].mediaBox,cropBox:Vt[m].cropBox,bleedBox:Vt[m].bleedBox,trimBox:Vt[m].trimBox,artBox:Vt[m].artBox,userUnit:Vt[m].userUnit,rootDictionaryObjId:Qs,resourceDictionaryObjId:ss}));Nn(Qs,!0),z("<</Type /Pages");var X="/Kids [";for(E=0;E<si;E++)X+=q[E]+" 0 R ";z(X+"]"),z("/Count "+si),z(">>"),z("endobj"),Ee.publish("postPutPages")},Ia=function(m){Ee.publish("putFont",{font:m,out:z,newObject:vi,putStream:Bn}),m.isAlreadyPutted!==!0&&(m.objectNumber=vi(),z("<<"),z("/Type /Font"),z("/BaseFont /"+_a(m.postScriptName)),z("/Subtype /Type1"),typeof m.encoding=="string"&&z("/Encoding /"+m.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},Ta=function(){for(var m in Ue)Ue.hasOwnProperty(m)&&(d===!1||d===!0&&g.hasOwnProperty(m))&&Ia(Ue[m])},Oa=function(m){m.objectNumber=vi();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[W(m.x),W(m.y),W(m.x+m.width),W(m.y+m.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var q=m.pages[1].join(`
`);Bn({data:q,additionalKeyValues:E,objectId:m.objectNumber}),z("endobj")},Fa=function(){for(var m in Je)Je.hasOwnProperty(m)&&Oa(Je[m])},nc=function(m,E){var q,X=[],rt=1/(E-1);for(q=0;q<1;q+=rt)X.push(q);if(X.push(1),m[0].offset!=0){var gt={offset:0,color:m[0].color};m.unshift(gt)}if(m[m.length-1].offset!=1){var St={offset:1,color:m[m.length-1].color};m.push(St)}for(var jt="",Kt=0,_e=0;_e<X.length;_e++){for(q=X[_e];q>m[Kt+1].offset;)Kt++;var Se=m[Kt].offset,Ie=(q-Se)/(m[Kt+1].offset-Se),ui=m[Kt].color,bi=m[Kt+1].color;jt+=Y(Math.round((1-Ie)*ui[0]+Ie*bi[0]).toString(16))+Y(Math.round((1-Ie)*ui[1]+Ie*bi[1]).toString(16))+Y(Math.round((1-Ie)*ui[2]+Ie*bi[2]).toString(16))}return jt.trim()},p0=function(m,E){E||(E=21);var q=vi(),X=nc(m.colors,E),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+E+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bn({data:X,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:q}),z("endobj"),m.objectNumber=vi(),z("<< /ShadingType "+m.type),z("/ColorSpace /DeviceRGB");var gt="/Coords ["+W(parseFloat(m.coords[0]))+" "+W(parseFloat(m.coords[1]))+" ";m.type===2?gt+=W(parseFloat(m.coords[2]))+" "+W(parseFloat(m.coords[3])):gt+=W(parseFloat(m.coords[2]))+" "+W(parseFloat(m.coords[3]))+" "+W(parseFloat(m.coords[4]))+" "+W(parseFloat(m.coords[5])),z(gt+="]"),m.matrix&&z("/Matrix ["+m.matrix.toString()+"]"),z("/Function "+q+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},g0=function(m,E){var q=Ci(),X=vi();E.push({resourcesOid:q,objectOid:X}),m.objectNumber=X;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+m.boundingBox.map(W).join(" ")+"]"}),rt.push({key:"XStep",value:W(m.xStep)}),rt.push({key:"YStep",value:W(m.yStep)}),rt.push({key:"Resources",value:q+" 0 R"}),m.matrix&&rt.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Bn({data:m.stream,additionalKeyValues:rt,objectId:m.objectNumber}),z("endobj")},ka=function(m){var E;for(E in Re)Re.hasOwnProperty(E)&&(Re[E]instanceof _o?p0(Re[E]):Re[E]instanceof ya&&g0(Re[E],m))},sc=function(m){for(var E in m.objectNumber=vi(),z("<<"),m)switch(E){case"opacity":z("/ca "+V(m[E]));break;case"stroke-opacity":z("/CA "+V(m[E]))}z(">>"),z("endobj")},m0=function(){var m;for(m in Xe)Xe.hasOwnProperty(m)&&sc(Xe[m])},tl=function(){for(var m in z("/XObject <<"),Je)Je.hasOwnProperty(m)&&Je[m].objectNumber>=0&&z("/"+m+" "+Je[m].objectNumber+" 0 R");Ee.publish("putXobjectDict"),z(">>")},_0=function(){en.oid=vi(),z("<<"),z("/Filter /Standard"),z("/V "+en.v),z("/R "+en.r),z("/U <"+en.toHexString(en.U)+">"),z("/O <"+en.toHexString(en.O)+">"),z("/P "+en.P),z(">>"),z("endobj")},rc=function(){for(var m in z("/Font <<"),Ue)Ue.hasOwnProperty(m)&&(d===!1||d===!0&&g.hasOwnProperty(m))&&z("/"+m+" "+Ue[m].objectNumber+" 0 R");z(">>")},y0=function(){if(Object.keys(Re).length>0){for(var m in z("/Shading <<"),Re)Re.hasOwnProperty(m)&&Re[m]instanceof _o&&Re[m].objectNumber>=0&&z("/"+m+" "+Re[m].objectNumber+" 0 R");Ee.publish("putShadingPatternDict"),z(">>")}},Da=function(m){if(Object.keys(Re).length>0){for(var E in z("/Pattern <<"),Re)Re.hasOwnProperty(E)&&Re[E]instanceof p.TilingPattern&&Re[E].objectNumber>=0&&Re[E].objectNumber<m&&z("/"+E+" "+Re[E].objectNumber+" 0 R");Ee.publish("putTilingPatternDict"),z(">>")}},v0=function(){if(Object.keys(Xe).length>0){var m;for(m in z("/ExtGState <<"),Xe)Xe.hasOwnProperty(m)&&Xe[m].objectNumber>=0&&z("/"+m+" "+Xe[m].objectNumber+" 0 R");Ee.publish("putGStateDict"),z(">>")}},wi=function(m){Nn(m.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),rc(),y0(),Da(m.objectOid),v0(),tl(),z(">>"),z("endobj")},oc=function(){var m=[];Ta(),m0(),Fa(),ka(m),Ee.publish("putResources"),m.forEach(wi),wi({resourcesOid:ss,objectOid:Number.MAX_SAFE_INTEGER}),Ee.publish("postPutResources")},ac=function(){Ee.publish("putAdditionalObjects");for(var m=0;m<At.length;m++){var E=At[m];Nn(E.objId,!0),z(E.content),z("endobj")}Ee.publish("postPutAdditionalObjects")},hc=function(m){Ve[m.fontName]=Ve[m.fontName]||{},Ve[m.fontName][m.fontStyle]=m.id},el=function(m,E,q,X,rt){var gt={id:"F"+(Object.keys(Ue).length+1).toString(10),postScriptName:m,fontName:E,fontStyle:q,encoding:X,isStandardFont:rt||!1,metadata:{}};return Ee.publish("addFont",{font:gt,instance:this}),Ue[gt.id]=gt,hc(gt),gt.id},w0=function(m){for(var E=0,q=xt.length;E<q;E++){var X=el.call(this,m[E][0],m[E][1],m[E][2],xt[E][3],!0);d===!1&&(g[X]=!0);var rt=m[E][0].split("-");hc({id:X,fontName:rt[0],fontStyle:rt[1]||""})}Ee.publish("addFonts",{fonts:Ue,dictionary:Ve})},as=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(X){var E=X.stack||"";~E.indexOf(" at ")&&(E=E.split(" at ")[1]);var q="Error in function "+E.split(`
`)[0].split("<")[0]+": "+X.message;if(!se.console)throw new Error(q);se.console.error(q,X),se.alert&&alert(q)}},m.foo.bar=m,m.foo},ja=function(m,E){var q,X,rt,gt,St,jt,Kt,_e,Se;if(rt=(E=E||{}).sourceEncoding||"Unicode",St=E.outputEncoding,(E.autoencode||St)&&Ue[Jt].metadata&&Ue[Jt].metadata[rt]&&Ue[Jt].metadata[rt].encoding&&(gt=Ue[Jt].metadata[rt].encoding,!St&&Ue[Jt].encoding&&(St=Ue[Jt].encoding),!St&&gt.codePages&&(St=gt.codePages[0]),typeof St=="string"&&(St=gt[St]),St)){for(Kt=!1,jt=[],q=0,X=m.length;q<X;q++)(_e=St[m.charCodeAt(q)])?jt.push(String.fromCharCode(_e)):jt.push(m[q]),jt[q].charCodeAt(0)>>8&&(Kt=!0);m=jt.join("")}for(q=m.length;Kt===void 0&&q!==0;)m.charCodeAt(q-1)>>8&&(Kt=!0),q--;if(!Kt)return m;for(jt=E.noBOM?[]:[254,255],q=0,X=m.length;q<X;q++){if((Se=(_e=m.charCodeAt(q))>>8)>>8)throw new Error("Character at position "+q+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(Se),jt.push(_e-(Se<<8))}return String.fromCharCode.apply(void 0,jt)},vn=p.__private__.pdfEscape=p.pdfEscape=function(m,E){return ja(m,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},il=p.__private__.beginPage=function(m){Mt[++si]=[],Vt[si]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},uc(si),ft(Mt[j])},lc=function(m,E){var q,X,rt;switch(e=E||e,typeof m=="string"&&(q=b(m.toLowerCase()),Array.isArray(q)&&(X=q[0],rt=q[1])),Array.isArray(m)&&(X=m[0]*Ot,rt=m[1]*Ot),isNaN(X)&&(X=s[0],rt=s[1]),(X>14400||rt>14400)&&(Ke.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),X=Math.min(14400,X),rt=Math.min(14400,rt)),s=[X,rt],e.substr(0,1)){case"l":rt>X&&(s=[rt,X]);break;case"p":X>rt&&(s=[rt,X])}il(s),mc(ol),z(hs),hl!==0&&z(hl+" J"),ll!==0&&z(ll+" j"),Ee.publish("addPage",{pageNumber:si})},b0=function(m){m>0&&m<=si&&(Mt.splice(m,1),Vt.splice(m,1),si--,j>si&&(j=si),this.setPage(j))},uc=function(m){m>0&&m<=si&&(j=m)},x0=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Mt.length-1},cc=function(m,E,q){var X,rt=void 0;return q=q||{},m=m!==void 0?m:Ue[Jt].fontName,E=E!==void 0?E:Ue[Jt].fontStyle,X=m.toLowerCase(),Ve[X]!==void 0&&Ve[X][E]!==void 0?rt=Ve[X][E]:Ve[m]!==void 0&&Ve[m][E]!==void 0?rt=Ve[m][E]:q.disableWarning===!1&&Ke.warn("Unable to look up font label for font '"+m+"', '"+E+"'. Refer to getFontList() for available fonts."),rt||q.noFallback||(rt=Ve.times[E])==null&&(rt=Ve.times.normal),rt},S0=p.__private__.putInfo=function(){var m=vi(),E=function(X){return X};for(var q in c!==null&&(E=en.encryptor(m,0)),z("<<"),z("/Producer ("+vn(E("jsPDF "+re.version))+")"),te)te.hasOwnProperty(q)&&te[q]&&z("/"+q.substr(0,1).toUpperCase()+q.substr(1)+" ("+vn(E(te[q]))+")");z("/CreationDate ("+vn(E(nt))+")"),z(">>"),z("endobj")},nl=p.__private__.putCatalog=function(m){var E=(m=m||{}).rootDictionaryObjId||Qs;switch(vi(),z("<<"),z("/Type /Catalog"),z("/Pages "+E+" 0 R"),Nt||(Nt="fullwidth"),Nt){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var q=""+Nt;q.substr(q.length-1)==="%"&&(Nt=parseInt(Nt)/100),typeof Nt=="number"&&z("/OpenAction [3 0 R /XYZ null null "+V(Nt)+"]")}switch(le||(le="continuous"),le){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}Zt&&z("/PageMode /"+Zt),Ee.publish("putCatalog"),z(">>"),z("endobj")},M0=p.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(it+1)),z("/Root "+it+" 0 R"),z("/Info "+(it-1)+" 0 R"),c!==null&&z("/Encrypt "+en.oid+" 0 R"),z("/ID [ <"+tt+"> <"+tt+"> ]"),z(">>")},C0=p.__private__.putHeader=function(){z("%PDF-"+y),z("%\xBA\xDF\xAC\xE0")},E0=p.__private__.putXRef=function(){var m="0000000000";z("xref"),z("0 "+(it+1)),z("0000000000 65535 f ");for(var E=1;E<=it;E++)typeof ot[E]=="function"?z((m+ot[E]()).slice(-10)+" 00000 n "):ot[E]!==void 0?z((m+ot[E]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},$s=p.__private__.buildDocument=function(){Xt(),ft(at),Ee.publish("buildDocument"),C0(),Co(),ac(),oc(),c!==null&&_0(),S0(),nl();var m=ut;return E0(),M0(),z("startxref"),z(""+m),z("%%EOF"),ft(Mt[j]),at.join(`
`)},Ba=p.__private__.getBlob=function(m){return new Blob([zt(m)],{type:"application/pdf"})},Ga=p.output=p.__private__.output=as(function(m,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",m){case void 0:return $s();case"save":p.save(E.filename);break;case"arraybuffer":return zt($s());case"blob":return Ba($s());case"bloburi":case"bloburl":if(se.URL!==void 0&&typeof se.URL.createObjectURL=="function")return se.URL&&se.URL.createObjectURL(Ba($s()))||void 0;Ke.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var q="",X=$s();try{q=Wf(X)}catch{q=Wf(unescape(encodeURIComponent(X)))}return"data:application/pdf;filename="+E.filename+";base64,"+q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(se)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(rt=E.pdfObjectUrl,gt="");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",jt=se.open();return jt!==null&&jt.document.write(St),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(se)==="[object Window]"){var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',_e=se.open();if(_e!==null){_e.document.write(Kt);var Se=this;_e.document.documentElement.querySelector("#pdfViewer").onload=function(){_e.document.title=E.filename,_e.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Se.output("bloburl"))}}return _e}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(se)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',ui=se.open();if(ui!==null&&(ui.document.write(Ie),ui.document.title=E.filename),ui||typeof safari>"u")return ui;break;case"datauri":case"dataurl":return se.document.location.href=this.output("datauristring",E);default:return null}}),dc=function(m){return Array.isArray(Mi)===!0&&Mi.indexOf(m)>-1};switch(n){case"pt":Ot=1;break;case"mm":Ot=2.834645669291339;break;case"cm":Ot=28.346456692913385;break;case"in":Ot=72;break;case"px":Ot=dc("px_scaling")==1?.75:1.3333333333333333;break;case"pc":case"em":Ot=12;break;case"ex":Ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ot=n}var en=null;Et(),J();var A0=function(m){return c!==null?en.encryptor(m,0):function(E){return E}},fc=p.__private__.getPageInfo=p.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Vt[m].objId,pageNumber:m,pageContext:Vt[m]}},fe=p.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in Vt)if(Vt[E].objId===m)break;return fc(E)},L0=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Vt[j].objId,pageNumber:j,pageContext:Vt[j]}};p.addPage=function(){return lc.apply(this,arguments),this},p.setPage=function(){return uc.apply(this,arguments),ft.call(this,Mt[j]),this},p.insertPage=function(m){return this.addPage(),this.movePage(j,m),this},p.movePage=function(m,E){var q,X;if(m>E){q=Mt[m],X=Vt[m];for(var rt=m;rt>E;rt--)Mt[rt]=Mt[rt-1],Vt[rt]=Vt[rt-1];Mt[E]=q,Vt[E]=X,this.setPage(E)}else if(m<E){q=Mt[m],X=Vt[m];for(var gt=m;gt<E;gt++)Mt[gt]=Mt[gt+1],Vt[gt]=Vt[gt+1];Mt[E]=q,Vt[E]=X,this.setPage(E)}return this},p.deletePage=function(){return b0.apply(this,arguments),this},p.__private__.text=p.text=function(m,E,q,X,rt){var gt,St,jt,Kt,_e,Se,Ie,ui,bi,Ei=(X=X||{}).scope||this;if(typeof m=="number"&&typeof E=="number"&&(typeof q=="string"||Array.isArray(q))){var nn=q;q=E,E=m,m=nn}if(arguments[3]instanceof Ht?(F("The transform parameter of text() with a Matrix value"),bi=rt):(jt=arguments[4],Kt=arguments[5],je(Ie=arguments[3])==="object"&&Ie!==null||(typeof jt=="string"&&(Kt=jt,jt=null),typeof Ie=="string"&&(Kt=Ie,Ie=null),typeof Ie=="number"&&(jt=Ie,Ie=null),X={flags:Ie,angle:jt,align:Kt})),isNaN(E)||isNaN(q)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return Ei;var ji="",ls=!1,Gn=typeof X.lineHeightFactor=="number"?X.lineHeightFactor:Ao,er=Ei.internal.scaleFactor;function xc(ei){return ei=ei.split("	").join(Array(X.TabLen||9).join(" ")),vn(ei,Ie)}function pl(ei){for(var ii,xi=ei.concat(),Ri=[],rr=xi.length;rr--;)typeof(ii=xi.shift())=="string"?Ri.push(ii):Array.isArray(ei)&&(ii.length===1||ii[1]===void 0&&ii[2]===void 0)?Ri.push(ii[0]):Ri.push([ii[0],ii[1],ii[2]]);return Ri}function gl(ei,ii){var xi;if(typeof ei=="string")xi=ii(ei)[0];else if(Array.isArray(ei)){for(var Ri,rr,Ur=ei.concat(),th=[],Mc=Ur.length;Mc--;)typeof(Ri=Ur.shift())=="string"?th.push(ii(Ri)[0]):Array.isArray(Ri)&&typeof Ri[0]=="string"&&(rr=ii(Ri[0],Ri[1],Ri[2]),th.push([rr[0],rr[1],rr[2]]));xi=th}return xi}var Va=!1,ml=!0;if(typeof m=="string")Va=!0;else if(Array.isArray(m)){var _l=m.concat();St=[];for(var Xa,wn=_l.length;wn--;)(typeof(Xa=_l.shift())!="string"||Array.isArray(Xa)&&typeof Xa[0]!="string")&&(ml=!1);Va=ml}if(Va===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Ha=Pt/Ei.internal.scaleFactor,Za=Ha*(Gn-1);switch(X.baseline){case"bottom":q-=Za;break;case"top":q+=Ha-Za;break;case"hanging":q+=Ha-2*Za;break;case"middle":q+=Ha/2-Za}if((Se=X.maxWidth||0)>0&&(typeof m=="string"?m=Ei.splitTextToSize(m,Se):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(ei,ii){return ei.concat(Ei.splitTextToSize(ii,Se))},[]))),gt={text:m,x:E,y:q,options:X,mutex:{pdfEscape:vn,activeFontKey:Jt,fonts:Ue,activeFontSize:Pt}},Ee.publish("preProcessText",gt),m=gt.text,jt=(X=gt.options).angle,!(bi instanceof Ht)&&jt&&typeof jt=="number"){jt*=Math.PI/180,X.rotationDirection===0&&(jt=-jt),A===S.ADVANCED&&(jt=-jt);var Ka=Math.cos(jt),yl=Math.sin(jt);bi=new Ht(Ka,yl,-yl,Ka,0,0)}else jt&&jt instanceof Ht&&(bi=jt);A!==S.ADVANCED||bi||(bi=li),(_e=X.charSpace||za)!==void 0&&(ji+=W(I(_e))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ui=X.horizontalScale)!==void 0&&(ji+=W(100*ui)+` Tz
`),X.lang;var bn=-1,j0=X.renderingMode!==void 0?X.renderingMode:X.stroke,vl=Ei.internal.getCurrentPageInfo().pageContext;switch(j0){case 0:case!1:case"fill":bn=0;break;case 1:case!0:case"stroke":bn=1;break;case 2:case"fillThenStroke":bn=2;break;case 3:case"invisible":bn=3;break;case 4:case"fillAndAddForClipping":bn=4;break;case 5:case"strokeAndAddPathForClipping":bn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bn=6;break;case 7:case"addToPathForClipping":bn=7}var Sc=vl.usedRenderingMode!==void 0?vl.usedRenderingMode:-1;bn!==-1?ji+=bn+` Tr
`:Sc!==-1&&(ji+=`0 Tr
`),bn!==-1&&(vl.usedRenderingMode=bn),Kt=X.align||"left";var us,wl=Pt*Gn,B0=Ei.internal.pageSize.getWidth(),G0=Ue[Jt];_e=X.charSpace||za,Se=X.maxWidth||0,Ie=Object.assign({autoencode:!0,noBOM:!0},X.flags);var jr=[];if(Object.prototype.toString.call(m)==="[object Array]"){var qn;St=pl(m),Kt!=="left"&&(us=St.map(function(ei){return Ei.getStringUnitWidth(ei,{font:G0,charSpace:_e,fontSize:Pt,doKerning:!1})*Pt/er}));var cs,Br=0;if(Kt==="right"){E-=us[0],m=[],wn=St.length;for(var Fs=0;Fs<wn;Fs++)Fs===0?(cs=tr(E),qn=Fr(q)):(cs=I(Br-us[Fs]),qn=-wl),m.push([St[Fs],cs,qn]),Br=us[Fs]}else if(Kt==="center"){E-=us[0]/2,m=[],wn=St.length;for(var ir=0;ir<wn;ir++)ir===0?(cs=tr(E),qn=Fr(q)):(cs=I((Br-us[ir])/2),qn=-wl),m.push([St[ir],cs,qn]),Br=us[ir]}else if(Kt==="left"){m=[],wn=St.length;for(var Ja=0;Ja<wn;Ja++)m.push(St[Ja])}else{if(Kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');m=[],wn=St.length,Se=Se!==0?Se:B0;for(var ds=0;ds<wn;ds++)qn=ds===0?Fr(q):-wl,cs=ds===0?tr(E):0,ds<wn-1?jr.push(W(I((Se-us[ds])/(St[ds].split(" ").length-1)))):jr.push(0),m.push([St[ds],cs,qn])}}var Qa=typeof X.R2L=="boolean"?X.R2L:qt;Qa===!0&&(m=gl(m,function(ei,ii,xi){return[ei.split("").reverse().join(""),ii,xi]})),gt={text:m,x:E,y:q,options:X,mutex:{pdfEscape:vn,activeFontKey:Jt,fonts:Ue,activeFontSize:Pt}},Ee.publish("postProcessText",gt),m=gt.text,ls=gt.mutex.isHex||!1;var bl=Ue[Jt].encoding;bl!=="WinAnsiEncoding"&&bl!=="StandardEncoding"||(m=gl(m,function(ei,ii,xi){return[xc(ei),ii,xi]})),St=pl(m),m=[];for(var Gr,fs,nr,Po=0,$a=1,Ro=Array.isArray(St[0])?$a:Po,qr="",xl=function(ei,ii,xi){var Ri="";return xi instanceof Ht?(xi=typeof X.angle=="number"?ti(xi,new Ht(1,0,0,1,ei,ii)):ti(new Ht(1,0,0,1,ei,ii),xi),A===S.ADVANCED&&(xi=ti(new Ht(1,0,0,-1,0,0),xi)),Ri=xi.join(" ")+` Tm
`):Ri=W(ei)+" "+W(ii)+` Td
`,Ri},Un=0;Un<St.length;Un++){switch(qr="",Ro){case $a:nr=(ls?"<":"(")+St[Un][0]+(ls?">":")"),Gr=parseFloat(St[Un][1]),fs=parseFloat(St[Un][2]);break;case Po:nr=(ls?"<":"(")+St[Un]+(ls?">":")"),Gr=tr(E),fs=Fr(q)}jr!==void 0&&jr[Un]!==void 0&&(qr=jr[Un]+` Tw
`),Un===0?m.push(qr+xl(Gr,fs,bi)+nr):Ro===Po?m.push(qr+nr):Ro===$a&&m.push(qr+xl(Gr,fs,bi)+nr)}m=Ro===Po?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var sr=`BT
/`;return sr+=Jt+" "+Pt+` Tf
`,sr+=W(Pt*Gn)+` TL
`,sr+=Lo+`
`,sr+=ji,sr+=m,z(sr+="ET"),g[Jt]=!0,Ei};var N0=p.__private__.clip=p.clip=function(m){return z(m==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return N0("evenodd")},p.__private__.discardPath=p.discardPath=function(){return z("n"),this};var Os=p.__private__.isValidStyle=function(m){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(E=!0),E};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(m){return Os(m)&&(l=m),this};var pc=p.__private__.getStyle=p.getStyle=function(m){var E=l;switch(m){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=m}return E},gc=p.close=function(){return z("h"),this};p.stroke=function(){return z("S"),this},p.fill=function(m){return qa("f",m),this},p.fillEvenOdd=function(m){return qa("f*",m),this},p.fillStroke=function(m){return qa("B",m),this},p.fillStrokeEvenOdd=function(m){return qa("B*",m),this};var qa=function(m,E){je(E)==="object"?R0(E,m):z(m)},sl=function(m){m===null||A===S.ADVANCED&&m===void 0||(m=pc(m),z(m))};function P0(m,E,q,X,rt){var gt=new ya(E||this.boundingBox,q||this.xStep,X||this.yStep,this.gState,rt||this.matrix);gt.stream=this.stream;var St=m+"$$"+this.cloneIndex+++"$$";return oi(St,gt),gt}var R0=function(m,E){var q=Ln[m.key],X=Re[q];if(X instanceof _o)z("q"),z(I0(E)),X.gState&&p.setGState(X.gState),z(m.matrix.toString()+" cm"),z("/"+q+" sh"),z("Q");else if(X instanceof ya){var rt=new Ht(1,0,0,-1,0,Dr());m.matrix&&(rt=rt.multiply(m.matrix||li),q=P0.call(X,m.key,m.boundingBox,m.xStep,m.yStep,rt).id),z("q"),z("/Pattern cs"),z("/"+q+" scn"),X.gState&&p.setGState(X.gState),z(E),z("Q")}},I0=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},rl=p.moveTo=function(m,E){return z(W(I(m))+" "+W(G(E))+" m"),this},Eo=p.lineTo=function(m,E){return z(W(I(m))+" "+W(G(E))+" l"),this},Or=p.curveTo=function(m,E,q,X,rt,gt){return z([W(I(m)),W(G(E)),W(I(q)),W(G(X)),W(I(rt)),W(G(gt)),"c"].join(" ")),this};p.__private__.line=p.line=function(m,E,q,X,rt){if(isNaN(m)||isNaN(E)||isNaN(q)||isNaN(X)||!Os(rt))throw new Error("Invalid arguments passed to jsPDF.line");return A===S.COMPAT?this.lines([[q-m,X-E]],m,E,[1,1],rt||"S"):this.lines([[q-m,X-E]],m,E,[1,1]).stroke()},p.__private__.lines=p.lines=function(m,E,q,X,rt,gt){var St,jt,Kt,_e,Se,Ie,ui,bi,Ei,nn,ji,ls;if(typeof m=="number"&&(ls=q,q=E,E=m,m=ls),X=X||[1,1],gt=gt||!1,isNaN(E)||isNaN(q)||!Array.isArray(m)||!Array.isArray(X)||!Os(rt)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(rl(E,q),St=X[0],jt=X[1],_e=m.length,nn=E,ji=q,Kt=0;Kt<_e;Kt++)(Se=m[Kt]).length===2?(nn=Se[0]*St+nn,ji=Se[1]*jt+ji,Eo(nn,ji)):(Ie=Se[0]*St+nn,ui=Se[1]*jt+ji,bi=Se[2]*St+nn,Ei=Se[3]*jt+ji,nn=Se[4]*St+nn,ji=Se[5]*jt+ji,Or(Ie,ui,bi,Ei,nn,ji));return gt&&gc(),sl(rt),this},p.path=function(m){for(var E=0;E<m.length;E++){var q=m[E],X=q.c;switch(q.op){case"m":rl(X[0],X[1]);break;case"l":Eo(X[0],X[1]);break;case"c":Or.apply(this,X);break;case"h":gc()}}return this},p.__private__.rect=p.rect=function(m,E,q,X,rt){if(isNaN(m)||isNaN(E)||isNaN(q)||isNaN(X)||!Os(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return A===S.COMPAT&&(X=-X),z([W(I(m)),W(G(E)),W(I(q)),W(I(X)),"re"].join(" ")),sl(rt),this},p.__private__.triangle=p.triangle=function(m,E,q,X,rt,gt,St){if(isNaN(m)||isNaN(E)||isNaN(q)||isNaN(X)||isNaN(rt)||isNaN(gt)||!Os(St))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[q-m,X-E],[rt-q,gt-X],[m-rt,E-gt]],m,E,[1,1],St,!0),this},p.__private__.roundedRect=p.roundedRect=function(m,E,q,X,rt,gt,St){if(isNaN(m)||isNaN(E)||isNaN(q)||isNaN(X)||isNaN(rt)||isNaN(gt)||!Os(St))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*q),gt=Math.min(gt,.5*X),this.lines([[q-2*rt,0],[rt*jt,0,rt,gt-gt*jt,rt,gt],[0,X-2*gt],[0,gt*jt,-rt*jt,gt,-rt,gt],[2*rt-q,0],[-rt*jt,0,-rt,-gt*jt,-rt,-gt],[0,2*gt-X],[0,-gt*jt,rt*jt,-gt,rt,-gt]],m+rt,E,[1,1],St,!0),this},p.__private__.ellipse=p.ellipse=function(m,E,q,X,rt){if(isNaN(m)||isNaN(E)||isNaN(q)||isNaN(X)||!Os(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*q,St=4/3*(Math.SQRT2-1)*X;return rl(m+q,E),Or(m+q,E-St,m+gt,E-X,m,E-X),Or(m-gt,E-X,m-q,E-St,m-q,E),Or(m-q,E+St,m-gt,E+X,m,E+X),Or(m+gt,E+X,m+q,E+St,m+q,E),sl(rt),this},p.__private__.circle=p.circle=function(m,E,q,X){if(isNaN(m)||isNaN(E)||isNaN(q)||!Os(X))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,E,q,q,X)},p.setFont=function(m,E,q){return q&&(E=H(E,q)),Jt=cc(m,E,{disableWarning:!1}),this};var T0=p.__private__.getFont=p.getFont=function(){return Ue[cc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var m,E,q={};for(m in Ve)if(Ve.hasOwnProperty(m))for(E in q[m]=[],Ve[m])Ve[m].hasOwnProperty(E)&&q[m].push(E);return q},p.addFont=function(m,E,q,X,rt){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(q=H(q,X)),rt=rt||"Identity-H",el.call(this,m,E,q,rt)};var Ao,ol=i.lineWidth||.200025,Ua=p.__private__.getLineWidth=p.getLineWidth=function(){return ol},mc=p.__private__.setLineWidth=p.setLineWidth=function(m){return ol=m,z(W(I(m))+" w"),this};p.__private__.setLineDash=re.API.setLineDash=re.API.setLineDashPattern=function(m,E){if(m=m||[],E=E||0,isNaN(E)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(q){return W(I(q))}).join(" "),E=W(I(E)),z("["+m+"] "+E+" d"),this};var _c=p.__private__.getLineHeight=p.getLineHeight=function(){return Pt*Ao};p.__private__.getLineHeight=p.getLineHeight=function(){return Pt*Ao};var yc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Ao=m),this},vc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ao};yc(i.lineHeight);var tr=p.__private__.getHorizontalCoordinate=function(m){return I(m)},Fr=p.__private__.getVerticalCoordinate=function(m){return A===S.ADVANCED?m:Vt[j].mediaBox.topRightY-Vt[j].mediaBox.bottomLeftY-I(m)},O0=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(m){return W(tr(m))},kr=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(m){return W(Fr(m))},hs=i.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return rs(hs)},p.__private__.setStrokeColor=p.setDrawColor=function(m,E,q,X){return hs=os({ch1:m,ch2:E,ch3:q,ch4:X,pdfColorType:"draw",precision:2}),z(hs),this};var al=i.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return rs(al)},p.__private__.setFillColor=p.setFillColor=function(m,E,q,X){return al=os({ch1:m,ch2:E,ch3:q,ch4:X,pdfColorType:"fill",precision:2}),z(al),this};var Lo=i.textColor||"0 g",F0=p.__private__.getTextColor=p.getTextColor=function(){return rs(Lo)};p.__private__.setTextColor=p.setTextColor=function(m,E,q,X){return Lo=os({ch1:m,ch2:E,ch3:q,ch4:X,pdfColorType:"text",precision:3}),this};var za=i.charSpace,k0=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(za||0)};p.__private__.setCharSpace=p.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return za=m,this};var hl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hl=E,z(E+" J"),this};var ll=0;p.__private__.setLineJoin=p.setLineJoin=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ll=E,z(E+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(W(I(m))+" M"),this},p.GState=ku,p.setGState=function(m){(m=typeof m=="string"?Xe[Wi[m]]:wc(null,m)).equals(jn)||(z("/"+m.id+" gs"),jn=m)};var wc=function(m,E){if(!m||!Wi[m]){var q=!1;for(var X in Xe)if(Xe.hasOwnProperty(X)&&Xe[X].equals(E)){q=!0;break}if(q)E=Xe[X];else{var rt="GS"+(Object.keys(Xe).length+1).toString(10);Xe[rt]=E,E.id=rt}return m&&(Wi[m]=E.id),Ee.publish("addGState",E),E}};p.addGState=function(m,E){return wc(m,E),this},p.saveGraphicsState=function(){return z("q"),An.push({key:Jt,size:Pt,color:Lo}),this},p.restoreGraphicsState=function(){z("Q");var m=An.pop();return Jt=m.key,Pt=m.size,Lo=m.color,jn=null,this},p.setCurrentTransformationMatrix=function(m){return z(m.toString()+" cm"),this},p.comment=function(m){return z("#"+m),this};var Wa=function(m,E){var q=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return q},set:function(gt){isNaN(gt)||(q=parseFloat(gt))}});var X=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return X},set:function(gt){isNaN(gt)||(X=parseFloat(gt))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(gt){rt=gt.toString()}}),this},ul=function(m,E,q,X){Wa.call(this,m,E),this.type="rect";var rt=q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(St){isNaN(St)||(rt=parseFloat(St))}});var gt=X||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(St){isNaN(St)||(gt=parseFloat(St))}}),this},cl=function(){this.page=si,this.currentPage=j,this.pages=Mt.slice(0),this.pagesContext=Vt.slice(0),this.x=Di,this.y=Pe,this.matrix=yn,this.width=No(j),this.height=Dr(j),this.outputDestination=It,this.id="",this.objectNumber=-1};cl.prototype.restore=function(){si=this.page,j=this.currentPage,Vt=this.pagesContext,Mt=this.pages,Di=this.x,Pe=this.y,yn=this.matrix,dl(j,this.width),fl(j,this.height),It=this.outputDestination};var bc=function(m,E,q,X,rt){hn.push(new cl),si=j=0,Mt=[],Di=m,Pe=E,yn=rt,il([q,X])},D0=function(m){if(ri[m])hn.pop().restore();else{var E=new cl,q="Xo"+(Object.keys(Je).length+1).toString(10);E.id=q,ri[m]=q,Je[q]=E,Ee.publish("addFormObject",E),hn.pop().restore()}};for(var Ya in p.beginFormObject=function(m,E,q,X,rt){return bc(m,E,q,X,rt),this},p.endFormObject=function(m){return D0(m),this},p.doFormObject=function(m,E){var q=Je[ri[m]];return z("q"),z(E.toString()+" cm"),z("/"+q.id+" Do"),z("Q"),this},p.getFormObject=function(m){var E=Je[ri[m]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},p.save=function(m,E){return m=m||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(mo(Ba($s()),m),typeof mo.unload=="function"&&se.setTimeout&&setTimeout(mo.unload,911),this):new Promise(function(q,X){try{var rt=mo(Ba($s()),m);typeof mo.unload=="function"&&se.setTimeout&&setTimeout(mo.unload,911),q(rt)}catch(gt){X(gt.message)}})},re.API)re.API.hasOwnProperty(Ya)&&(Ya==="events"&&re.API.events.length?function(m,E){var q,X,rt;for(rt=E.length-1;rt!==-1;rt--)q=E[rt][0],X=E[rt][1],m.subscribe.apply(m,[q].concat(typeof X=="function"?[X]:X))}(Ee,re.API.events):p[Ya]=re.API[Ya]);var No=p.getPageWidth=function(m){return(Vt[m=m||j].mediaBox.topRightX-Vt[m].mediaBox.bottomLeftX)/Ot},dl=p.setPageWidth=function(m,E){Vt[m].mediaBox.topRightX=E*Ot+Vt[m].mediaBox.bottomLeftX},Dr=p.getPageHeight=function(m){return(Vt[m=m||j].mediaBox.topRightY-Vt[m].mediaBox.bottomLeftY)/Ot},fl=p.setPageHeight=function(m,E){Vt[m].mediaBox.topRightY=E*Ot+Vt[m].mediaBox.bottomLeftY};return p.internal={pdfEscape:vn,getStyle:pc,getFont:T0,getFontSize:Lt,getCharSpace:k0,getTextColor:F0,getLineHeight:_c,getLineHeightFactor:vc,getLineWidth:Ua,write:oe,getHorizontalCoordinate:tr,getVerticalCoordinate:Fr,getCoordinateString:O0,getVerticalCoordinateString:kr,collections:{},newObject:vi,newAdditionalObject:Ra,newObjectDeferred:Ci,newObjectDeferredBegin:Nn,getFilters:Is,putStream:Bn,events:Ee,scaleFactor:Ot,pageSize:{getWidth:function(){return No(j)},setWidth:function(m){dl(j,m)},getHeight:function(){return Dr(j)},setHeight:function(m){fl(j,m)}},encryptionOptions:c,encryption:en,getEncryptor:A0,output:Ga,getNumberOfPages:x0,pages:Mt,out:z,f2:V,f3:P,getPageInfo:fc,getPageInfoByObjId:fe,getCurrentPageInfo:L0,getPDFVersion:v,Point:Wa,Rectangle:ul,Matrix:Ht,hasHotfix:dc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return No(j)},set:function(m){dl(j,m)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Dr(j)},set:function(m){fl(j,m)},enumerable:!0,configurable:!0}),w0.call(p,xt),Jt="F1",lc(s,e),Ee.publish("initialized"),p}ma.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},ma.prototype.toHexString=function(i){return i.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ma.prototype.hexToBytes=function(i){for(var t=[],e=0;e<i.length;e+=2)t.push(String.fromCharCode(parseInt(i.substr(e,2),16)));return t.join("")},ma.prototype.processOwnerPassword=function(i,t){return Xf(Vf(t).substr(0,5),i)},ma.prototype.encryptor=function(i,t){var e=Vf(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Xf(e,n)}},ku.prototype.equals=function(i){var t,e="id,objectNumber,equals";if(!i||je(i)!==je(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!i.hasOwnProperty(t)||this[t]!==i[t])return!1;n++}for(t in i)i.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},re.API={events:[]},re.version="2.5.1";var ci=re.API,Hf=1,yo=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},va=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ge=function(i){return i.toFixed(2)},Rr=function(i){return i.toFixed(5)};ci.__acroform__={};var mn=function(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i},E2=function(i){return i*Hf},Ls=function(i){var t=new L2,e=Wt.internal.getHeight(i)||0,n=Wt.internal.getWidth(i)||0;return t.BBox=[0,0,Number(ge(n)),Number(ge(e))],t},kM=ci.__acroform__.setBit=function(i,t){if(i=i||0,t=t||0,isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<t},DM=ci.__acroform__.clearBit=function(i,t){if(i=i||0,t=t||0,isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<t)},jM=ci.__acroform__.getBit=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<t?1:0},mi=ci.__acroform__.getBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jM(i,t-1)},_i=ci.__acroform__.setBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kM(i,t-1)},yi=ci.__acroform__.clearBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DM(i,t-1)},BM=ci.__acroform__.calculateCoordinates=function(i,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=i[0],r=i[1],o=i[2],a=i[3],h={};return h.lowerLeft_X=e(s)||0,h.lowerLeft_Y=n(r+a)||0,h.upperRight_X=e(s+o)||0,h.upperRight_Y=n(r)||0,[Number(ge(h.lowerLeft_X)),Number(ge(h.lowerLeft_Y)),Number(ge(h.upperRight_X)),Number(ge(h.upperRight_Y))]},GM=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var t=[],e=i._V||i.DV,n=Zf(i,e),s=i.scope.internal.getFont(i.fontName,i.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(i.scope.__private__.encodeColorString(i.color)),t.push("/"+s+" "+ge(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Ls(i);return r.scope=i.scope,r.stream=t.join(`
`),r}},Zf=function(i,t){var e=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=i.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var r=e,o=Wt.internal.getHeight(i)||0;o=o<0?-o:o;var a=Wt.internal.getWidth(i)||0;a=a<0?-a:a;var h=function(P,I,U){if(P+1<s.length){var G=I+" "+s[P+1][0];return Du(G,i,U).width<=a-4}return!1};r++;t:for(;r>0;){t="",r--;var l,c,d=Du("3",i,r).height,g=i.multiline?o-r:(o-d)/2,p=g+=2,y=0,v=0,x=0;if(r<=0){t=`(...) Tj
`,t+="% Width of Text: "+Du(t,i,r=12).width+", FieldWidth:"+a+`
`;break}for(var b="",S=0,A=0;A<s.length;A++)if(s.hasOwnProperty(A)){var O=!1;if(s[A].length!==1&&x!==s[A].length-1){if((d+2)*(S+2)+2>o)continue t;b+=s[A][x],O=!0,v=A,A--}else{b=(b+=s[A][x]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var k=parseInt(A),H=h(k,b,r),W=A>=s.length-1;if(H&&!W){b+=" ",x=0;continue}if(H||W){if(W)v=k;else if(i.multiline&&(d+2)*(S+2)+2>o)continue t}else{if(!i.multiline||(d+2)*(S+2)+2>o)continue t;v=k}}for(var F="",$=y;$<=v;$++){var V=s[$];if(i.multiline){if($===v){F+=V[x]+" ",x=(x+1)%V.length;continue}if($===y){F+=V[V.length-1]+" ";continue}}F+=V[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,c=Du(F,i,r).width,i.textAlign){case"right":l=a-c-2;break;case"center":l=(a-c)/2;break;case"left":default:l=2}t+=ge(l)+" "+ge(p)+` Td
`,t+="("+yo(F)+`) Tj
`,t+=-ge(l)+` 0 Td
`,p=-(r+2),c=0,y=O?v:v+1,S++,b=""}break}return n.text=t,n.fontSize=r,n},Du=function(i,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},qM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},UM=function(i,t){var e={type:"reference",object:i};t.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(i.page).pageContext.annotations.push(e)},zM=function(i,t){for(var e in i)if(i.hasOwnProperty(e)){var n=e,s=i[e];t.internal.newObjectDeferredBegin(s.objId,!0),je(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete i[n]}},WM=function(i,t){if(t.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(ts.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(qM)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Hf=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new N2,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var r=n[s];r.objId=void 0,r.hasAnnotation&&UM(r,e)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(e){(function(n,s){var r=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var a=n[o],h=[],l=a.Rect;if(a.Rect&&(a.Rect=BM(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Wt.createDefaultAppearanceStream(a),je(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(h=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=GM(a);h.push({key:"AP",value:"<</N "+c+">>"}),s.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var d="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var p=a.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(s,a)),d+="/"+o+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,a)),d+="/"+o+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);d+=">>"}h.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:h,objectId:a.objId}),s.internal.out("endobj")}r&&zM(s.internal.acroformPlugin.xForms,s)})(e,i)}),i.internal.acroformPlugin.isInitialized=!0}},A2=ci.__acroform__.arrayToPdfArray=function(i,t,e){var n=function(o){return o};if(Array.isArray(i)){for(var s="[",r=0;r<i.length;r++)switch(r!==0&&(s+=" "),je(i[r])){case"boolean":case"number":case"object":s+=i[r].toString();break;case"string":i[r].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),s+="("+yo(n(i[r].toString()))+")"):s+=i[r].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Kf=function(i,t,e){var n=function(s){return s};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(i=i||"").toString(),i="("+yo(n(i))+")"},Ns=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ns.prototype.toString=function(){return this.objId+" 0 R"},Ns.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Ns.prototype.getKeyValueListForStream=function(){var i=[],t=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],s=this[n];s&&(Array.isArray(s)?i.push({key:n,value:A2(s,this.objId,this.scope)}):s instanceof Ns?(s.scope=this.scope,i.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&i.push({key:n,value:s}))}return i};var L2=function(){Ns.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){i=e.trim()},get:function(){return i||null}})};mn(L2,Ns);var N2=function(){Ns.call(this);var i,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+yo(e(i))+")"}},set:function(e){i=e}})};mn(N2,Ns);var ts=function i(){Ns.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mi(t,3)},set:function(b){b?this.F=_i(t,3):this.F=yi(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');e=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Gu)return;r="FieldObject"+i.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+yo(b(r))+")"},set:function(b){r=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(b){r=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(b){h=b}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/Hf:l},set:function(b){l=b}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Gu||this instanceof vo))return Kf(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ki?g:Kf(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof ki?b:b.substr(0,1)==="("?va(b.substr(1,b.length-2)):va(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ki?va(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof ki?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ki?p:Kf(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof ki?b:b.substr(0,1)==="("?va(b.substr(1,b.length-2)):va(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ki?va(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof ki?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,1)},set:function(b){b?this.Ff=_i(this.Ff,1):this.Ff=yi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,2)},set:function(b){b?this.Ff=_i(this.Ff,2):this.Ff=yi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,3)},set:function(b){b?this.Ff=_i(this.Ff,3):this.Ff=yi(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');x=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(x){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};mn(ts,Ns);var wa=function(){ts.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return A2(t,this.objId,this.scope)},set:function(e){var n,s;s=[],typeof(n=e)=="string"&&(s=function(r,o,a){a||(a=1);for(var h,l=[];h=o.exec(r);)l.push(h[a]);return l}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,18)},set:function(e){e?this.Ff=_i(this.Ff,18):this.Ff=yi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=_i(this.Ff,19):this.Ff=yi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,20)},set:function(e){e?(this.Ff=_i(this.Ff,20),t.sort()):this.Ff=yi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,22)},set:function(e){e?this.Ff=_i(this.Ff,22):this.Ff=yi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,23)},set:function(e){e?this.Ff=_i(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,27)},set:function(e){e?this.Ff=_i(this.Ff,27):this.Ff=yi(this.Ff,27)}}),this.hasAppearanceStream=!1};mn(wa,ts);var ba=function(){wa.call(this),this.fontName="helvetica",this.combo=!1};mn(ba,wa);var xa=function(){ba.call(this),this.combo=!0};mn(xa,ba);var ju=function(){xa.call(this),this.edit=!0};mn(ju,xa);var ki=function(){ts.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,15)},set:function(e){e?this.Ff=_i(this.Ff,15):this.Ff=yi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,16)},set:function(e){e?this.Ff=_i(this.Ff,16):this.Ff=yi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,17)},set:function(e){e?this.Ff=_i(this.Ff,17):this.Ff=yi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,26)},set:function(e){e?this.Ff=_i(this.Ff,26):this.Ff=yi(this.Ff,26)}});var i,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(r){return r};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+yo(e(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){je(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(e){i="/"+e}})};mn(ki,ts);var Bu=function(){ki.call(this),this.pushButton=!0};mn(Bu,ki);var Sa=function(){ki.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t!==void 0?t:[]}})};mn(Sa,ki);var Gu=function(){var i,t;ts.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(s){i=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,o=[];for(r in o.push("<<"),n)o.push("/"+r+" ("+yo(s(n[r]))+")");return o.push(">>"),o.join(`
`)},set:function(s){je(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mn(Gu,ts),Sa.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=i.createAppearanceStream(e.optionName),e.caption=i.getCA()}},Sa.prototype.createOption=function(i){var t=new Gu;return t.Parent=this,t.optionName=i,this.Kids.push(t),YM.call(this.scope,t),t};var qu=function(){ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Wt.CheckBox.createAppearanceStream()};mn(qu,ki);var vo=function(){ts.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,13)},set:function(t){t?this.Ff=_i(this.Ff,13):this.Ff=yi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,21)},set:function(t){t?this.Ff=_i(this.Ff,21):this.Ff=yi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,23)},set:function(t){t?this.Ff=_i(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,24)},set:function(t){t?this.Ff=_i(this.Ff,24):this.Ff=yi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,25)},set:function(t){t?this.Ff=_i(this.Ff,25):this.Ff=yi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,26)},set:function(t){t?this.Ff=_i(this.Ff,26):this.Ff=yi(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){Number.isInteger(t)&&(i=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mn(vo,ts);var Uu=function(){vo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mi(this.Ff,14)},set:function(i){i?this.Ff=_i(this.Ff,14):this.Ff=yi(this.Ff,14)}}),this.password=!0};mn(Uu,vo);var Wt={CheckBox:{createAppearanceStream:function(){return{N:{On:Wt.CheckBox.YesNormal},D:{On:Wt.CheckBox.YesPushDown,Off:Wt.CheckBox.OffPushDown}}},YesPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,s=i.scope.__private__.encodeColorString(i.color),r=Zf(i,i.caption);return e.push("0.749023 g"),e.push("0 0 "+ge(Wt.internal.getWidth(i))+" "+ge(Wt.internal.getHeight(i))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+ge(r.fontSize)+" Tf "+s),e.push("BT"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(i){var t=Ls(i);t.scope=i.scope;var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),s=[],r=Wt.internal.getHeight(i),o=Wt.internal.getWidth(i),a=Zf(i,i.caption);return s.push("1 g"),s.push("0 0 "+ge(o)+" "+ge(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ge(o-1)+" "+ge(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+ge(a.fontSize)+" Tf "+n),s.push(a.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ge(Wt.internal.getWidth(i))+" "+ge(Wt.internal.getHeight(i))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(i){var t={D:{Off:Wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[i]=Wt.RadioButton.Circle.YesNormal,t.D[i]=Wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(i){var t=Ls(i);t.scope=i.scope;var e=[],n=Wt.internal.getWidth(i)<=Wt.internal.getHeight(i)?Wt.internal.getWidth(i)/4:Wt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=Wt.internal.Bezier_C,r=Number((n*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Rr(Wt.internal.getWidth(i)/2)+" "+Rr(Wt.internal.getHeight(i)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+r+" "+r+" "+n+" 0 "+n+" c"),e.push("-"+r+" "+n+" -"+n+" "+r+" -"+n+" 0 c"),e.push("-"+n+" -"+r+" -"+r+" -"+n+" 0 -"+n+" c"),e.push(r+" -"+n+" "+n+" -"+r+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=[],n=Wt.internal.getWidth(i)<=Wt.internal.getHeight(i)?Wt.internal.getWidth(i)/4:Wt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),r=Number((s*Wt.internal.Bezier_C).toFixed(5)),o=Number((n*Wt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Rr(Wt.internal.getWidth(i)/2)+" "+Rr(Wt.internal.getHeight(i)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),e.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),e.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),e.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Rr(Wt.internal.getWidth(i)/2)+" "+Rr(Wt.internal.getHeight(i)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),e.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),e.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),e.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=[],n=Wt.internal.getWidth(i)<=Wt.internal.getHeight(i)?Wt.internal.getWidth(i)/4:Wt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),r=Number((s*Wt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Rr(Wt.internal.getWidth(i)/2)+" "+Rr(Wt.internal.getHeight(i)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),e.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),e.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),e.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(i){var t={D:{Off:Wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[i]=Wt.RadioButton.Cross.YesNormal,t.D[i]=Wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(i){var t=Ls(i);t.scope=i.scope;var e=[],n=Wt.internal.calculateCross(i);return e.push("q"),e.push("1 1 "+ge(Wt.internal.getWidth(i)-2)+" "+ge(Wt.internal.getHeight(i)-2)+" re"),e.push("W"),e.push("n"),e.push(ge(n.x1.x)+" "+ge(n.x1.y)+" m"),e.push(ge(n.x2.x)+" "+ge(n.x2.y)+" l"),e.push(ge(n.x4.x)+" "+ge(n.x4.y)+" m"),e.push(ge(n.x3.x)+" "+ge(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=Wt.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+ge(Wt.internal.getWidth(i))+" "+ge(Wt.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ge(Wt.internal.getWidth(i)-2)+" "+ge(Wt.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(ge(e.x1.x)+" "+ge(e.x1.y)+" m"),n.push(ge(e.x2.x)+" "+ge(e.x2.y)+" l"),n.push(ge(e.x4.x)+" "+ge(e.x4.y)+" m"),n.push(ge(e.x3.x)+" "+ge(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(i){var t=Ls(i);t.scope=i.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ge(Wt.internal.getWidth(i))+" "+ge(Wt.internal.getHeight(i))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(i){var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,e=i.scope.__private__.encodeColorString(i.color);return"/"+t+" "+i.fontSize+" Tf "+e}};Wt.internal={Bezier_C:.551915024494,calculateCross:function(i){var t=Wt.internal.getWidth(i),e=Wt.internal.getHeight(i),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},Wt.internal.getWidth=function(i){var t=0;return je(i)==="object"&&(t=E2(i.Rect[2])),t},Wt.internal.getHeight=function(i){var t=0;return je(i)==="object"&&(t=E2(i.Rect[3])),t};var YM=ci.addField=function(i){if(WM(this,i),!(i instanceof ts))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=i).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};ci.AcroFormChoiceField=wa,ci.AcroFormListBox=ba,ci.AcroFormComboBox=xa,ci.AcroFormEditBox=ju,ci.AcroFormButton=ki,ci.AcroFormPushButton=Bu,ci.AcroFormRadioButton=Sa,ci.AcroFormCheckBox=qu,ci.AcroFormTextField=vo,ci.AcroFormPasswordField=Uu,ci.AcroFormAppearance=Wt,ci.AcroForm={ChoiceField:wa,ListBox:ba,ComboBox:xa,EditBox:ju,Button:ki,PushButton:Bu,RadioButton:Sa,CheckBox:qu,TextField:vo,PasswordField:Uu,Appearance:Wt},re.AcroForm={ChoiceField:wa,ListBox:ba,ComboBox:xa,EditBox:ju,Button:ki,PushButton:Bu,RadioButton:Sa,CheckBox:qu,TextField:vo,PasswordField:Uu,Appearance:Wt};function P2(i){return i.reduce(function(t,e,n){return t[e]=n,t},{})}(function(i){i.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(P,I){var U,G,nt,tt,Q,J=t;if((I=I||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(H(P))for(Q in e)for(nt=e[Q],U=0;U<nt.length;U+=1){for(tt=!0,G=0;G<nt[U].length;G+=1)if(nt[U][G]!==void 0&&nt[U][G]!==P[G]){tt=!1;break}if(tt===!0){J=Q;break}}else for(Q in e)for(nt=e[Q],U=0;U<nt.length;U+=1){for(tt=!0,G=0;G<nt[U].length;G+=1)if(nt[U][G]!==void 0&&nt[U][G]!==P.charCodeAt(G)){tt=!1;break}if(tt===!0){J=Q;break}}return J===t&&I!==t&&(J=I),J},s=function P(I){for(var U=this.internal.write,G=this.internal.putStream,nt=(0,this.internal.getFilters)();nt.indexOf("FlateEncode")!==-1;)nt.splice(nt.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var tt=[];if(tt.push({key:"Type",value:"/XObject"}),tt.push({key:"Subtype",value:"/Image"}),tt.push({key:"Width",value:I.width}),tt.push({key:"Height",value:I.height}),I.colorSpace===x.INDEXED?tt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(tt.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===x.DEVICE_CMYK&&tt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),tt.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&tt.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var Q="",J=0,dt=I.transparency.length;J<dt;J++)Q+=I.transparency[J]+" "+I.transparency[J]+" ";tt.push({key:"Mask",value:"["+Q+"]"})}I.sMask!==void 0&&tt.push({key:"SMask",value:I.objectId+1+" 0 R"});var ct=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:tt,alreadyAppliedFilters:ct,objectId:I.objectId}),U("endobj"),"sMask"in I&&I.sMask!==void 0){var Et="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,M={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:Et,data:I.sMask};"filter"in I&&(M.filter=I.filter),P.call(this,M)}if(I.colorSpace===x.INDEXED){var j=this.internal.newObject();G({data:F(new Uint8Array(I.palette)),objectId:j}),U("endobj")}},r=function(){var P=this.internal.collections.addImage_images;for(var I in P)s.call(this,P[I])},o=function(){var P,I=this.internal.collections.addImage_images,U=this.internal.write;for(var G in I)U("/I"+(P=I[G]).index,P.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var P=this.internal.collections.addImage_images;return a.call(this),P},l=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(P){return typeof i["process"+P.toUpperCase()]=="function"},d=function(P){return je(P)==="object"&&P.nodeType===1},g=function(P,I){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var U=""+P.getAttribute("src");if(U.indexOf("data:image/")===0)return Qh(unescape(U).split("base64,").pop());var G=i.loadFile(U,!0);if(G!==void 0)return G}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var nt;switch(I){case"PNG":nt="image/png";break;case"WEBP":nt="image/webp";break;case"JPEG":case"JPG":default:nt="image/jpeg"}return Qh(P.toDataURL(nt,1).split("base64,").pop())}},p=function(P){var I=this.internal.collections.addImage_images;if(I){for(var U in I)if(P===I[U].alias)return I[U]}},y=function(P,I,U){return P||I||(P=-96,I=-96),P<0&&(P=-1*U.width*72/P/this.internal.scaleFactor),I<0&&(I=-1*U.height*72/I/this.internal.scaleFactor),P===0&&(P=I*U.width/U.height),I===0&&(I=P*U.height/U.width),[P,I]},v=function(P,I,U,G,nt,tt){var Q=y.call(this,U,G,nt),J=this.internal.getCoordinateString,dt=this.internal.getVerticalCoordinateString,ct=h.call(this);if(U=Q[0],G=Q[1],ct[nt.index]=nt,tt){tt*=Math.PI/180;var Et=Math.cos(tt),M=Math.sin(tt),j=function(Y){return Y.toFixed(4)},B=[j(Et),j(M),j(-1*M),j(Et),0,0,"cm"]}this.internal.write("q"),tt?(this.internal.write([1,"0","0",1,J(P),dt(I+G),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([J(U),"0","0",J(G),"0","0","cm"].join(" "))):this.internal.write([J(U),"0","0",J(G),J(P),dt(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nt.index+" Do"),this.internal.write("Q")},x=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=i.__addimage__.sHashCode=function(P){var I,U,G=0;if(typeof P=="string")for(U=P.length,I=0;I<U;I++)G=(G<<5)-G+P.charCodeAt(I),G|=0;else if(H(P))for(U=P.byteLength/2,I=0;I<U;I++)G=(G<<5)-G+P[I],G|=0;return G},A=i.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var I=!0;return P.length===0&&(I=!1),P.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(I=!1),I},O=i.__addimage__.extractImageFromDataUrl=function(P){var I=(P=P||"").split("base64,"),U=null;if(I.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(G)&&(U={mimeType:G[1],charset:G[2],data:I[1]})}return U},k=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(P){return k()&&P instanceof ArrayBuffer};var H=i.__addimage__.isArrayBufferView=function(P){return k()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},W=i.__addimage__.binaryStringToUint8Array=function(P){for(var I=P.length,U=new Uint8Array(I),G=0;G<I;G++)U[G]=P.charCodeAt(G);return U},F=i.__addimage__.arrayBufferToBinaryString=function(P){for(var I="",U=H(P)?P:new Uint8Array(P),G=0;G<U.length;G+=8192)I+=String.fromCharCode.apply(null,U.subarray(G,G+8192));return I};i.addImage=function(){var P,I,U,G,nt,tt,Q,J,dt;if(typeof arguments[1]=="number"?(I=t,U=arguments[1],G=arguments[2],nt=arguments[3],tt=arguments[4],Q=arguments[5],J=arguments[6],dt=arguments[7]):(I=arguments[1],U=arguments[2],G=arguments[3],nt=arguments[4],tt=arguments[5],Q=arguments[6],J=arguments[7],dt=arguments[8]),je(P=arguments[0])==="object"&&!d(P)&&"imageData"in P){var ct=P;P=ct.imageData,I=ct.format||I||t,U=ct.x||U||0,G=ct.y||G||0,nt=ct.w||ct.width||nt,tt=ct.h||ct.height||tt,Q=ct.alias||Q,J=ct.compression||J,dt=ct.rotation||ct.angle||dt}var Et=this.internal.getFilters();if(J===void 0&&Et.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(U)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=$.call(this,P,I,Q,J);return v.call(this,U,G,nt,tt,M,dt),this};var $=function(P,I,U,G){var nt,tt,Q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var J=V(P,!1);(J!==""||(J=i.loadFile(P,!0))!==void 0)&&(P=J)}if(d(P)&&(P=g(P,I)),I=n(P,I),!c(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((Q=U)==null||Q.length===0)&&(U=function(dt){return typeof dt=="string"||H(dt)?S(dt):H(dt.data)?S(dt.data):null}(P)),(nt=p.call(this,U))||(k()&&(P instanceof Uint8Array||I==="RGBA"||(tt=P,P=W(P))),nt=this["process"+I.toUpperCase()](P,l.call(this),U,function(dt){return dt&&typeof dt=="string"&&(dt=dt.toUpperCase()),dt in i.image_compression?dt:b.NONE}(G),tt)),!nt)throw new Error("An unknown error occurred whilst processing the image.");return nt},V=i.__addimage__.convertBase64ToBinaryString=function(P,I){var U;I=typeof I!="boolean"||I;var G,nt="";if(typeof P=="string"){G=(U=O(P))!==null?U.data:P;try{nt=Qh(G)}catch(tt){if(I)throw A(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+tt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return nt};i.getImageProperties=function(P){var I,U,G="";if(d(P)&&(P=g(P)),typeof P=="string"&&n(P)===t&&((G=V(P,!1))===""&&(G=i.loadFile(P)||""),P=G),U=n(P),!c(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!k()||P instanceof Uint8Array||(P=W(P)),!(I=this["process"+U.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=U,I}})(re.API),function(i){var t=function(e){if(e!==void 0&&e!="")return!0};re.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(e){for(var n,s,r,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var g=0;g<l.length;g++){n=l[g];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),S=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+p(b(n.contents))+")",r+=" /Popup "+x.objId+" 0 R",r+=" /P "+h.objId+" 0 R",r+=" /T ("+p(b(S))+") >>",v.content=r;var A=v.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+A,n.open&&(r+=" /Open true"),r+=" >>",x.content=r,this.internal.write(v.objId,"0 R",x.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var H=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+H+" "+n.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),i.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},i.link=function(e,n,s,r,o){var a=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:h(e),y:l(n),w:h(e+s),h:l(n+r)},options:o,type:"link"})},i.textWithLink=function(e,n,s,r){var o,a,h=this.getTextWidth(e),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){a=r.maxWidth;var c=this.splitTextToSize(e,a).length;o=Math.ceil(l*c)}else a=h,o=l;return this.text(e,n,s,r),s+=.2*l,r.align==="center"&&(n-=h/2),r.align==="right"&&(n-=h),this.link(n,s-l,a,o,r),h},i.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}}(re.API),function(i){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];i.__arabicParser__={};var r=i.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=i.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},a=i.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&r(v)&&t[v.charCodeAt(0)].length<=2},h=i.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&r(v)&&t[v.charCodeAt(0)].length>=1};var l=i.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&r(v)&&t[v.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&r(v)&&t[v.charCodeAt(0)].length>=3};var c=i.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&r(v)&&t[v.charCodeAt(0)].length==4},d=i.__arabicParser__.resolveLigatures=function(v){var x=0,b=e,S="",A=0;for(x=0;x<v.length;x+=1)b[v.charCodeAt(x)]!==void 0?(A++,typeof(b=b[v.charCodeAt(x)])=="number"&&(S+=String.fromCharCode(b),b=e,A=0),x===v.length-1&&(b=e,S+=v.charAt(x-(A-1)),x-=A-1,A=0)):(b=e,S+=v.charAt(x-A),x-=A,A=0);return S};i.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var g=i.__arabicParser__.getCorrectForm=function(v,x,b){return o(v)?r(v)===!1?-1:!l(v)||!o(x)&&!o(b)||!o(b)&&a(x)||a(v)&&!o(x)||a(v)&&h(x)||a(v)&&a(x)?0:c(v)&&o(x)&&!a(x)&&o(b)&&l(b)?3:a(v)||!o(b)?1:2:-1},p=function(v){var x=0,b=0,S=0,A="",O="",k="",H=(v=v||"").split("\\s+"),W=[];for(x=0;x<H.length;x+=1){for(W.push(""),b=0;b<H[x].length;b+=1)A=H[x][b],O=H[x][b-1],k=H[x][b+1],o(A)?(S=g(A,O,k),W[x]+=S!==-1?String.fromCharCode(t[A.charCodeAt(0)][S]):A):W[x]+=A;W[x]=d(W[x])}return W.join(" ")},y=i.__arabicParser__.processArabic=i.processArabic=function(){var v,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(x)){var S=0;for(b=[],S=0;S<x.length;S+=1)Array.isArray(x[S])?b.push([p(x[S][0]),x[S][1],x[S][2]]):b.push([p(x[S])]);v=b}else v=p(x);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};i.events.push(["preProcessText",y])}(re.API),re.API.autoPrint=function(i){var t;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(i){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(a){r=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var s;if((e=e||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(re.API),function(i){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(v){g=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},i.getTextDimensions=function(h,l){n.call(this);var c=(l=l||{}).fontSize||this.getFontSize(),d=l.font||this.getFont(),g=l.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,x=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var b=l.maxWidth;b>0?typeof h=="string"?h=this.splitTextToSize(h,b):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(A,O){return A.concat(x.splitTextToSize(O,b))},[])):h=Array.isArray(h)?h:[h];for(var S=0;S<h.length;S++)p<(v=this.getStringUnitWidth(h[S],{font:d})*c)&&(p=v);return p!==0&&(y=h.length),{w:p/=g,h:Math.max((y*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/g,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=i.cell=function(){var h;h=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var l=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===h.lineNumber?(h.x=(l.x||0)+(l.width||0),h.y=l.y||0):l.y+l.height+h.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=d.top,p&&g&&(this.printHeaderRow(h.lineNumber,!0),h.y+=g[0].height)):h.y=l.y+l.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,e===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-c,h.y+c,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+c,{align:"center",baseline:"top",maxWidth:h.width-c-c}):this.text(h.text,h.x+c,h.y+c,{align:"left",baseline:"top",maxWidth:h.width-c-c})),this.internal.__cell__.lastCell=h,this};i.table=function(h,l,c,d,g){if(n.call(this),!c)throw new Error("No data for PDF table.");var p,y,v,x,b=[],S=[],A=[],O={},k={},H=[],W=[],F=(g=g||{}).autoSize||!1,$=g.printHeaders!==!1,V=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,P=g.margins||Object.assign({width:this.getPageWidth()},t),I=typeof g.padding=="number"?g.padding:3,U=g.headerBackgroundColor||"#c8c8c8",G=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=G,this.setFontSize(V),d==null)S=b=Object.keys(c[0]),A=b.map(function(){return"left"});else if(Array.isArray(d)&&je(d[0])==="object")for(b=d.map(function(ct){return ct.name}),S=d.map(function(ct){return ct.prompt||ct.name||""}),A=d.map(function(ct){return ct.align||"left"}),p=0;p<d.length;p+=1)k[d[p].name]=d[p].width*.7499990551181103;else Array.isArray(d)&&typeof d[0]=="string"&&(S=b=d,A=b.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(O[x=b[p]]=c.map(function(ct){return ct[x]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=O[x],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)H.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[x]=Math.max.apply(null,H)+I+I,H=[]}if($){var nt={};for(p=0;p<b.length;p+=1)nt[b[p]]={},nt[b[p]].text=S[p],nt[b[p]].align=A[p];var tt=a.call(this,nt,k);W=b.map(function(ct){return new r(h,l,k[ct],tt,nt[ct].text,void 0,nt[ct].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Q=d.reduce(function(ct,Et){return ct[Et.name]=Et.align,ct},{});for(p=0;p<c.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:c[p]},this);var J=a.call(this,c[p],k);for(v=0;v<b.length;v+=1){var dt=c[p][b[v]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:v,data:dt},this),o.call(this,new r(h,l,k[b[v]],J,dt,p+2,Q[b[v]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=l,this};var a=function(h,l){var c=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(h).map(function(p){var y=h[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,l[p]-c-c)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+c+c},this).reduce(function(p,y){return Math.max(p,y)},0)};i.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},i.printHeaderRow=function(h,l){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),l&&(c.y=this.internal.__cell__.margins.top||0,g.push(c)),c.lineNumber=h;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),e=!1}}(re.API);var R2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},I2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Jf=P2(I2),T2=[100,200,300,400,500,600,700,800,900],VM=P2(T2);function Qf(i){var t=i.family.replace(/"|'/g,"").toLowerCase(),e=function(r){return R2[r=r||"normal"]?r:"normal"}(i.style),n=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(i.weight),s=function(r){return typeof Jf[r=r||"normal"]=="number"?r:"normal"}(i.stretch);return{family:t,style:e,weight:n,stretch:s,src:i.src||[],ref:i.ref||{name:t,style:[s,e,n].join(" ")}}}function O2(i,t,e,n){var s;for(s=e;s>=0&&s<t.length;s+=n)if(i[t[s]])return i[t[s]];for(s=e;s>=0&&s<t.length;s-=n)if(i[t[s]])return i[t[s]]}var XM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},F2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k2(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function HM(i,t,e){for(var n=(e=e||{}).defaultFontFamily||"times",s=Object.assign({},XM,e.genericFontFamilies||{}),r=null,o=null,a=0;a<t.length;++a)if(s[(r=Qf(t[a])).family]&&(r.family=s[r.family]),i.hasOwnProperty(r.family)){o=i[r.family];break}if(!(o=o||i[n]))throw new Error("Could not find a font-family for the rule '"+k2(r)+"' and default family '"+n+"'.");if(o=function(h,l){if(l[h])return l[h];var c=Jf[h],d=c<=Jf.normal?-1:1,g=O2(l,I2,c,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+h);return g}(r.stretch,o),o=function(h,l){if(l[h])return l[h];for(var c=R2[h],d=0;d<c.length;++d)if(l[c[d]])return l[c[d]];throw new Error("Could not find a matching font-style for "+h)}(r.style,o),!(o=function(h,l){if(l[h])return l[h];if(h===400&&l[500])return l[500];if(h===500&&l[400])return l[400];var c=VM[h],d=O2(l,T2,c,h<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+h);return d}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+k2(r)+"'.");return o}function D2(i){return i.trimLeft()}function ZM(i,t){for(var e=0;e<i.length;){if(i.charAt(e)===t)return[i.substring(0,e),i.substring(e+1)];e+=1}return null}function KM(i){var t=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],i.substring(t[0].length)]}var zu,j2,B2,G2=["times"];(function(i){var t,e,n,s,r,o,a,h,l,c=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new h,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,h=this.internal.Matrix,l=new c}]);var d=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=M;Object.defineProperty(this,"pdf",{get:function(){return j}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(ft){B=!!ft}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(ft){Y=!!ft}});var it=0;Object.defineProperty(this,"posX",{get:function(){return it},set:function(ft){isNaN(ft)||(it=ft)}});var ot=0;Object.defineProperty(this,"posY",{get:function(){return ot},set:function(ft){isNaN(ft)||(ot=ft)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(ft){var z;typeof ft=="number"?z=[ft,ft,ft,ft]:((z=new Array(4))[0]=ft[0],z[1]=ft.length>=2?ft[1]:z[0],z[2]=ft.length>=3?ft[2]:z[0],z[3]=ft.length>=4?ft[3]:z[1]),l.margin=z}});var at=!1;Object.defineProperty(this,"autoPaging",{get:function(){return at},set:function(ft){at=ft}});var ut=0;Object.defineProperty(this,"lastBreak",{get:function(){return ut},set:function(ft){ut=ft}});var At=[];Object.defineProperty(this,"pageBreaks",{get:function(){return At},set:function(ft){At=ft}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(ft){ft instanceof c&&(l=ft)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(ft){l.path=ft}});var Mt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Mt},set:function(ft){Mt=ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ft){var z;z=g(ft),this.ctx.fillStyle=z.style,this.ctx.isFillTransparent=z.a===0,this.ctx.fillOpacity=z.a,this.pdf.setFillColor(z.r,z.g,z.b,{a:z.a}),this.pdf.setTextColor(z.r,z.g,z.b,{a:z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ft){var z=g(ft);this.ctx.strokeStyle=z.style,this.ctx.isStrokeTransparent=z.a===0,this.ctx.strokeOpacity=z.a,z.a===0?this.pdf.setDrawColor(255,255,255):(z.a,this.pdf.setDrawColor(z.r,z.g,z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ft){["butt","round","square"].indexOf(ft)!==-1&&(this.ctx.lineCap=ft,this.pdf.setLineCap(ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ft){isNaN(ft)||(this.ctx.lineWidth=ft,this.pdf.setLineWidth(ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ft){["bevel","round","miter"].indexOf(ft)!==-1&&(this.ctx.lineJoin=ft,this.pdf.setLineJoin(ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ft){isNaN(ft)||(this.ctx.miterLimit=ft,this.pdf.setMiterLimit(ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ft){this.ctx.textBaseline=ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ft){["right","end","center","left","start"].indexOf(ft)!==-1&&(this.ctx.textAlign=ft)}});var Tt=null;function It(ft,z){if(Tt===null){var oe=function(zt){var xt=[];return Object.keys(zt).forEach(function(Pt){zt[Pt].forEach(function(Nt){var Lt=null;switch(Nt){case"bold":Lt={family:Pt,weight:"bold"};break;case"italic":Lt={family:Pt,style:"italic"};break;case"bolditalic":Lt={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:Pt}}Lt!==null&&(Lt.ref={name:Pt,style:Nt},xt.push(Lt))})}),xt}(ft.getFontList());Tt=function(zt){for(var xt={},Pt=0;Pt<zt.length;++Pt){var Nt=Qf(zt[Pt]),Lt=Nt.family,qt=Nt.stretch,Zt=Nt.style,ae=Nt.weight;xt[Lt]=xt[Lt]||{},xt[Lt][qt]=xt[Lt][qt]||{},xt[Lt][qt][Zt]=xt[Lt][qt][Zt]||{},xt[Lt][qt][Zt][ae]=Nt}return xt}(oe.concat(z))}return Tt}var Xt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xt},set:function(ft){Tt=null,Xt=ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ft){var z;if(this.ctx.font=ft,(z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ft))!==null){var oe=z[1],zt=(z[2],z[3]),xt=z[4],Pt=(z[5],z[6]),Nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xt)[2];xt=Math.floor(Nt==="px"?parseFloat(xt)*this.pdf.internal.scaleFactor:Nt==="em"?parseFloat(xt)*this.pdf.getFontSize():parseFloat(xt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xt);var Lt=function(te){var Jt,Ot,Di=[],Pe=te.trim();if(Pe==="")return G2;if(Pe in F2)return[F2[Pe]];for(;Pe!=="";){switch(Ot=null,Jt=(Pe=D2(Pe)).charAt(0)){case'"':case"'":Ot=ZM(Pe.substring(1),Jt);break;default:Ot=KM(Pe)}if(Ot===null||(Di.push(Ot[0]),(Pe=D2(Ot[1]))!==""&&Pe.charAt(0)!==","))return G2;Pe=Pe.replace(/^,/,"")}return Di}(Pt);if(this.fontFaces){var qt=HM(It(this.pdf,this.fontFaces),Lt.map(function(te){return{family:te,stretch:"normal",weight:zt,style:oe}}));this.pdf.setFont(qt.ref.name,qt.ref.style)}else{var Zt="";(zt==="bold"||parseInt(zt,10)>=700||oe==="bold")&&(Zt="bold"),oe==="italic"&&(Zt+="italic"),Zt.length===0&&(Zt="normal");for(var ae="",le={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<Lt.length;ve++){if(this.pdf.internal.getFont(Lt[ve],Zt,{noFallback:!0,disableWarning:!0})!==void 0){ae=Lt[ve];break}if(Zt==="bolditalic"&&this.pdf.internal.getFont(Lt[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ae=Lt[ve],Zt="bold";else if(this.pdf.internal.getFont(Lt[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ae=Lt[ve],Zt="normal";break}}if(ae===""){for(var Ne=0;Ne<Lt.length;Ne++)if(le[Lt[Ne]]){ae=le[Lt[Ne]];break}}ae=ae===""?"Times":ae,this.pdf.setFont(ae,Zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ft){this.ctx.globalCompositeOperation=ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ft){this.ctx.globalAlpha=ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ft){this.ctx.lineDashOffset=ft,Et.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ft){this.ctx.lineDash=ft,Et.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ft){this.ctx.ignoreClearRect=!!ft}})};d.prototype.setLineDash=function(M){this.lineDash=M},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){O.call(this,"fill",!1)},d.prototype.stroke=function(){O.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(M,j){if(isNaN(M)||isNaN(j))throw Ke.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(M,j)},d.prototype.closePath=function(){var M=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&je(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){M=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},d.prototype.lineTo=function(M,j){if(isNaN(M)||isNaN(j))throw Ke.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(B.x,B.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},d.prototype.quadraticCurveTo=function(M,j,B,Y){if(isNaN(B)||isNaN(Y)||isNaN(M)||isNaN(j))throw Ke.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var it=this.ctx.transform.applyToPoint(new o(B,Y)),ot=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"qct",x1:ot.x,y1:ot.y,x:it.x,y:it.y}),this.ctx.lastPoint=new o(it.x,it.y)},d.prototype.bezierCurveTo=function(M,j,B,Y,it,ot){if(isNaN(it)||isNaN(ot)||isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y))throw Ke.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var at=this.ctx.transform.applyToPoint(new o(it,ot)),ut=this.ctx.transform.applyToPoint(new o(M,j)),At=this.ctx.transform.applyToPoint(new o(B,Y));this.path.push({type:"bct",x1:ut.x,y1:ut.y,x2:At.x,y2:At.y,x:at.x,y:at.y}),this.ctx.lastPoint=new o(at.x,at.y)},d.prototype.arc=function(M,j,B,Y,it,ot){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y)||isNaN(it))throw Ke.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ot=!!ot,!this.ctx.transform.isIdentity){var at=this.ctx.transform.applyToPoint(new o(M,j));M=at.x,j=at.y;var ut=this.ctx.transform.applyToPoint(new o(0,B)),At=this.ctx.transform.applyToPoint(new o(0,0));B=Math.sqrt(Math.pow(ut.x-At.x,2)+Math.pow(ut.y-At.y,2))}Math.abs(it-Y)>=2*Math.PI&&(Y=0,it=2*Math.PI),this.path.push({type:"arc",x:M,y:j,radius:B,startAngle:Y,endAngle:it,counterclockwise:ot})},d.prototype.arcTo=function(M,j,B,Y,it){throw new Error("arcTo not implemented.")},d.prototype.rect=function(M,j,B,Y){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y))throw Ke.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,j),this.lineTo(M+B,j),this.lineTo(M+B,j+Y),this.lineTo(M,j+Y),this.lineTo(M,j),this.lineTo(M+B,j),this.lineTo(M,j)},d.prototype.fillRect=function(M,j,B,Y){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y))throw Ke.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var it={};this.lineCap!=="butt"&&(it.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(it.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,j,B,Y),this.fill(),it.hasOwnProperty("lineCap")&&(this.lineCap=it.lineCap),it.hasOwnProperty("lineJoin")&&(this.lineJoin=it.lineJoin)}},d.prototype.strokeRect=function(M,j,B,Y){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y))throw Ke.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(M,j,B,Y),this.stroke())},d.prototype.clearRect=function(M,j,B,Y){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y))throw Ke.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,j,B,Y))},d.prototype.save=function(M){M=typeof M!="boolean"||M;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},d.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(j),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(M){var j,B,Y,it;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))j=0,B=0,Y=0,it=0;else{var ot=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ot!==null)j=parseInt(ot[1]),B=parseInt(ot[2]),Y=parseInt(ot[3]),it=1;else if((ot=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)j=parseInt(ot[1]),B=parseInt(ot[2]),Y=parseInt(ot[3]),it=parseFloat(ot[4]);else{if(it=1,typeof M=="string"&&M.charAt(0)!=="#"){var at=new w2(M);M=at.ok?at.toHex():"#000000"}M.length===4?(j=M.substring(1,2),j+=j,B=M.substring(2,3),B+=B,Y=M.substring(3,4),Y+=Y):(j=M.substring(1,3),B=M.substring(3,5),Y=M.substring(5,7)),j=parseInt(j,16),B=parseInt(B,16),Y=parseInt(Y,16)}}return{r:j,g:B,b:Y,a:it,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(M,j,B,Y){if(isNaN(j)||isNaN(B)||typeof M!="string")throw Ke.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var it=J(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;I.call(this,{text:M,x:j,y:B,scale:ot,angle:it,align:this.textAlign,maxWidth:Y})}},d.prototype.strokeText=function(M,j,B,Y){if(isNaN(j)||isNaN(B)||typeof M!="string")throw Ke.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Y=isNaN(Y)?void 0:Y;var it=J(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;I.call(this,{text:M,x:j,y:B,scale:ot,renderingMode:"stroke",angle:it,align:this.textAlign,maxWidth:Y})}},d.prototype.measureText=function(M){if(typeof M!="string")throw Ke.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,B=this.pdf.internal.scaleFactor,Y=j.internal.getFontSize(),it=j.getStringUnitWidth(M)*Y/j.internal.scaleFactor,ot=function(at){var ut=(at=at||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ut}}),this};return new ot({width:it*=Math.round(96*B/72*1e4)/1e4})},d.prototype.scale=function(M,j){if(isNaN(M)||isNaN(j))throw Ke.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new h(M,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.rotate=function(M){if(isNaN(M))throw Ke.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new h(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},d.prototype.translate=function(M,j){if(isNaN(M)||isNaN(j))throw Ke.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new h(1,0,0,1,M,j);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.transform=function(M,j,B,Y,it,ot){if(isNaN(M)||isNaN(j)||isNaN(B)||isNaN(Y)||isNaN(it)||isNaN(ot))throw Ke.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var at=new h(M,j,B,Y,it,ot);this.ctx.transform=this.ctx.transform.multiply(at)},d.prototype.setTransform=function(M,j,B,Y,it,ot){M=isNaN(M)?1:M,j=isNaN(j)?0:j,B=isNaN(B)?0:B,Y=isNaN(Y)?1:Y,it=isNaN(it)?0:it,ot=isNaN(ot)?0:ot,this.ctx.transform=new h(M,j,B,Y,it,ot)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(M,j,B,Y,it,ot,at,ut,At){var Mt=this.pdf.getImageProperties(M),Tt=1,It=1,Xt=1,ft=1;Y!==void 0&&ut!==void 0&&(Xt=ut/Y,ft=At/it,Tt=Mt.width/Y*ut/Y,It=Mt.height/it*At/it),ot===void 0&&(ot=j,at=B,j=0,B=0),Y!==void 0&&ut===void 0&&(ut=Y,At=it),Y===void 0&&ut===void 0&&(ut=Mt.width,At=Mt.height);for(var z,oe=this.ctx.transform.decompose(),zt=J(oe.rotate.shx),xt=new h,Pt=(xt=(xt=(xt=xt.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale)).applyToRectangle(new a(ot-j*Xt,at-B*ft,Y*Tt,it*It)),Nt=x.call(this,Pt),Lt=[],qt=0;qt<Nt.length;qt+=1)Lt.indexOf(Nt[qt])===-1&&Lt.push(Nt[qt]);if(A(Lt),this.autoPaging)for(var Zt=Lt[0],ae=Lt[Lt.length-1],le=Zt;le<ae+1;le++){this.pdf.setPage(le);var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=le===1?this.posY+this.margin[0]:this.margin[0],te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ot=le===1?0:te+(le-2)*Jt;if(this.ctx.clip_path.length!==0){var Di=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(z,this.posX+this.margin[3],-Ot+Ne+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Di}var Pe=JSON.parse(JSON.stringify(Pt));Pe=S([Pe],this.posX+this.margin[3],-Ot+Ne+this.ctx.prevPageLastElemOffset)[0];var yn=(le>Zt||le<ae)&&v.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,Jt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,zt),yn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,zt)};var x=function(M,j,B){var Y=[];j=j||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var it=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Y.push(Math.floor((M.y+it)/B)+1);break;case"arc":Y.push(Math.floor((M.y+it-M.radius)/B)+1),Y.push(Math.floor((M.y+it+M.radius)/B)+1);break;case"qct":var ot=dt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Y.push(Math.floor((ot.y+it)/B)+1),Y.push(Math.floor((ot.y+ot.h+it)/B)+1);break;case"bct":var at=ct(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Y.push(Math.floor((at.y+it)/B)+1),Y.push(Math.floor((at.y+at.h+it)/B)+1);break;case"rect":Y.push(Math.floor((M.y+it)/B)+1),Y.push(Math.floor((M.y+M.h+it)/B)+1)}for(var ut=0;ut<Y.length;ut+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ut];)b.call(this);return Y},b=function(){var M=this.fillStyle,j=this.strokeStyle,B=this.font,Y=this.lineCap,it=this.lineWidth,ot=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=j,this.font=B,this.lineCap=Y,this.lineWidth=it,this.lineJoin=ot},S=function(M,j,B){for(var Y=0;Y<M.length;Y++)switch(M[Y].type){case"bct":M[Y].x2+=j,M[Y].y2+=B;case"qct":M[Y].x1+=j,M[Y].y1+=B;case"mt":case"lt":case"arc":default:M[Y].x+=j,M[Y].y+=B}return M},A=function(M){return M.sort(function(j,B){return j-B})},O=function(M,j){for(var B,Y,it=this.fillStyle,ot=this.strokeStyle,at=this.lineCap,ut=this.lineWidth,At=Math.abs(ut*this.ctx.transform.scaleX),Mt=this.lineJoin,Tt=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),Xt=[],ft=0;ft<It.length;ft++)if(It[ft].x!==void 0)for(var z=x.call(this,It[ft]),oe=0;oe<z.length;oe+=1)Xt.indexOf(z[oe])===-1&&Xt.push(z[oe]);for(var zt=0;zt<Xt.length;zt++)for(;this.pdf.internal.getNumberOfPages()<Xt[zt];)b.call(this);if(A(Xt),this.autoPaging)for(var xt=Xt[0],Pt=Xt[Xt.length-1],Nt=xt;Nt<Pt+1;Nt++){this.pdf.setPage(Nt),this.fillStyle=it,this.strokeStyle=ot,this.lineCap=at,this.lineWidth=At,this.lineJoin=Mt;var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Nt===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],le=Nt===1?0:Zt+(Nt-2)*ae;if(this.ctx.clip_path.length!==0){var ve=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(B,this.posX+this.margin[3],-le+qt+this.ctx.prevPageLastElemOffset),k.call(this,M,!0),this.path=ve}if(Y=JSON.parse(JSON.stringify(Tt)),this.path=S(Y,this.posX+this.margin[3],-le+qt+this.ctx.prevPageLastElemOffset),j===!1||Nt===0){var Ne=(Nt>xt||Nt<Pt)&&v.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,ae,null).clip().discardPath()),k.call(this,M,j),Ne&&this.pdf.restoreGraphicsState()}this.lineWidth=ut}else this.lineWidth=At,k.call(this,M,j),this.lineWidth=ut;this.path=Tt},k=function(M,j){if((M!=="stroke"||j||!y.call(this))&&(M==="stroke"||j||!p.call(this))){for(var B,Y,it=[],ot=this.path,at=0;at<ot.length;at++){var ut=ot[at];switch(ut.type){case"begin":it.push({begin:!0});break;case"close":it.push({close:!0});break;case"mt":it.push({start:ut,deltas:[],abs:[]});break;case"lt":var At=it.length;if(ot[at-1]&&!isNaN(ot[at-1].x)&&(B=[ut.x-ot[at-1].x,ut.y-ot[at-1].y],At>0)){for(;At>=0;At--)if(it[At-1].close!==!0&&it[At-1].begin!==!0){it[At-1].deltas.push(B),it[At-1].abs.push(ut);break}}break;case"bct":B=[ut.x1-ot[at-1].x,ut.y1-ot[at-1].y,ut.x2-ot[at-1].x,ut.y2-ot[at-1].y,ut.x-ot[at-1].x,ut.y-ot[at-1].y],it[it.length-1].deltas.push(B);break;case"qct":var Mt=ot[at-1].x+2/3*(ut.x1-ot[at-1].x),Tt=ot[at-1].y+2/3*(ut.y1-ot[at-1].y),It=ut.x+2/3*(ut.x1-ut.x),Xt=ut.y+2/3*(ut.y1-ut.y),ft=ut.x,z=ut.y;B=[Mt-ot[at-1].x,Tt-ot[at-1].y,It-ot[at-1].x,Xt-ot[at-1].y,ft-ot[at-1].x,z-ot[at-1].y],it[it.length-1].deltas.push(B);break;case"arc":it.push({deltas:[],abs:[],arc:!0}),Array.isArray(it[it.length-1].abs)&&it[it.length-1].abs.push(ut)}}Y=j?null:M==="stroke"?"stroke":"fill";for(var oe=!1,zt=0;zt<it.length;zt++)if(it[zt].arc)for(var xt=it[zt].abs,Pt=0;Pt<xt.length;Pt++){var Nt=xt[Pt];Nt.type==="arc"?F.call(this,Nt.x,Nt.y,Nt.radius,Nt.startAngle,Nt.endAngle,Nt.counterclockwise,void 0,j,!oe):U.call(this,Nt.x,Nt.y),oe=!0}else if(it[zt].close===!0)this.pdf.internal.out("h"),oe=!1;else if(it[zt].begin!==!0){var Lt=it[zt].start.x,qt=it[zt].start.y;G.call(this,it[zt].deltas,Lt,qt),oe=!0}Y&&$.call(this,Y),j&&V.call(this)}},H=function(M){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-B;case"top":return M+j-B;case"hanging":return M+j-2*B;case"middle":return M+j/2-B;case"ideographic":return M;case"alphabetic":default:return M}},W=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(j,B){this.colorStops.push([j,B])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(M,j,B,Y,it,ot,at,ut,At){for(var Mt=tt.call(this,B,Y,it,ot),Tt=0;Tt<Mt.length;Tt++){var It=Mt[Tt];Tt===0&&(At?P.call(this,It.x1+M,It.y1+j):U.call(this,It.x1+M,It.y1+j)),nt.call(this,M,j,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}ut?V.call(this):$.call(this,at)},$=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,j){this.pdf.internal.out(e(M)+" "+n(j)+" m")},I=function(M){var j;switch(M.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var B=this.pdf.getTextDimensions(M.text),Y=H.call(this,M.y),it=W.call(this,Y)-B.h,ot=this.ctx.transform.applyToPoint(new o(M.x,Y)),at=this.ctx.transform.decompose(),ut=new h;ut=(ut=(ut=ut.multiply(at.translate)).multiply(at.skew)).multiply(at.scale);for(var At,Mt,Tt,It=this.ctx.transform.applyToRectangle(new a(M.x,Y,B.w,B.h)),Xt=ut.applyToRectangle(new a(M.x,it,B.w,B.h)),ft=x.call(this,Xt),z=[],oe=0;oe<ft.length;oe+=1)z.indexOf(ft[oe])===-1&&z.push(ft[oe]);if(A(z),this.autoPaging)for(var zt=z[0],xt=z[z.length-1],Pt=zt;Pt<xt+1;Pt++){this.pdf.setPage(Pt);var Nt=Pt===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[2],Zt=qt-this.margin[0],ae=this.pdf.internal.pageSize.width-this.margin[1],le=ae-this.margin[3],ve=Pt===1?0:Lt+(Pt-2)*Zt;if(this.ctx.clip_path.length!==0){var Ne=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(At,this.posX+this.margin[3],-1*ve+Nt),k.call(this,"fill",!0),this.path=Ne}var te=S([JSON.parse(JSON.stringify(Xt))],this.posX+this.margin[3],-ve+Nt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*M.scale),Tt=this.lineWidth,this.lineWidth=Tt*M.scale);var Jt=this.autoPaging!=="text";if(Jt||te.y+te.h<=qt){if(Jt||te.y>=Nt&&te.x<=ae){var Ot=Jt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||ae-te.x)[0],Di=S([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-ve+Nt+this.ctx.prevPageLastElemOffset)[0],Pe=Jt&&(Pt>zt||Pt<xt)&&v.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],le,Zt,null).clip().discardPath()),this.pdf.text(Ot,Di.x,Di.y,{angle:M.angle,align:j,renderingMode:M.renderingMode}),Pe&&this.pdf.restoreGraphicsState()}}else te.y<qt&&(this.ctx.prevPageLastElemOffset+=qt-te.y);M.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=Tt)}else M.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*M.scale),Tt=this.lineWidth,this.lineWidth=Tt*M.scale),this.pdf.text(M.text,ot.x+this.posX,ot.y+this.posY,{angle:M.angle,align:j,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=Tt)},U=function(M,j,B,Y){B=B||0,Y=Y||0,this.pdf.internal.out(e(M+B)+" "+n(j+Y)+" l")},G=function(M,j,B){return this.pdf.lines(M,j,B,null,null)},nt=function(M,j,B,Y,it,ot,at,ut){this.pdf.internal.out([t(s(B+M)),t(r(Y+j)),t(s(it+M)),t(r(ot+j)),t(s(at+M)),t(r(ut+j)),"c"].join(" "))},tt=function(M,j,B,Y){for(var it=2*Math.PI,ot=Math.PI/2;j>B;)j-=it;var at=Math.abs(B-j);at<it&&Y&&(at=it-at);for(var ut=[],At=Y?-1:1,Mt=j;at>1e-5;){var Tt=Mt+At*Math.min(at,ot);ut.push(Q.call(this,M,Mt,Tt)),at-=Math.abs(Tt-Mt),Mt=Tt}return ut},Q=function(M,j,B){var Y=(B-j)/2,it=M*Math.cos(Y),ot=M*Math.sin(Y),at=it,ut=-ot,At=at*at+ut*ut,Mt=At+at*it+ut*ot,Tt=4/3*(Math.sqrt(2*At*Mt)-Mt)/(at*ot-ut*it),It=at-Tt*ut,Xt=ut+Tt*at,ft=It,z=-Xt,oe=Y+j,zt=Math.cos(oe),xt=Math.sin(oe);return{x1:M*Math.cos(j),y1:M*Math.sin(j),x2:It*zt-Xt*xt,y2:It*xt+Xt*zt,x3:ft*zt-z*xt,y3:ft*xt+z*zt,x4:M*Math.cos(B),y4:M*Math.sin(B)}},J=function(M){return 180*M/Math.PI},dt=function(M,j,B,Y,it,ot){var at=M+.5*(B-M),ut=j+.5*(Y-j),At=it+.5*(B-it),Mt=ot+.5*(Y-ot),Tt=Math.min(M,it,at,At),It=Math.max(M,it,at,At),Xt=Math.min(j,ot,ut,Mt),ft=Math.max(j,ot,ut,Mt);return new a(Tt,Xt,It-Tt,ft-Xt)},ct=function(M,j,B,Y,it,ot,at,ut){var At,Mt,Tt,It,Xt,ft,z,oe,zt,xt,Pt,Nt,Lt,qt,Zt=B-M,ae=Y-j,le=it-B,ve=ot-Y,Ne=at-it,te=ut-ot;for(Mt=0;Mt<41;Mt++)zt=(z=(Tt=M+(At=Mt/40)*Zt)+At*((Xt=B+At*le)-Tt))+At*(Xt+At*(it+At*Ne-Xt)-z),xt=(oe=(It=j+At*ae)+At*((ft=Y+At*ve)-It))+At*(ft+At*(ot+At*te-ft)-oe),Mt==0?(Pt=zt,Nt=xt,Lt=zt,qt=xt):(Pt=Math.min(Pt,zt),Nt=Math.min(Nt,xt),Lt=Math.max(Lt,zt),qt=Math.max(qt,xt));return new a(Math.round(Pt),Math.round(Nt),Math.round(Lt-Pt),Math.round(qt-Nt))},Et=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,j,B=(M=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:j}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(re.API),function(i){var t=function(r){var o,a,h,l,c,d,g,p,y,v;for(a=[],h=0,l=(r+=o="\0\0\0\0".slice(r.length%4||4)).length;l>h;h+=4)(c=(r.charCodeAt(h)<<24)+(r.charCodeAt(h+1)<<16)+(r.charCodeAt(h+2)<<8)+r.charCodeAt(h+3))!==0?(d=(c=((c=((c=((c=(c-(v=c%85))/85)-(y=c%85))/85)-(p=c%85))/85)-(g=c%85))/85)%85,a.push(d+33,g+33,p+33,y+33,v+33)):a.push(122);return function(x,b){for(var S=b;S>0;S--)x.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},e=function(r){var o,a,h,l,c,d=String,g="length",p=255,y="charCodeAt",v="slice",x="replace";for(r[v](-2),r=r[v](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),h=[],l=0,c=(r+=o="uuuuu"[v](r[g]%5||5))[g];c>l;l+=5)a=52200625*(r[y](l)-33)+614125*(r[y](l+1)-33)+7225*(r[y](l+2)-33)+85*(r[y](l+3)-33)+(r[y](l+4)-33),h.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(b,S){for(var A=S;A>0;A--)b.pop()}(h,o[g]),d.fromCharCode.apply(d,h)},n=function(r){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),o.test(r)===!1)return"";for(var a="",h=0;h<r.length;h+=2)a+=String.fromCharCode("0x"+(r[h]+r[h+1]));return a},s=function(r){for(var o=new Uint8Array(r.length),a=r.length;a--;)o[a]=r.charCodeAt(a);return r=(o=qf(o)).reduce(function(h,l){return h+String.fromCharCode(l)},"")};i.processDataByFilters=function(r,o){var a=0,h=r||"",l=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":h=e(h),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=n(h),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=s(h),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:h,reverseChain:l.reverse().join(" ")}}}(re.API),function(i){i.loadFile=function(t,e,n){return function(s,r,o){r=r!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(h,l,c){var d=new XMLHttpRequest,g=0,p=function(y){var v=y.length,x=[],b=String.fromCharCode;for(g=0;g<v;g+=1)x.push(b(255&y.charCodeAt(g)));return x.join("")};if(d.open("GET",h,!l),d.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(d.onload=function(){d.status===200?c(p(this.responseText)):c(void 0)}),d.send(null),l&&d.status===200)return p(d.responseText)}(s,r,o)}catch{}return a}(t,e,n)},i.loadImageFile=i.loadFile}(re.API),function(i){function t(){return(se.html2canvas?Promise.resolve(se.html2canvas):If(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(se.DOMPurify?Promise.resolve(se.DOMPurify):If(()=>import("./purify.es-cf254a40.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var a=je(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(o,a){var h=document.createElement(o);for(var l in a.className&&(h.className=a.className),a.innerHTML&&a.dompurify&&(h.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)h.style[l]=a.style[l];return h},r=function o(a){var h=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),l=o.convert(Promise.resolve(),h);return l=(l=l.setProgress(1,o,1,[o])).set(a)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(o,a){return o.__proto__=a||r.prototype,o},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(h){return this.set({src:s("div",{innerHTML:o,dompurify:h})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},r.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function h(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)c!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(h(g,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,a(this.prop.container,h)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var h=this.opt.jsPDF,l=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=l,l)for(var g=0;g<l.length;++g){var p=l[g],y=p.src.find(function(v){return v.format==="truetype"});y&&h.addFont(y.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,h.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(o,a,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},r.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},r.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},r.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(o){if(n(o)!=="object")return this;var a=Object.keys(o||{}).map(function(h){if(h in r.template.prop)return function(){this.prop[h]=o[h]};switch(h){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[h]=o[h]}}},this);return this.then(function(){return this.thenList(a)})},r.prototype.get=function(o,a){return this.then(function(){var h=o in r.template.prop?this.prop[o]:this.opt[o];return a?a(h):h})},r.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},r.prototype.setPageSize=function(o){function a(h,l){return Math.floor(h*l/72*96)}return this.then(function(){(o=o||re.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},r.prototype.setProgress=function(o,a,h,l){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),h!=null&&(this.progress.n=h),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(o,a,h,l){return this.setProgress(o?this.progress.val+o:null,a||null,h?this.progress.n+h:null,l?this.progress.stack.concat(l):null)},r.prototype.then=function(o,a){var h=this;return this.thenCore(o,a,function(l,c){return h.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(d){return h.updateProgress(null,l),d}).then(l,c).then(function(d){return h.updateProgress(1),d})})},r.prototype.thenCore=function(o,a,h){h=h||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var l=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),c=h.call(l,o,a);return r.convert(c,this.__proto__)},r.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},r.prototype.thenList=function(o){var a=this;return o.forEach(function(h){a=a.thenCore(h)}),a},r.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return r.convert(a,this)},r.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},r.prototype.error=function(o){return this.then(function(){throw new Error(o)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,re.getPageSize=function(o,a,h){if(je(o)==="object"){var l=o;o=l.orientation,a=l.unit||a,h=l.format||h}a=a||"mm",h=h||"a4",o=(""+(o||"P")).toLowerCase();var c,d=(""+h).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=2.834645669291339;break;case"cm":c=28.346456692913385;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var p,y=0,v=0;if(g.hasOwnProperty(d))y=g[d][1]/c,v=g[d][0]/c;else try{y=h[1],v=h[0]}catch{throw new Error("Invalid format: "+h)}if(o==="p"||o==="portrait")o="p",v>y&&(p=v,v=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:a,k:c,orientation:o}},i.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Qf):null;var h=new r(a);return a.worker?h:h.from(o).doCallback()}}(re.API),re.API.addJS=function(i){return B2=i,this.internal.events.subscribe("postPutResources",function(){zu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),j2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+B2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zu!==void 0&&j2!==void 0&&this.internal.out("/Names <</JavaScript "+zu+" 0 R>>")}),this},function(i){var t;i.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),r=0;r<s.length;r++){var o=s[r],a=n.exec(o);if(a!=null){var h=a[1];e.internal.newObjectDeferredBegin(h,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(r=0;r<l;r++){var d=e.internal.newObject();c.push(d);var g=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<c.length;r++)e.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),i.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,s,r){var o={title:s,options:r,children:[]};return n==null&&(n=this.root),n.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<n.children.length;r++){var o=n.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),r>0&&this.line("/Prev "+this.makeRef(n.children[r-1])),r<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var h=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var l=0;l<n.children.length;l++)this.renderItems(n.children[l])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,s){for(var r=0;r<s.children.length;r++)n.count++,this.count_r(n,s.children[r]);return n.count}}])}(re.API),function(i){var t=[192,193,194,195,196,197,198,199];i.processJPEG=function(e,n,s,r,o,a){var h,l=this.decode.DCT_DECODE,c=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(h=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},x=4;x<y;x+=2){if(x+=p,t.indexOf(d.charCodeAt(x+1))!==-1){g=256*d.charCodeAt(x+5)+d.charCodeAt(x+6),v={width:256*d.charCodeAt(x+7)+d.charCodeAt(x+8),height:g,numcomponents:d.charCodeAt(x+9)};break}p=256*d.charCodeAt(x+2)+d.charCodeAt(x+3)}return v}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:h.width,height:h.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:s}}return c}}(re.API);var Ma,Wu,q2,U2,z2,JM=function(){var i,t,e;function n(r){var o,a,h,l,c,d,g,p,y,v,x,b,S,A;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var O,k;for(k=[],O=0;O<4;++O)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),l=this.readUInt16()||100,d.delay=1e3*c/l,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),r=(d==null?void 0:d.data)||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((v=h-this.transparency.indexed.length)>0)for(S=0;0<=v?S<v:S>v;0<=v?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(x=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,x.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(A=this.colorType)===4||A===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(r){var o,a;for(a=[],o=0;0<=r?o<r:o>r;0<=r?++o:--o)a.push(this.data[this.pos++]);return a},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(r){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),h=0,l=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function c(d,g,p,y){var v,x,b,S,A,O,k,H,W,F,$,V,P,I,U,G,nt,tt,Q,J,dt,ct=Math.ceil((l.width-d)/p),Et=Math.ceil((l.height-g)/y),M=l.width==ct&&l.height==Et;for(I=o*ct,V=M?a:new Uint8Array(I*Et),O=r.length,P=0,x=0;P<Et&&h<O;){switch(r[h++]){case 0:for(S=nt=0;nt<I;S=nt+=1)V[x++]=r[h++];break;case 1:for(S=tt=0;tt<I;S=tt+=1)v=r[h++],A=S<o?0:V[x-o],V[x++]=(v+A)%256;break;case 2:for(S=Q=0;Q<I;S=Q+=1)v=r[h++],b=(S-S%o)/o,U=P&&V[(P-1)*I+b*o+S%o],V[x++]=(U+v)%256;break;case 3:for(S=J=0;J<I;S=J+=1)v=r[h++],b=(S-S%o)/o,A=S<o?0:V[x-o],U=P&&V[(P-1)*I+b*o+S%o],V[x++]=(v+Math.floor((A+U)/2))%256;break;case 4:for(S=dt=0;dt<I;S=dt+=1)v=r[h++],b=(S-S%o)/o,A=S<o?0:V[x-o],P===0?U=G=0:(U=V[(P-1)*I+b*o+S%o],G=b&&V[(P-1)*I+(b-1)*o+S%o]),k=A+U-G,H=Math.abs(k-A),F=Math.abs(k-U),$=Math.abs(k-G),W=H<=F&&H<=$?A:F<=$?U:G,V[x++]=(v+W)%256;break;default:throw new Error("Invalid filter algorithm: "+r[h-1])}if(!M){var j=((g+P*y)*l.width+d)*o,B=P*I;for(S=0;S<ct;S+=1){for(var Y=0;Y<o;Y+=1)a[j++]=V[B++];j+=(p-1)*o}}P++}}return r=RM(r),l.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},n.prototype.decodePalette=function(){var r,o,a,h,l,c,d,g,p;for(a=this.palette,c=this.transparency.indexed||[],l=new Uint8Array((c.length||0)+a.length),h=0,r=0,o=d=0,g=a.length;d<g;o=d+=3)l[h++]=a[o],l[h++]=a[o+1],l[h++]=a[o+2],l[h++]=(p=c[r++])!=null?p:255;return l},n.prototype.copyToImageData=function(r,o){var a,h,l,c,d,g,p,y,v,x,b;if(h=this.colors,v=null,a=this.hasAlphaChannel,this.palette.length&&(v=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),h=4,a=!0),y=(l=r.data||r).length,d=v||o,c=g=0,h===1)for(;c<y;)p=v?4*o[c/4]:g,x=d[p++],l[c++]=x,l[c++]=x,l[c++]=x,l[c++]=a?d[p++]:255,g=p;else for(;c<y;)p=v?4*o[c/4]:g,l[c++]=d[p++],l[c++]=d[p++],l[c++]=d[p++],l[c++]=a?d[p++]:255,g=p},n.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var s=function(){if(Object.prototype.toString.call(se)==="[object Window]"){try{t=se.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),i=function(r){var o;if(s()===!0)return e.width=r.width,e.height=r.height,e.clearRect(0,0,r.width,r.height),e.putImageData(r,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(r){var o,a,h,l,c,d,g,p;if(this.animation){for(p=[],a=c=0,d=(g=this.animation.frames).length;c<d;a=++c)o=g[a],h=r.createImageData(o.width,o.height),l=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(h,l),o.imageData=h,p.push(o.image=i(h));return p}},n.prototype.renderFrame=function(r,o){var a,h,l;return a=(h=this.animation.frames)[o],l=h[o-1],o===0&&r.clearRect(0,0,this.width,this.height),(l==null?void 0:l.disposeOp)===1?r.clearRect(l.xOffset,l.yOffset,l.width,l.height):(l==null?void 0:l.disposeOp)===2&&r.putImageData(l.imageData,l.xOffset,l.yOffset),a.blendOp===0&&r.clearRect(a.xOffset,a.yOffset,a.width,a.height),r.drawImage(a.image,a.xOffset,a.yOffset)},n.prototype.animate=function(r){var o,a,h,l,c,d,g=this;return a=0,d=this.animation,l=d.numFrames,h=d.frames,c=d.numPlays,(o=function(){var p,y;if(p=a++%l,y=h[p],g.renderFrame(r,p),l>1&&a/l<c)return g.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},n.prototype.render=function(r){var o,a;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,o=r.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},n}();function QM(i){var t=0;if(i[t++]!==71||i[t++]!==73||i[t++]!==70||i[t++]!==56||(i[t++]+1&253)!=56||i[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=i[t++]|i[t++]<<8,n=i[t++]|i[t++]<<8,s=i[t++],r=s>>7,o=1<<(7&s)+1;i[t++],i[t++];var a=null,h=null;r&&(a=t,h=o,t+=3*o);var l=!0,c=[],d=0,g=null,p=0,y=null;for(this.width=e,this.height=n;l&&t<i.length;)switch(i[t++]){case 33:switch(i[t++]){case 255:if(i[t]!==11||i[t+1]==78&&i[t+2]==69&&i[t+3]==84&&i[t+4]==83&&i[t+5]==67&&i[t+6]==65&&i[t+7]==80&&i[t+8]==69&&i[t+9]==50&&i[t+10]==46&&i[t+11]==48&&i[t+12]==3&&i[t+13]==1&&i[t+16]==0)t+=14,y=i[t++]|i[t++]<<8,t++;else for(t+=12;;){if(!((P=i[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(i[t++]!==4||i[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=i[t++];d=i[t++]|i[t++]<<8,g=i[t++],!(1&v)&&(g=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((P=i[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+i[t-1].toString(16))}break;case 44:var x=i[t++]|i[t++]<<8,b=i[t++]|i[t++]<<8,S=i[t++]|i[t++]<<8,A=i[t++]|i[t++]<<8,O=i[t++],k=O>>6&1,H=1<<(7&O)+1,W=a,F=h,$=!1;O>>7&&($=!0,W=t,F=H,t+=3*H);var V=t;for(t++;;){var P;if(!((P=i[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}c.push({x,y:b,width:S,height:A,has_local_palette:$,palette_offset:W,palette_size:F,data_offset:V,data_length:t-V,transparent_index:g,interlaced:!!k,delay:d,disposal:p});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+i[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return y},this.frameInfo=function(I){if(I<0||I>=c.length)throw new Error("Frame index out of range.");return c[I]},this.decodeAndBlitFrameBGRA=function(I,U){var G=this.frameInfo(I),nt=G.width*G.height,tt=new Uint8Array(nt);W2(i,G.data_offset,tt,nt);var Q=G.palette_offset,J=G.transparent_index;J===null&&(J=256);var dt=G.width,ct=e-dt,Et=dt,M=4*(G.y*e+G.x),j=4*((G.y+G.height)*e+G.x),B=M,Y=4*ct;G.interlaced===!0&&(Y+=4*e*7);for(var it=8,ot=0,at=tt.length;ot<at;++ot){var ut=tt[ot];if(Et===0&&(Et=dt,(B+=Y)>=j&&(Y=4*ct+4*e*(it-1),B=M+(dt+ct)*(it<<1),it>>=1)),ut===J)B+=4;else{var At=i[Q+3*ut],Mt=i[Q+3*ut+1],Tt=i[Q+3*ut+2];U[B++]=Tt,U[B++]=Mt,U[B++]=At,U[B++]=255}--Et}},this.decodeAndBlitFrameRGBA=function(I,U){var G=this.frameInfo(I),nt=G.width*G.height,tt=new Uint8Array(nt);W2(i,G.data_offset,tt,nt);var Q=G.palette_offset,J=G.transparent_index;J===null&&(J=256);var dt=G.width,ct=e-dt,Et=dt,M=4*(G.y*e+G.x),j=4*((G.y+G.height)*e+G.x),B=M,Y=4*ct;G.interlaced===!0&&(Y+=4*e*7);for(var it=8,ot=0,at=tt.length;ot<at;++ot){var ut=tt[ot];if(Et===0&&(Et=dt,(B+=Y)>=j&&(Y=4*ct+4*e*(it-1),B=M+(dt+ct)*(it<<1),it>>=1)),ut===J)B+=4;else{var At=i[Q+3*ut],Mt=i[Q+3*ut+1],Tt=i[Q+3*ut+2];U[B++]=At,U[B++]=Mt,U[B++]=Tt,U[B++]=255}--Et}}}function W2(i,t,e,n){for(var s=i[t++],r=1<<s,o=r+1,a=o+1,h=s+1,l=(1<<h)-1,c=0,d=0,g=0,p=i[t++],y=new Int32Array(4096),v=null;;){for(;c<16&&p!==0;)d|=i[t++]<<c,c+=8,p===1?p=i[t++]:--p;if(c<h)break;var x=d&l;if(d>>=h,c-=h,x!==r){if(x===o)break;for(var b=x<a?x:v,S=0,A=b;A>r;)A=y[A]>>8,++S;var O=A;if(g+S+(b!==x?1:0)>n)return void Ke.log("Warning, gif stream longer than expected.");e[g++]=O;var k=g+=S;for(b!==x&&(e[g++]=O),A=b;S--;)A=y[A],e[--k]=255&A,A>>=8;v!==null&&a<4096&&(y[a++]=v<<8|O,a>=l+1&&h<12&&(++h,l=l<<1|1)),v=x}else a=o+1,l=(1<<(h=s+1))-1,v=null}return g!==n&&Ke.log("Warning, gif stream shorter than expected."),e}function $f(i){var t,e,n,s,r,o=Math.floor,a=new Array(64),h=new Array(64),l=new Array(64),c=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),y=new Array(64),v=[],x=0,b=7,S=new Array(64),A=new Array(64),O=new Array(64),k=new Array(256),H=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function tt(M,j){for(var B=0,Y=0,it=new Array,ot=1;ot<=16;ot++){for(var at=1;at<=M[ot];at++)it[j[Y]]=[],it[j[Y]][0]=B,it[j[Y]][1]=ot,Y++,B++;B*=2}return it}function Q(M){for(var j=M[0],B=M[1]-1;B>=0;)j&1<<B&&(x|=1<<b),B--,--b<0&&(x==255?(J(255),J(0)):J(x),b=7,x=0)}function J(M){v.push(M)}function dt(M){J(M>>8&255),J(255&M)}function ct(M,j,B,Y,it){for(var ot,at=it[0],ut=it[240],At=function(xt,Pt){var Nt,Lt,qt,Zt,ae,le,ve,Ne,te,Jt,Ot=0;for(te=0;te<8;++te){Nt=xt[Ot],Lt=xt[Ot+1],qt=xt[Ot+2],Zt=xt[Ot+3],ae=xt[Ot+4],le=xt[Ot+5],ve=xt[Ot+6];var Di=Nt+(Ne=xt[Ot+7]),Pe=Nt-Ne,yn=Lt+ve,Ue=Lt-ve,Ve=qt+le,An=qt-le,Re=Zt+ae,Ln=Zt-ae,Xe=Di+Re,Wi=Di-Re,jn=yn+Ve,si=yn-Ve;xt[Ot]=Xe+jn,xt[Ot+4]=Xe-jn;var Vt=.707106781*(si+Wi);xt[Ot+2]=Wi+Vt,xt[Ot+6]=Wi-Vt;var Ee=.382683433*((Xe=Ln+An)-(si=Ue+Pe)),Mi=.5411961*Xe+Ee,Je=1.306562965*si+Ee,ri=.707106781*(jn=An+Ue),hn=Pe+ri,Ht=Pe-ri;xt[Ot+5]=Ht+Mi,xt[Ot+3]=Ht-Mi,xt[Ot+1]=hn+Je,xt[Ot+7]=hn-Je,Ot+=8}for(Ot=0,te=0;te<8;++te){Nt=xt[Ot],Lt=xt[Ot+8],qt=xt[Ot+16],Zt=xt[Ot+24],ae=xt[Ot+32],le=xt[Ot+40],ve=xt[Ot+48];var ti=Nt+(Ne=xt[Ot+56]),li=Nt-Ne,oi=Lt+ve,vi=Lt-ve,Ci=qt+le,Nn=qt-le,Ra=Zt+ae,Qs=Zt-ae,ss=ti+Ra,rs=ti-Ra,os=oi+Ci,Is=oi-Ci;xt[Ot]=ss+os,xt[Ot+32]=ss-os;var Bn=.707106781*(Is+rs);xt[Ot+16]=rs+Bn,xt[Ot+48]=rs-Bn;var Ts=.382683433*((ss=Qs+Nn)-(Is=vi+li)),Co=.5411961*ss+Ts,Ia=1.306562965*Is+Ts,Ta=.707106781*(os=Nn+vi),Oa=li+Ta,Fa=li-Ta;xt[Ot+40]=Fa+Co,xt[Ot+24]=Fa-Co,xt[Ot+8]=Oa+Ia,xt[Ot+56]=Oa-Ia,Ot++}for(te=0;te<64;++te)Jt=xt[te]*Pt[te],p[te]=Jt>0?Jt+.5|0:Jt-.5|0;return p}(M,j),Mt=0;Mt<64;++Mt)y[W[Mt]]=At[Mt];var Tt=y[0]-B;B=y[0],Tt==0?Q(Y[0]):(Q(Y[g[ot=32767+Tt]]),Q(d[ot]));for(var It=63;It>0&&y[It]==0;)It--;if(It==0)return Q(at),B;for(var Xt,ft=1;ft<=It;){for(var z=ft;y[ft]==0&&ft<=It;)++ft;var oe=ft-z;if(oe>=16){Xt=oe>>4;for(var zt=1;zt<=Xt;++zt)Q(ut);oe&=15}ot=32767+y[ft],Q(it[(oe<<4)+g[ot]]),Q(d[ot]),ft++}return It!=63&&Q(at),B}function Et(M){M=Math.min(Math.max(M,1),100),r!=M&&(function(j){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var it=o((B[Y]*j+50)/100);it=Math.min(Math.max(it,1),255),a[W[Y]]=it}for(var ot=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],at=0;at<64;at++){var ut=o((ot[at]*j+50)/100);ut=Math.min(Math.max(ut,1),255),h[W[at]]=ut}for(var At=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Mt=0,Tt=0;Tt<8;Tt++)for(var It=0;It<8;It++)l[Mt]=1/(a[W[Mt]]*At[Tt]*At[It]*8),c[Mt]=1/(h[W[Mt]]*At[Tt]*At[It]*8),Mt++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),r=M)}this.encode=function(M,j){j&&Et(j),v=new Array,x=0,b=7,dt(65496),dt(65504),dt(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),dt(1),dt(1),J(0),J(0),function(){dt(65499),dt(132),J(0);for(var Lt=0;Lt<64;Lt++)J(a[Lt]);J(1);for(var qt=0;qt<64;qt++)J(h[qt])}(),function(Lt,qt){dt(65472),dt(17),J(8),dt(qt),dt(Lt),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(M.width,M.height),function(){dt(65476),dt(418),J(0);for(var Lt=0;Lt<16;Lt++)J(F[Lt+1]);for(var qt=0;qt<=11;qt++)J($[qt]);J(16);for(var Zt=0;Zt<16;Zt++)J(V[Zt+1]);for(var ae=0;ae<=161;ae++)J(P[ae]);J(1);for(var le=0;le<16;le++)J(I[le+1]);for(var ve=0;ve<=11;ve++)J(U[ve]);J(17);for(var Ne=0;Ne<16;Ne++)J(G[Ne+1]);for(var te=0;te<=161;te++)J(nt[te])}(),dt(65498),dt(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var B=0,Y=0,it=0;x=0,b=7,this.encode.displayName="_encode_";for(var ot,at,ut,At,Mt,Tt,It,Xt,ft,z=M.data,oe=M.width,zt=M.height,xt=4*oe,Pt=0;Pt<zt;){for(ot=0;ot<xt;){for(Mt=xt*Pt+ot,It=-1,Xt=0,ft=0;ft<64;ft++)Tt=Mt+(Xt=ft>>3)*xt+(It=4*(7&ft)),Pt+Xt>=zt&&(Tt-=xt*(Pt+1+Xt-zt)),ot+It>=xt&&(Tt-=ot+It-xt+4),at=z[Tt++],ut=z[Tt++],At=z[Tt++],S[ft]=(H[at]+H[ut+256>>0]+H[At+512>>0]>>16)-128,A[ft]=(H[at+768>>0]+H[ut+1024>>0]+H[At+1280>>0]>>16)-128,O[ft]=(H[at+1280>>0]+H[ut+1536>>0]+H[At+1792>>0]>>16)-128;B=ct(S,l,B,t,n),Y=ct(A,c,Y,e,s),it=ct(O,c,it,e,s),ot+=32}Pt+=8}if(b>=0){var Nt=[];Nt[1]=b+1,Nt[0]=(1<<b+1)-1,Q(Nt)}return dt(65497),new Uint8Array(v)},i=i||50,function(){for(var M=String.fromCharCode,j=0;j<256;j++)k[j]=M(j)}(),t=tt(F,$),e=tt(I,U),n=tt(V,P),s=tt(G,nt),function(){for(var M=1,j=2,B=1;B<=15;B++){for(var Y=M;Y<j;Y++)g[32767+Y]=B,d[32767+Y]=[],d[32767+Y][1]=B,d[32767+Y][0]=Y;for(var it=-(j-1);it<=-M;it++)g[32767+it]=B,d[32767+it]=[],d[32767+it][1]=B,d[32767+it][0]=j-1+it;M<<=1,j<<=1}}(),function(){for(var M=0;M<256;M++)H[M]=19595*M,H[M+256>>0]=38470*M,H[M+512>>0]=7471*M+32768,H[M+768>>0]=-11059*M,H[M+1024>>0]=-21709*M,H[M+1280>>0]=32768*M+8421375,H[M+1536>>0]=-27439*M,H[M+1792>>0]=-5329*M}(),Et(i)}function es(i,t){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y2(i){function t(F){if(!F)throw Error("assert :P")}function e(F,$,V){for(var P=0;4>P;P++)if(F[$+P]!=V.charCodeAt(P))return!0;return!1}function n(F,$,V,P,I){for(var U=0;U<I;U++)F[$+U]=V[P+U]}function s(F,$,V,P){for(var I=0;I<P;I++)F[$+I]=V}function r(F){return new Int32Array(F)}function o(F,$){for(var V=[],P=0;P<F;P++)V.push(new $);return V}function a(F,$){var V=[];return function P(I,U,G){for(var nt=G[U],tt=0;tt<nt&&(I.push(G.length>U+1?[]:new $),!(G.length<U+1));tt++)P(I[tt],U+1,G)}(V,0,F),V}var h=function(){var F=this;function $(u,f){for(var _=1<<f-1>>>0;u&_;)_>>>=1;return _?(u&_-1)+_:u}function V(u,f,_,w,C){t(!(w%_));do u[f+(w-=_)]=C;while(0<w)}function P(u,f,_,w,C){if(t(2328>=C),512>=C)var L=r(512);else if((L=r(C))==null)return 0;return function(N,R,T,D,Z,ht){var lt,st,wt=R,pt=1<<T,K=r(16),et=r(16);for(t(Z!=0),t(D!=null),t(N!=null),t(0<T),st=0;st<Z;++st){if(15<D[st])return 0;++K[D[st]]}if(K[0]==Z)return 0;for(et[1]=0,lt=1;15>lt;++lt){if(K[lt]>1<<lt)return 0;et[lt+1]=et[lt]+K[lt]}for(st=0;st<Z;++st)lt=D[st],0<D[st]&&(ht[et[lt]++]=st);if(et[15]==1)return(D=new I).g=0,D.value=ht[0],V(N,wt,1,pt,D),pt;var yt,bt=-1,vt=pt-1,Bt=0,Rt=1,ee=1,Ft=1<<T;for(st=0,lt=1,Z=2;lt<=T;++lt,Z<<=1){if(Rt+=ee<<=1,0>(ee-=K[lt]))return 0;for(;0<K[lt];--K[lt])(D=new I).g=lt,D.value=ht[st++],V(N,wt+Bt,Z,Ft,D),Bt=$(Bt,lt)}for(lt=T+1,Z=2;15>=lt;++lt,Z<<=1){if(Rt+=ee<<=1,0>(ee-=K[lt]))return 0;for(;0<K[lt];--K[lt]){if(D=new I,(Bt&vt)!=bt){for(wt+=Ft,yt=1<<(bt=lt)-T;15>bt&&!(0>=(yt-=K[bt]));)++bt,yt<<=1;pt+=Ft=1<<(yt=bt-T),N[R+(bt=Bt&vt)].g=yt+T,N[R+bt].value=wt-R-bt}D.g=lt-T,D.value=ht[st++],V(N,wt+(Bt>>T),Z,Ft,D),Bt=$(Bt,lt)}}return Rt!=2*et[15]-1?0:pt}(u,f,_,w,C,L)}function I(){this.value=this.g=0}function U(){this.value=this.g=0}function G(){this.G=o(5,I),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wn,U)}function nt(u,f,_,w){t(u!=null),t(f!=null),t(2147483648>w),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=_,u.Jd=f,u.Yc=_+w,u.Zc=4<=w?_+w-4+1:_,ot(u)}function tt(u,f){for(var _=0;0<f--;)_|=ut(u,128)<<f;return _}function Q(u,f){var _=tt(u,f);return at(u)?-_:_}function J(u,f,_,w){var C,L=0;for(t(u!=null),t(f!=null),t(4294967288>w),u.Sb=w,u.Ra=0,u.u=0,u.h=0,4<w&&(w=4),C=0;C<w;++C)L+=f[_+C]<<8*C;u.Ra=L,u.bb=w,u.oa=f,u.pa=_}function dt(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ka-8>>>0,++u.bb,u.u-=8;B(u)&&(u.h=1,u.u=0)}function ct(u,f){if(t(0<=f),!u.h&&f<=Za){var _=j(u)&Ha[f];return u.u+=f,dt(u),_}return u.h=1,u.u=0}function Et(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(u){return u.Ra>>>(u.u&Ka-1)>>>0}function B(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ka}function Y(u,f){u.u=f,u.h=B(u)}function it(u){u.u>=yl&&(t(u.u>=yl),dt(u))}function ot(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function at(u){return tt(u,1)}function ut(u,f){var _=u.Ca;0>u.b&&ot(u);var w=u.b,C=_*f>>>8,L=(u.I>>>w>C)+0;for(L?(_-=C,u.I-=C+1<<w>>>0):_=C+1,w=_,C=0;256<=w;)C+=8,w>>=8;return w=7^C+bn[w],u.b-=w,u.Ca=(_<<w)-1,L}function At(u,f,_){u[f+0]=_>>24&255,u[f+1]=_>>16&255,u[f+2]=_>>8&255,u[f+3]=_>>0&255}function Mt(u,f){return u[f+0]<<0|u[f+1]<<8}function Tt(u,f){return Mt(u,f)|u[f+2]<<16}function It(u,f){return Mt(u,f)|Mt(u,f+2)<<16}function Xt(u,f){var _=1<<f;return t(u!=null),t(0<f),u.X=r(_),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function ft(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),n(f.X,0,u.X,0,1<<f.Xa)}function z(){this.X=[],this.Xa=this.Mb=0}function oe(u,f,_,w){t(_!=null),t(w!=null);var C=_[0],L=w[0];return C==0&&(C=(u*L+f/2)/f),L==0&&(L=(f*C+u/2)/u),0>=C||0>=L?0:(_[0]=C,w[0]=L,1)}function zt(u,f){return u+(1<<f)-1>>>f}function xt(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function Pt(u,f){F[f]=function(_,w,C,L,N,R,T){var D;for(D=0;D<N;++D){var Z=F[u](R[T+D-1],C,L+D);R[T+D]=xt(_[w+D],Z)}}}function Nt(){this.ud=this.hd=this.jd=0}function Lt(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function qt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Zt(u,f){return qt(u+(u-f+.5>>1))}function ae(u,f,_){return Math.abs(f-_)-Math.abs(u-_)}function le(u,f,_,w,C,L,N){for(w=L[N-1],_=0;_<C;++_)L[N+_]=w=xt(u[f+_],w)}function ve(u,f,_,w,C){var L;for(L=0;L<_;++L){var N=u[f+L],R=N>>8&255,T=16711935&(T=(T=16711935&N)+((R<<16)+R));w[C+L]=(4278255360&N)+T>>>0}}function Ne(u,f){f.jd=u>>0&255,f.hd=u>>8&255,f.ud=u>>16&255}function te(u,f,_,w,C,L){var N;for(N=0;N<w;++N){var R=f[_+N],T=R>>>8,D=R,Z=255&(Z=(Z=R>>>16)+((u.jd<<24>>24)*(T<<24>>24)>>>5));D=255&(D=(D=D+((u.hd<<24>>24)*(T<<24>>24)>>>5))+((u.ud<<24>>24)*(Z<<24>>24)>>>5)),C[L+N]=(4278255360&R)+(Z<<16)+D}}function Jt(u,f,_,w,C){F[f]=function(L,N,R,T,D,Z,ht,lt,st){for(T=ht;T<lt;++T)for(ht=0;ht<st;++ht)D[Z++]=C(R[w(L[N++])])},F[u]=function(L,N,R,T,D,Z,ht){var lt=8>>L.b,st=L.Ea,wt=L.K[0],pt=L.w;if(8>lt)for(L=(1<<L.b)-1,pt=(1<<lt)-1;N<R;++N){var K,et=0;for(K=0;K<st;++K)K&L||(et=w(T[D++])),Z[ht++]=C(wt[et&pt]),et>>=lt}else F["VP8LMapColor"+_](T,D,wt,pt,Z,ht,N,R,st)}}function Ot(u,f,_,w,C){for(_=f+_;f<_;){var L=u[f++];w[C++]=L>>16&255,w[C++]=L>>8&255,w[C++]=L>>0&255}}function Di(u,f,_,w,C){for(_=f+_;f<_;){var L=u[f++];w[C++]=L>>16&255,w[C++]=L>>8&255,w[C++]=L>>0&255,w[C++]=L>>24&255}}function Pe(u,f,_,w,C){for(_=f+_;f<_;){var L=(N=u[f++])>>16&240|N>>12&15,N=N>>0&240|N>>28&15;w[C++]=L,w[C++]=N}}function yn(u,f,_,w,C){for(_=f+_;f<_;){var L=(N=u[f++])>>16&248|N>>13&7,N=N>>5&224|N>>3&31;w[C++]=L,w[C++]=N}}function Ue(u,f,_,w,C){for(_=f+_;f<_;){var L=u[f++];w[C++]=L>>0&255,w[C++]=L>>8&255,w[C++]=L>>16&255}}function Ve(u,f,_,w,C,L){if(L==0)for(_=f+_;f<_;)At(w,((L=u[f++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),C+=32;else n(w,C,u,f,_)}function An(u,f){F[f][0]=F[u+"0"],F[f][1]=F[u+"1"],F[f][2]=F[u+"2"],F[f][3]=F[u+"3"],F[f][4]=F[u+"4"],F[f][5]=F[u+"5"],F[f][6]=F[u+"6"],F[f][7]=F[u+"7"],F[f][8]=F[u+"8"],F[f][9]=F[u+"9"],F[f][10]=F[u+"10"],F[f][11]=F[u+"11"],F[f][12]=F[u+"12"],F[f][13]=F[u+"13"],F[f][14]=F[u+"0"],F[f][15]=F[u+"0"]}function Re(u){return u==z0||u==W0||u==Pc||u==Y0}function Ln(){this.eb=[],this.size=this.A=this.fb=0}function Xe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ln,this.f.kb=new Xe,this.sd=null}function jn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Ee(u,f){var _=u.T,w=f.ba.f.RGBA,C=w.eb,L=w.fb+u.ka*w.A,N=Wn[f.ba.S],R=u.y,T=u.O,D=u.f,Z=u.N,ht=u.ea,lt=u.W,st=f.cc,wt=f.dc,pt=f.Mc,K=f.Nc,et=u.ka,yt=u.ka+u.T,bt=u.U,vt=bt+1>>1;for(et==0?N(R,T,null,null,D,Z,ht,lt,D,Z,ht,lt,C,L,null,null,bt):(N(f.ec,f.fc,R,T,st,wt,pt,K,D,Z,ht,lt,C,L-w.A,C,L,bt),++_);et+2<yt;et+=2)st=D,wt=Z,pt=ht,K=lt,Z+=u.Rc,lt+=u.Rc,L+=2*w.A,N(R,(T+=2*u.fa)-u.fa,R,T,st,wt,pt,K,D,Z,ht,lt,C,L-w.A,C,L,bt);return T+=u.fa,u.j+yt<u.o?(n(f.ec,f.fc,R,T,bt),n(f.cc,f.dc,D,Z,vt),n(f.Mc,f.Nc,ht,lt,vt),_--):1&yt||N(R,T,null,null,D,Z,ht,lt,D,Z,ht,lt,C,L+w.A,null,null,bt),_}function Mi(u,f,_){var w=u.F,C=[u.J];if(w!=null){var L=u.U,N=f.ba.S,R=N==Nc||N==Pc;f=f.ba.f.RGBA;var T=[0],D=u.ka;T[0]=u.T,u.Kb&&(D==0?--T[0]:(--D,C[0]-=u.width),u.j+u.ka+u.T==u.o&&(T[0]=u.o-u.j-D));var Z=f.eb;D=f.fb+D*f.A,u=Mc(w,C[0],u.width,L,T,Z,D+(R?0:3),f.A),t(_==T),u&&Re(N)&&Ur(Z,D,R,L,T,f.A)}return 0}function Je(u){var f=u.ma,_=f.ba.S,w=11>_,C=_==Ac||_==Lc||_==Nc||_==U0||_==12||Re(_);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!ml(f.Oa,u,C?11:12))return 0;if(C&&Re(_)&&St(),u.da)alert("todo:use_scaling");else{if(w){if(f.Ib=Vt,u.Kb){if(_=u.U+1>>1,f.memory=r(u.U+2*_),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+_,f.Ib=Ee,St()}}else alert("todo:EmitYUV");C&&(f.Jb=Mi,w&&rt())}if(w&&!t5){for(u=0;256>u;++u)cA[u]=89858*(u-128)+Ic>>Rc,pA[u]=-22014*(u-128)+Ic,fA[u]=-45773*(u-128),dA[u]=113618*(u-128)+Ic>>Rc;for(u=Ml;u<H0;++u)f=76283*(u-16)+Ic>>Rc,gA[u-Ml]=Gn(f,255),mA[u-Ml]=Gn(f+8>>4,15);t5=1}return 1}function ri(u){var f=u.ma,_=u.U,w=u.T;return t(!(1&u.ka)),0>=_||0>=w?0:(_=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,_),f.Dc+=_,1)}function hn(u){u.ma.memory=null}function Ht(u,f,_,w){return ct(u,8)!=47?0:(f[0]=ct(u,14)+1,_[0]=ct(u,14)+1,w[0]=ct(u,1),ct(u,3)!=0?0:!u.h)}function ti(u,f){if(4>u)return u+1;var _=u-2>>1;return(2+(1&u)<<_)+ct(f,_)+1}function li(u,f){return 120<f?f-120:1<=(_=((_=JE[f-1])>>4)*u+(8-(15&_)))?_:1;var _}function oi(u,f,_){var w=j(_),C=u[f+=255&w].g-8;return 0<C&&(Y(_,_.u+8),w=j(_),f+=u[f].value,f+=w&(1<<C)-1),Y(_,_.u+u[f].g),u[f].value}function vi(u,f,_){return _.g+=u.g,_.value+=u.value<<f>>>0,t(8>=_.g),u.g}function Ci(u,f,_){var w=u.xc;return t((f=w==0?0:u.vc[u.md*(_>>w)+(f>>w)])<u.Wb),u.Ya[f]}function Nn(u,f,_,w){var C=u.ab,L=u.c*f,N=u.C;f=N+f;var R=_,T=w;for(w=u.Ta,_=u.Ua;0<C--;){var D=u.gc[C],Z=N,ht=f,lt=R,st=T,wt=(T=w,R=_,D.Ea);switch(t(Z<ht),t(ht<=D.nc),D.hc){case 2:Sc(lt,st,(ht-Z)*wt,T,R);break;case 0:var pt=Z,K=ht,et=T,yt=R,bt=(Ft=D).Ea;pt==0&&(j0(lt,st,null,null,1,et,yt),le(lt,st+1,0,0,bt-1,et,yt+1),st+=bt,yt+=bt,++pt);for(var vt=1<<Ft.b,Bt=vt-1,Rt=zt(bt,Ft.b),ee=Ft.K,Ft=Ft.w+(pt>>Ft.b)*Rt;pt<K;){var De=ee,We=Ft,Oe=1;for(vl(lt,st,et,yt-bt,1,et,yt);Oe<bt;){var Ae=(Oe&~Bt)+vt;Ae>bt&&(Ae=bt),(0,jr[De[We++]>>8&15])(lt,st+ +Oe,et,yt+Oe-bt,Ae-Oe,et,yt+Oe),Oe=Ae}st+=bt,yt+=bt,++pt&Bt||(Ft+=Rt)}ht!=D.nc&&n(T,R-wt,T,R+(ht-Z-1)*wt,wt);break;case 1:for(wt=lt,K=st,bt=(lt=D.Ea)-(yt=lt&~(et=(st=1<<D.b)-1)),pt=zt(lt,D.b),vt=D.K,D=D.w+(Z>>D.b)*pt;Z<ht;){for(Bt=vt,Rt=D,ee=new Nt,Ft=K+yt,De=K+lt;K<Ft;)Ne(Bt[Rt++],ee),qn(ee,wt,K,st,T,R),K+=st,R+=st;K<De&&(Ne(Bt[Rt++],ee),qn(ee,wt,K,bt,T,R),K+=bt,R+=bt),++Z&et||(D+=pt)}break;case 3:if(lt==T&&st==R&&0<D.b){for(K=T,lt=wt=R+(ht-Z)*wt-(yt=(ht-Z)*zt(D.Ea,D.b)),st=T,et=R,pt=[],yt=(bt=yt)-1;0<=yt;--yt)pt[yt]=st[et+yt];for(yt=bt-1;0<=yt;--yt)K[lt+yt]=pt[yt];us(D,Z,ht,T,wt,T,R)}else us(D,Z,ht,lt,st,T,R)}R=w,T=_}T!=_&&n(w,_,R,T,L)}function Ra(u,f){var _=u.V,w=u.Ba+u.c*u.C,C=f-u.C;if(t(f<=u.l.o),t(16>=C),0<C){var L=u.l,N=u.Ta,R=u.Ua,T=L.width;if(Nn(u,C,_,w),C=R=[R],t((_=u.C)<(w=f)),t(L.v<L.va),w>L.o&&(w=L.o),_<L.j){var D=L.j-_;_=L.j,C[0]+=D*T}if(_>=w?_=0:(C[0]+=4*L.v,L.ka=_-L.j,L.U=L.va-L.v,L.T=w-_,_=1),_){if(R=R[0],11>(_=u.ca).S){var Z=_.f.RGBA,ht=(w=_.S,C=L.U,L=L.T,D=Z.eb,Z.A),lt=L;for(Z=Z.fb+u.Ma*Z.A;0<lt--;){var st=N,wt=R,pt=C,K=D,et=Z;switch(w){case Ec:cs(st,wt,pt,K,et);break;case Ac:Br(st,wt,pt,K,et);break;case z0:Br(st,wt,pt,K,et),Ur(K,et,0,pt,1,0);break;case Wm:Ja(st,wt,pt,K,et);break;case Lc:Ve(st,wt,pt,K,et,1);break;case W0:Ve(st,wt,pt,K,et,1),Ur(K,et,0,pt,1,0);break;case Nc:Ve(st,wt,pt,K,et,0);break;case Pc:Ve(st,wt,pt,K,et,0),Ur(K,et,1,pt,1,0);break;case U0:Fs(st,wt,pt,K,et);break;case Y0:Fs(st,wt,pt,K,et),th(K,et,pt,1,0);break;case Ym:ir(st,wt,pt,K,et);break;default:t(0)}R+=T,Z+=ht}u.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=_.height)}}u.C=f,t(u.C<=u.i)}function Qs(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var _=u.Ya[f].G,w=u.Ya[f].H;if(0<_[1][w[1]+0].g||0<_[2][w[2]+0].g||0<_[3][w[3]+0].g)return 0}return 1}function ss(u,f,_,w,C,L){if(u.Z!=0){var N=u.qd,R=u.rd;for(t(Wr[u.Z]!=null);f<_;++f)Wr[u.Z](N,R,w,C,w,C,L),N=w,R=C,C+=L;u.qd=N,u.rd=R}}function rs(u,f){var _=u.l.ma,w=_.Z==0||_.Z==1?u.l.j:u.C;if(w=u.C<w?w:u.C,t(f<=u.l.o),f>w){var C=u.l.width,L=_.ca,N=_.tb+C*w,R=u.V,T=u.Ba+u.c*w,D=u.gc;t(u.ab==1),t(D[0].hc==3),B0(D[0],w,f,R,T,L,N),ss(_,w,f,L,N,C)}u.C=u.Ma=f}function os(u,f,_,w,C,L,N){var R=u.$/w,T=u.$%w,D=u.m,Z=u.s,ht=_+u.$,lt=ht;C=_+w*C;var st=_+w*L,wt=280+Z.ua,pt=u.Pb?R:16777216,K=0<Z.ua?Z.Wa:null,et=Z.wc,yt=ht<st?Ci(Z,T,R):null;t(u.C<L),t(st<=C);var bt=!1;t:for(;;){for(;bt||ht<st;){var vt=0;if(R>=pt){var Bt=ht-_;t((pt=u).Pb),pt.wd=pt.m,pt.xd=Bt,0<pt.s.ua&&ft(pt.s.Wa,pt.s.vb),pt=R+$E}if(T&et||(yt=Ci(Z,T,R)),t(yt!=null),yt.Qb&&(f[ht]=yt.qb,bt=!0),!bt)if(it(D),yt.jc){vt=D,Bt=f;var Rt=ht,ee=yt.pd[j(vt)&wn-1];t(yt.jc),256>ee.g?(Y(vt,vt.u+ee.g),Bt[Rt]=ee.value,vt=0):(Y(vt,vt.u+ee.g-256),t(256<=ee.value),vt=ee.value),vt==0&&(bt=!0)}else vt=oi(yt.G[0],yt.H[0],D);if(D.h)break;if(bt||256>vt){if(!bt)if(yt.nd)f[ht]=(yt.qb|vt<<8)>>>0;else{if(it(D),bt=oi(yt.G[1],yt.H[1],D),it(D),Bt=oi(yt.G[2],yt.H[2],D),Rt=oi(yt.G[3],yt.H[3],D),D.h)break;f[ht]=(Rt<<24|bt<<16|vt<<8|Bt)>>>0}if(bt=!1,++ht,++T>=w&&(T=0,++R,N!=null&&R<=L&&!(R%16)&&N(u,R),K!=null))for(;lt<ht;)vt=f[lt++],K.X[(506832829*vt&4294967295)>>>K.Mb]=vt}else if(280>vt){if(vt=ti(vt-256,D),Bt=oi(yt.G[4],yt.H[4],D),it(D),Bt=li(w,Bt=ti(Bt,D)),D.h)break;if(ht-_<Bt||C-ht<vt)break t;for(Rt=0;Rt<vt;++Rt)f[ht+Rt]=f[ht+Rt-Bt];for(ht+=vt,T+=vt;T>=w;)T-=w,++R,N!=null&&R<=L&&!(R%16)&&N(u,R);if(t(ht<=C),T&et&&(yt=Ci(Z,T,R)),K!=null)for(;lt<ht;)vt=f[lt++],K.X[(506832829*vt&4294967295)>>>K.Mb]=vt}else{if(!(vt<wt))break t;for(bt=vt-280,t(K!=null);lt<ht;)vt=f[lt++],K.X[(506832829*vt&4294967295)>>>K.Mb]=vt;vt=ht,t(!(bt>>>(Bt=K).Xa)),f[vt]=Bt.X[bt],bt=!0}bt||t(D.h==B(D))}if(u.Pb&&D.h&&ht<C)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&ft(u.s.vb,u.s.Wa);else{if(D.h)break t;N==null||N(u,R>L?L:R),u.a=0,u.$=ht-_}return 1}return u.a=3,0}function Is(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function Bn(){var u=new D0;return u==null?null:(u.a=0,u.xb=Hm,An("Predictor","VP8LPredictors"),An("Predictor","VP8LPredictors_C"),An("PredictorAdd","VP8LPredictorsAdd"),An("PredictorAdd","VP8LPredictorsAdd_C"),Sc=ve,qn=te,cs=Ot,Br=Di,Fs=Pe,ir=yn,Ja=Ue,F.VP8LMapColor32b=wl,F.VP8LMapColor8b=G0,u)}function Ts(u,f,_,w,C){var L=1,N=[u],R=[f],T=w.m,D=w.s,Z=null,ht=0;t:for(;;){if(_)for(;L&&ct(T,1);){var lt=N,st=R,wt=w,pt=1,K=wt.m,et=wt.gc[wt.ab],yt=ct(K,2);if(wt.Oc&1<<yt)L=0;else{switch(wt.Oc|=1<<yt,et.hc=yt,et.Ea=lt[0],et.nc=st[0],et.K=[null],++wt.ab,t(4>=wt.ab),yt){case 0:case 1:et.b=ct(K,3)+2,pt=Ts(zt(et.Ea,et.b),zt(et.nc,et.b),0,wt,et.K),et.K=et.K[0];break;case 3:var bt,vt=ct(K,8)+1,Bt=16<vt?0:4<vt?1:2<vt?2:3;if(lt[0]=zt(et.Ea,Bt),et.b=Bt,bt=pt=Ts(vt,1,0,wt,et.K)){var Rt,ee=vt,Ft=et,De=1<<(8>>Ft.b),We=r(De);if(We==null)bt=0;else{var Oe=Ft.K[0],Ae=Ft.w;for(We[0]=Ft.K[0][0],Rt=1;Rt<1*ee;++Rt)We[Rt]=xt(Oe[Ae+Rt],We[Rt-1]);for(;Rt<4*De;++Rt)We[Rt]=0;Ft.K[0]=null,Ft.K[0]=We,bt=1}}pt=bt;break;case 2:break;default:t(0)}L=pt}}if(N=N[0],R=R[0],L&&ct(T,1)&&!(L=1<=(ht=ct(T,4))&&11>=ht)){w.a=3;break t}var Qe;if(Qe=L)e:{var He,we,Ai,xn=w,Li=N,Sn=R,Ye=ht,Rn=_,In=xn.m,Bi=xn.s,Yi=[null],ln=1,Yn=0,ks=QE[Ye];i:for(;;){if(Rn&&ct(In,1)){var Gi=ct(In,3)+2,ar=zt(Li,Gi),Io=zt(Sn,Gi),eh=ar*Io;if(!Ts(ar,Io,0,xn,Yi))break i;for(Yi=Yi[0],Bi.xc=Gi,He=0;He<eh;++He){var Yr=Yi[He]>>8&65535;Yi[He]=Yr,Yr>=ln&&(ln=Yr+1)}}if(In.h)break i;for(we=0;5>we;++we){var pi=Vm[we];!we&&0<Ye&&(pi+=1<<Ye),Yn<pi&&(Yn=pi)}var Z0=o(ln*ks,I),n5=ln,s5=o(n5,G);if(s5==null)var Oc=null;else t(65536>=n5),Oc=s5;var Cl=r(Yn);if(Oc==null||Cl==null||Z0==null){xn.a=1;break i}var Fc=Z0;for(He=Ai=0;He<ln;++He){var gs=Oc[He],ih=gs.G,nh=gs.H,r5=0,kc=1,o5=0;for(we=0;5>we;++we){pi=Vm[we],ih[we]=Fc,nh[we]=Ai,!we&&0<Ye&&(pi+=1<<Ye);s:{var Dc,K0=pi,jc=xn,El=Cl,vA=Fc,wA=Ai,J0=0,Vr=jc.m,bA=ct(Vr,1);if(s(El,0,0,K0),bA){var xA=ct(Vr,1)+1,SA=ct(Vr,1),a5=ct(Vr,SA==0?1:8);El[a5]=1,xA==2&&(El[a5=ct(Vr,8)]=1);var Bc=1}else{var h5=r(19),l5=ct(Vr,4)+4;if(19<l5){jc.a=3;var Gc=0;break s}for(Dc=0;Dc<l5;++Dc)h5[KE[Dc]]=ct(Vr,3);var Q0=void 0,Al=void 0,u5=jc,MA=h5,qc=K0,c5=El,$0=0,Xr=u5.m,d5=8,f5=o(128,I);n:for(;P(f5,0,7,MA,19);){if(ct(Xr,1)){var CA=2+2*ct(Xr,3);if((Q0=2+ct(Xr,CA))>qc)break n}else Q0=qc;for(Al=0;Al<qc&&Q0--;){it(Xr);var p5=f5[0+(127&j(Xr))];Y(Xr,Xr.u+p5.g);var sh=p5.value;if(16>sh)c5[Al++]=sh,sh!=0&&(d5=sh);else{var EA=sh==16,g5=sh-16,AA=HE[g5],m5=ct(Xr,XE[g5])+AA;if(Al+m5>qc)break n;for(var LA=EA?d5:0;0<m5--;)c5[Al++]=LA}}$0=1;break n}$0||(u5.a=3),Bc=$0}(Bc=Bc&&!Vr.h)&&(J0=P(vA,wA,8,El,K0)),Bc&&J0!=0?Gc=J0:(jc.a=3,Gc=0)}if(Gc==0)break i;if(kc&&ZE[we]==1&&(kc=Fc[Ai].g==0),r5+=Fc[Ai].g,Ai+=Gc,3>=we){var Ll,tp=Cl[0];for(Ll=1;Ll<pi;++Ll)Cl[Ll]>tp&&(tp=Cl[Ll]);o5+=tp}}if(gs.nd=kc,gs.Qb=0,kc&&(gs.qb=(ih[3][nh[3]+0].value<<24|ih[1][nh[1]+0].value<<16|ih[2][nh[2]+0].value)>>>0,r5==0&&256>ih[0][nh[0]+0].value&&(gs.Qb=1,gs.qb+=ih[0][nh[0]+0].value<<8)),gs.jc=!gs.Qb&&6>o5,gs.jc){var Uc,hr=gs;for(Uc=0;Uc<wn;++Uc){var Hr=Uc,Zr=hr.pd[Hr],zc=hr.G[0][hr.H[0]+Hr];256<=zc.value?(Zr.g=zc.g+256,Zr.value=zc.value):(Zr.g=0,Zr.value=0,Hr>>=vi(zc,8,Zr),Hr>>=vi(hr.G[1][hr.H[1]+Hr],16,Zr),Hr>>=vi(hr.G[2][hr.H[2]+Hr],0,Zr),vi(hr.G[3][hr.H[3]+Hr],24,Zr))}}}Bi.vc=Yi,Bi.Wb=ln,Bi.Ya=Oc,Bi.yc=Z0,Qe=1;break e}Qe=0}if(!(L=Qe)){w.a=3;break t}if(0<ht){if(D.ua=1<<ht,!Xt(D.Wa,ht)){w.a=1,L=0;break t}}else D.ua=0;var ep=w,_5=N,NA=R,ip=ep.s,np=ip.xc;if(ep.c=_5,ep.i=NA,ip.md=zt(_5,np),ip.wc=np==0?-1:(1<<np)-1,_){w.xb=oA;break t}if((Z=r(N*R))==null){w.a=1,L=0;break t}L=(L=os(w,Z,0,N,R,R,null))&&!T.h;break t}return L?(C!=null?C[0]=Z:(t(Z==null),t(_)),w.$=0,_||Is(D)):Is(D),L}function Co(u,f){var _=u.c*u.i,w=_+f+16*f;return t(u.c<=f),u.V=r(w),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+_+f,1)}function Ia(u,f){var _=u.C,w=f-_,C=u.V,L=u.Ba+u.c*_;for(t(f<=u.l.o);0<w;){var N=16<w?16:w,R=u.l.ma,T=u.l.width,D=T*N,Z=R.ca,ht=R.tb+T*_,lt=u.Ta,st=u.Ua;Nn(u,N,C,L),jm(lt,st,Z,ht,D),ss(R,_,_+N,Z,ht,T),w-=N,C+=N*u.c,_+=N}t(_==f),u.C=u.Ma=f}function Ta(){this.ub=this.yd=this.td=this.Rb=0}function Oa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fa(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function nc(){this.Yb=function(){var u=[];return function f(_,w,C){for(var L=C[w],N=0;N<L&&(_.push(C.length>w+1?[]:0),!(C.length<w+1));N++)f(_[N],w+1,C)}(u,0,[3,11]),u}()}function p0(){this.jb=r(3),this.Wc=a([4,8],nc),this.Xc=a([4,17],nc)}function g0(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function ka(){this.ld=this.La=this.dd=this.tc=0}function sc(){this.Na=this.la=0}function m0(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function tl(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _0(){this.uc=this.M=this.Nb=0,this.wa=Array(new ka),this.Y=0,this.ya=Array(new tl),this.aa=0,this.l=new Da}function rc(){this.y=r(16),this.f=r(8),this.ea=r(8)}function y0(){this.cb=this.a=0,this.sc="",this.m=new Et,this.Od=new Ta,this.Kc=new Oa,this.ed=new g0,this.Qa=new Fa,this.Ic=this.$c=this.Aa=0,this.D=new _0,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Et),this.ia=0,this.pb=o(4,m0),this.Pa=new p0,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new rc),this.Hd=0,this.rb=Array(new sc),this.sb=0,this.wa=Array(new ka),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new tl),this.L=this.aa=0,this.gd=a([4,2],ka),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Da(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function v0(){var u=new y0;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Sl||(Sl=hc)),u}function wi(u,f,_){return u.a==0&&(u.a=f,u.sc=_,u.cb=0),0}function oc(u,f,_){return 3<=_&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function ac(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return wi(u,2,"null VP8Io passed to VP8GetHeaders()");var _=f.data,w=f.w,C=f.ha;if(4>C)return wi(u,7,"Truncated header.");var L=_[w+0]|_[w+1]<<8|_[w+2]<<16,N=u.Od;if(N.Rb=!(1&L),N.td=L>>1&7,N.yd=L>>4&1,N.ub=L>>5,3<N.td)return wi(u,3,"Incorrect keyframe parameters.");if(!N.yd)return wi(u,4,"Frame not displayable.");w+=3,C-=3;var R=u.Kc;if(N.Rb){if(7>C)return wi(u,7,"cannot parse picture header");if(!oc(_,w,C))return wi(u,3,"Bad code word");R.c=16383&(_[w+4]<<8|_[w+3]),R.Td=_[w+4]>>6,R.i=16383&(_[w+6]<<8|_[w+5]),R.Ud=_[w+6]>>6,w+=7,C-=7,u.za=R.c+15>>4,u.Ub=R.i+15>>4,f.width=R.c,f.height=R.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,s((L=u.Pa).jb,0,255,L.jb.length),t((L=u.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,s(L.Zb,0,0,L.Zb.length),s(L.Lb,0,0,L.Lb)}if(N.ub>C)return wi(u,7,"bad partition length");nt(L=u.m,_,w,N.ub),w+=N.ub,C-=N.ub,N.Rb&&(R.Ld=at(L),R.Kd=at(L)),R=u.Qa;var T,D=u.Pa;if(t(L!=null),t(R!=null),R.Cb=at(L),R.Cb){if(R.Bb=at(L),at(L)){for(R.Fb=at(L),T=0;4>T;++T)R.Zb[T]=at(L)?Q(L,7):0;for(T=0;4>T;++T)R.Lb[T]=at(L)?Q(L,6):0}if(R.Bb)for(T=0;3>T;++T)D.jb[T]=at(L)?tt(L,8):255}else R.Bb=0;if(L.Ka)return wi(u,3,"cannot parse segment header");if((R=u.ed).zd=at(L),R.Tb=tt(L,6),R.wb=tt(L,3),R.Pc=at(L),R.Pc&&at(L)){for(D=0;4>D;++D)at(L)&&(R.vd[D]=Q(L,6));for(D=0;4>D;++D)at(L)&&(R.od[D]=Q(L,6))}if(u.L=R.Tb==0?0:R.zd?1:2,L.Ka)return wi(u,3,"cannot parse filter header");var Z=C;if(C=T=w,w=T+Z,R=Z,u.Xb=(1<<tt(u.m,2))-1,Z<3*(D=u.Xb))_=7;else{for(T+=3*D,R-=3*D,Z=0;Z<D;++Z){var ht=_[C+0]|_[C+1]<<8|_[C+2]<<16;ht>R&&(ht=R),nt(u.Jc[+Z],_,T,ht),T+=ht,R-=ht,C+=3}nt(u.Jc[+D],_,T,R),_=T<w?0:5}if(_!=0)return wi(u,_,"cannot parse partitions");for(_=tt(T=u.m,7),C=at(T)?Q(T,4):0,w=at(T)?Q(T,4):0,R=at(T)?Q(T,4):0,D=at(T)?Q(T,4):0,T=at(T)?Q(T,4):0,Z=u.Qa,ht=0;4>ht;++ht){if(Z.Cb){var lt=Z.Zb[ht];Z.Fb||(lt+=_)}else{if(0<ht){u.pb[ht]=u.pb[0];continue}lt=_}var st=u.pb[ht];st.Sc[0]=V0[Gn(lt+C,127)],st.Sc[1]=X0[Gn(lt+0,127)],st.Eb[0]=2*V0[Gn(lt+w,127)],st.Eb[1]=101581*X0[Gn(lt+R,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=V0[Gn(lt+D,117)],st.Qc[1]=X0[Gn(lt+T,127)],st.lc=lt+T}if(!N.Rb)return wi(u,4,"Not a key frame.");for(at(L),N=u.Pa,_=0;4>_;++_){for(C=0;8>C;++C)for(w=0;3>w;++w)for(R=0;11>R;++R)D=ut(L,sA[_][C][w][R])?tt(L,8):iA[_][C][w][R],N.Wc[_][C].Yb[w][R]=D;for(C=0;17>C;++C)N.Xc[_][C]=N.Wc[_][rA[C]]}return u.kc=at(L),u.kc&&(u.Bd=tt(L,8)),u.cb=1}function hc(u,f,_,w,C,L,N){var R=f[C].Yb[_];for(_=0;16>C;++C){if(!ut(u,R[_+0]))return C;for(;!ut(u,R[_+1]);)if(R=f[++C].Yb[0],_=0,C==16)return 16;var T=f[C+1].Yb;if(ut(u,R[_+2])){var D=u,Z=0;if(ut(D,(lt=R)[(ht=_)+3]))if(ut(D,lt[ht+6])){for(R=0,ht=2*(Z=ut(D,lt[ht+8]))+(lt=ut(D,lt[ht+9+Z])),Z=0,lt=tA[ht];lt[R];++R)Z+=Z+ut(D,lt[R]);Z+=3+(8<<ht)}else ut(D,lt[ht+7])?(Z=7+2*ut(D,165),Z+=ut(D,145)):Z=5+ut(D,159);else Z=ut(D,lt[ht+4])?3+ut(D,lt[ht+5]):2;R=T[2]}else Z=1,R=T[1];T=N+eA[C],0>(D=u).b&&ot(D);var ht,lt=D.b,st=(ht=D.Ca>>1)-(D.I>>lt)>>31;--D.b,D.Ca+=st,D.Ca|=1,D.I-=(ht+1&st)<<lt,L[T]=((Z^st)-st)*w[(0<C)+0]}return 16}function el(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function w0(u,f){if(u==null)return 0;if(f==null)return wi(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!ac(u,f))return 0;if(t(u.cb),f.ac==null||f.ac(f)){f.ob&&(u.L=0);var _=Tc[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=f.v-_>>4,u.zb=f.j-_>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=f.o+15+_>>4,u.Hb=f.va+15+_>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var w=u.ed;for(_=0;4>_;++_){var C;if(u.Qa.Cb){var L=u.Qa.Lb[_];u.Qa.Fb||(L+=w.Tb)}else L=w.Tb;for(C=0;1>=C;++C){var N=u.gd[_][C],R=L;if(w.Pc&&(R+=w.vd[0],C&&(R+=w.od[0])),0<(R=0>R?0:63<R?63:R)){var T=R;0<w.wb&&(T=4<w.wb?T>>2:T>>1)>9-w.wb&&(T=9-w.wb),1>T&&(T=1),N.dd=T,N.tc=2*R+T,N.ld=40<=R?2:15<=R?1:0}else N.tc=0;N.La=C}}}_=0}else wi(u,6,"Frame setup failed"),_=u.a;if(_=_==0){if(_){u.$c=0,0<u.Aa||(u.Ic=yA);t:{_=u.Ic,w=4*(T=u.za);var D=32*T,Z=T+1,ht=0<u.L?T*(0<u.Aa?2:1):0,lt=(u.Aa==2?2:1)*T;if((N=w+832+(C=3*(16*_+Tc[u.L])/2*D)+(L=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=N)_=0;else{if(N>u.Vb){if(u.Vb=0,u.Ec=r(N),u.Fc=0,u.Ec==null){_=wi(u,1,"no memory during frame initialization.");break t}u.Vb=N}N=u.Ec,R=u.Fc,u.Ac=N,u.Bc=R,R+=w,u.Gd=o(D,rc),u.Hd=0,u.rb=o(Z+1,sc),u.sb=1,u.wa=ht?o(ht,ka):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=T),t(!0),u.oc=N,u.pc=R,R+=832,u.ya=o(lt,tl),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=T),u.R=16*T,u.B=8*T,T=(D=Tc[u.L])*u.R,D=D/2*u.B,u.sa=N,u.ta=R+T,u.qa=u.sa,u.ra=u.ta+16*_*u.R+D,u.Ha=u.qa,u.Ia=u.ra+8*_*u.B+D,u.$c=0,R+=C,u.mb=L?N:null,u.nb=L?R:null,t(R+L<=u.Fc+u.Vb),el(u),s(u.Ac,u.Bc,0,w),_=1}}if(_){if(f.ka=0,f.y=u.sa,f.O=u.ta,f.f=u.qa,f.N=u.ra,f.ea=u.Ha,f.Vd=u.Ia,f.fa=u.R,f.Rc=u.B,f.F=null,f.J=0,!zm){for(_=-255;255>=_;++_)Bm[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Gm[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)qm[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)Um[255+_]=0>_?0:255<_?255:_;zm=1}ds=S0,Qa=b0,Gr=uc,fs=x0,nr=cc,bl=lc,Po=al,$a=Lo,Ro=k0,qr=hl,xl=F0,Un=za,sr=ll,ei=wc,ii=vc,xi=tr,Ri=Fr,rr=O0,ps[0]=Os,ps[1]=M0,ps[2]=L0,ps[3]=N0,ps[4]=pc,ps[5]=qa,ps[6]=gc,ps[7]=sl,ps[8]=R0,ps[9]=P0,zr[0]=dc,zr[1]=E0,zr[2]=$s,zr[3]=Ba,zr[4]=en,zr[5]=A0,zr[6]=fc,or[0]=Or,or[1]=C0,or[2]=I0,or[3]=rl,or[4]=Ao,or[5]=T0,or[6]=ol,_=1}else _=0}_&&(_=function(st,wt){for(st.M=0;st.M<st.Va;++st.M){var pt,K=st.Jc[st.M&st.Xb],et=st.m,yt=st;for(pt=0;pt<yt.za;++pt){var bt=et,vt=yt,Bt=vt.Ac,Rt=vt.Bc+4*pt,ee=vt.zc,Ft=vt.ya[vt.aa+pt];if(vt.Qa.Bb?Ft.$b=ut(bt,vt.Pa.jb[0])?2+ut(bt,vt.Pa.jb[2]):ut(bt,vt.Pa.jb[1]):Ft.$b=0,vt.kc&&(Ft.Ad=ut(bt,vt.Bd)),Ft.Za=!ut(bt,145)+0,Ft.Za){var De=Ft.Ob,We=0;for(vt=0;4>vt;++vt){var Oe,Ae=ee[0+vt];for(Oe=0;4>Oe;++Oe){Ae=nA[Bt[Rt+Oe]][Ae];for(var Qe=Xm[ut(bt,Ae[0])];0<Qe;)Qe=Xm[2*Qe+ut(bt,Ae[Qe])];Ae=-Qe,Bt[Rt+Oe]=Ae}n(De,We,Bt,Rt,4),We+=4,ee[0+vt]=Ae}}else Ae=ut(bt,156)?ut(bt,128)?1:3:ut(bt,163)?2:0,Ft.Ob[0]=Ae,s(Bt,Rt,Ae,4),s(ee,0,Ae,4);Ft.Dd=ut(bt,142)?ut(bt,114)?ut(bt,183)?1:3:2:0}if(yt.m.Ka)return wi(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(yt=K,bt=(et=st).rb[et.sb-1],Bt=et.rb[et.sb+et.ja],pt=et.ya[et.aa+et.ja],Rt=et.kc?pt.Ad:0)bt.la=Bt.la=0,pt.Za||(bt.Na=Bt.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var He,we;if(bt=Bt,Bt=yt,Rt=et.Pa.Xc,ee=et.ya[et.aa+et.ja],Ft=et.pb[ee.$b],vt=ee.ad,De=0,We=et.rb[et.sb-1],Ae=Oe=0,s(vt,De,0,384),ee.Za)var Ai=0,xn=Rt[3];else{Qe=r(16);var Li=bt.Na+We.Na;if(Li=Sl(Bt,Rt[1],Li,Ft.Eb,0,Qe,0),bt.Na=We.Na=(0<Li)+0,1<Li)ds(Qe,0,vt,De);else{var Sn=Qe[0]+3>>3;for(Qe=0;256>Qe;Qe+=16)vt[De+Qe]=Sn}Ai=1,xn=Rt[0]}var Ye=15&bt.la,Rn=15&We.la;for(Qe=0;4>Qe;++Qe){var In=1&Rn;for(Sn=we=0;4>Sn;++Sn)Ye=Ye>>1|(In=(Li=Sl(Bt,xn,Li=In+(1&Ye),Ft.Sc,Ai,vt,De))>Ai)<<7,we=we<<2|(3<Li?3:1<Li?2:vt[De+0]!=0),De+=16;Ye>>=4,Rn=Rn>>1|In<<7,Oe=(Oe<<8|we)>>>0}for(xn=Ye,Ai=Rn>>4,He=0;4>He;He+=2){for(we=0,Ye=bt.la>>4+He,Rn=We.la>>4+He,Qe=0;2>Qe;++Qe){for(In=1&Rn,Sn=0;2>Sn;++Sn)Li=In+(1&Ye),Ye=Ye>>1|(In=0<(Li=Sl(Bt,Rt[2],Li,Ft.Qc,0,vt,De)))<<3,we=we<<2|(3<Li?3:1<Li?2:vt[De+0]!=0),De+=16;Ye>>=2,Rn=Rn>>1|In<<5}Ae|=we<<4*He,xn|=Ye<<4<<He,Ai|=(240&Rn)<<He}bt.la=xn,We.la=Ai,ee.Hc=Oe,ee.Gc=Ae,ee.ia=43690&Ae?0:Ft.ia,Rt=!(Oe|Ae)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[pt.$b][pt.Za],et.wa[et.Y+et.ja].La|=!Rt),yt.Ka)return wi(st,7,"Premature end-of-file encountered.")}if(el(st),et=wt,yt=1,pt=(K=st).D,bt=0<K.L&&K.M>=K.zb&&K.M<=K.Va,K.Aa==0)t:{if(pt.M=K.M,pt.uc=bt,gl(K,pt),yt=1,pt=(we=K.D).Nb,bt=(Ae=Tc[K.L])*K.R,Bt=Ae/2*K.B,Qe=16*pt*K.R,Sn=8*pt*K.B,Rt=K.sa,ee=K.ta-bt+Qe,Ft=K.qa,vt=K.ra-Bt+Sn,De=K.Ha,We=K.Ia-Bt+Sn,Rn=(Ye=we.M)==0,Oe=Ye>=K.Va-1,K.Aa==2&&gl(K,we),we.uc)for(In=(Li=K).D.M,t(Li.D.uc),we=Li.yb;we<Li.Hb;++we){Ai=we,xn=In;var Bi=(Yi=(pi=Li).D).Nb;He=pi.R;var Yi=Yi.wa[Yi.Y+Ai],ln=pi.sa,Yn=pi.ta+16*Bi*He+16*Ai,ks=Yi.dd,Gi=Yi.tc;if(Gi!=0)if(t(3<=Gi),pi.L==1)0<Ai&&xi(ln,Yn,He,Gi+4),Yi.La&&rr(ln,Yn,He,Gi),0<xn&&ii(ln,Yn,He,Gi+4),Yi.La&&Ri(ln,Yn,He,Gi);else{var ar=pi.B,Io=pi.qa,eh=pi.ra+8*Bi*ar+8*Ai,Yr=pi.Ha,pi=pi.Ia+8*Bi*ar+8*Ai;Bi=Yi.ld,0<Ai&&($a(ln,Yn,He,Gi+4,ks,Bi),qr(Io,eh,Yr,pi,ar,Gi+4,ks,Bi)),Yi.La&&(Un(ln,Yn,He,Gi,ks,Bi),ei(Io,eh,Yr,pi,ar,Gi,ks,Bi)),0<xn&&(Po(ln,Yn,He,Gi+4,ks,Bi),Ro(Io,eh,Yr,pi,ar,Gi+4,ks,Bi)),Yi.La&&(xl(ln,Yn,He,Gi,ks,Bi),sr(Io,eh,Yr,pi,ar,Gi,ks,Bi))}}if(K.ia&&alert("todo:DitherRow"),et.put!=null){if(we=16*Ye,Ye=16*(Ye+1),Rn?(et.y=K.sa,et.O=K.ta+Qe,et.f=K.qa,et.N=K.ra+Sn,et.ea=K.Ha,et.W=K.Ia+Sn):(we-=Ae,et.y=Rt,et.O=ee,et.f=Ft,et.N=vt,et.ea=De,et.W=We),Oe||(Ye-=Ae),Ye>et.o&&(Ye=et.o),et.F=null,et.J=null,K.Fa!=null&&0<K.Fa.length&&we<Ye&&(et.J=fl(K,et,we,Ye-we),et.F=K.mb,et.F==null&&et.F.length==0)){yt=wi(K,3,"Could not decode alpha data.");break t}we<et.j&&(Ae=et.j-we,we=et.j,t(!(1&Ae)),et.O+=K.R*Ae,et.N+=K.B*(Ae>>1),et.W+=K.B*(Ae>>1),et.F!=null&&(et.J+=et.width*Ae)),we<Ye&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=we-et.j,et.U=et.va-et.v,et.T=Ye-we,yt=et.put(et))}pt+1!=K.Ic||Oe||(n(K.sa,K.ta-bt,Rt,ee+16*K.R,bt),n(K.qa,K.ra-Bt,Ft,vt+8*K.B,Bt),n(K.Ha,K.Ia-Bt,De,We+8*K.B,Bt))}if(!yt)return wi(st,6,"Output aborted.")}return 1}(u,f)),f.bc!=null&&f.bc(f),_&=1}return _?(u.cb=0,_):0}function as(u,f,_,w,C){C=u[f+_+32*w]+(C>>3),u[f+_+32*w]=-256&C?0>C?0:255:C}function ja(u,f,_,w,C,L){as(u,f,0,_,w+C),as(u,f,1,_,w+L),as(u,f,2,_,w-L),as(u,f,3,_,w-C)}function vn(u){return(20091*u>>16)+u}function il(u,f,_,w){var C,L=0,N=r(16);for(C=0;4>C;++C){var R=u[f+0]+u[f+8],T=u[f+0]-u[f+8],D=(35468*u[f+4]>>16)-vn(u[f+12]),Z=vn(u[f+4])+(35468*u[f+12]>>16);N[L+0]=R+Z,N[L+1]=T+D,N[L+2]=T-D,N[L+3]=R-Z,L+=4,f++}for(C=L=0;4>C;++C)R=(u=N[L+0]+4)+N[L+8],T=u-N[L+8],D=(35468*N[L+4]>>16)-vn(N[L+12]),as(_,w,0,0,R+(Z=vn(N[L+4])+(35468*N[L+12]>>16))),as(_,w,1,0,T+D),as(_,w,2,0,T-D),as(_,w,3,0,R-Z),L++,w+=32}function lc(u,f,_,w){var C=u[f+0]+4,L=35468*u[f+4]>>16,N=vn(u[f+4]),R=35468*u[f+1]>>16;ja(_,w,0,C+N,u=vn(u[f+1]),R),ja(_,w,1,C+L,u,R),ja(_,w,2,C-L,u,R),ja(_,w,3,C-N,u,R)}function b0(u,f,_,w,C){il(u,f,_,w),C&&il(u,f+16,_,w+4)}function uc(u,f,_,w){Qa(u,f+0,_,w,1),Qa(u,f+32,_,w+128,1)}function x0(u,f,_,w){var C;for(u=u[f+0]+4,C=0;4>C;++C)for(f=0;4>f;++f)as(_,w,f,C,u)}function cc(u,f,_,w){u[f+0]&&fs(u,f+0,_,w),u[f+16]&&fs(u,f+16,_,w+4),u[f+32]&&fs(u,f+32,_,w+128),u[f+48]&&fs(u,f+48,_,w+128+4)}function S0(u,f,_,w){var C,L=r(16);for(C=0;4>C;++C){var N=u[f+0+C]+u[f+12+C],R=u[f+4+C]+u[f+8+C],T=u[f+4+C]-u[f+8+C],D=u[f+0+C]-u[f+12+C];L[0+C]=N+R,L[8+C]=N-R,L[4+C]=D+T,L[12+C]=D-T}for(C=0;4>C;++C)N=(u=L[0+4*C]+3)+L[3+4*C],R=L[1+4*C]+L[2+4*C],T=L[1+4*C]-L[2+4*C],D=u-L[3+4*C],_[w+0]=N+R>>3,_[w+16]=D+T>>3,_[w+32]=N-R>>3,_[w+48]=D-T>>3,w+=64}function nl(u,f,_){var w,C=f-32,L=Pn,N=255-u[C-1];for(w=0;w<_;++w){var R,T=L,D=N+u[f-1];for(R=0;R<_;++R)u[f+R]=T[D+u[C+R]];f+=32}}function M0(u,f){nl(u,f,4)}function C0(u,f){nl(u,f,8)}function E0(u,f){nl(u,f,16)}function $s(u,f){var _;for(_=0;16>_;++_)n(u,f+32*_,u,f-32,16)}function Ba(u,f){var _;for(_=16;0<_;--_)s(u,f,u[f-1],16),f+=32}function Ga(u,f,_){var w;for(w=0;16>w;++w)s(f,_+32*w,u,16)}function dc(u,f){var _,w=16;for(_=0;16>_;++_)w+=u[f-1+32*_]+u[f+_-32];Ga(w>>5,u,f)}function en(u,f){var _,w=8;for(_=0;16>_;++_)w+=u[f-1+32*_];Ga(w>>4,u,f)}function A0(u,f){var _,w=8;for(_=0;16>_;++_)w+=u[f+_-32];Ga(w>>4,u,f)}function fc(u,f){Ga(128,u,f)}function fe(u,f,_){return u+2*f+_+2>>2}function L0(u,f){var _,w=f-32;for(w=new Uint8Array([fe(u[w-1],u[w+0],u[w+1]),fe(u[w+0],u[w+1],u[w+2]),fe(u[w+1],u[w+2],u[w+3]),fe(u[w+2],u[w+3],u[w+4])]),_=0;4>_;++_)n(u,f+32*_,w,0,w.length)}function N0(u,f){var _=u[f-1],w=u[f-1+32],C=u[f-1+64],L=u[f-1+96];At(u,f+0,16843009*fe(u[f-1-32],_,w)),At(u,f+32,16843009*fe(_,w,C)),At(u,f+64,16843009*fe(w,C,L)),At(u,f+96,16843009*fe(C,L,L))}function Os(u,f){var _,w=4;for(_=0;4>_;++_)w+=u[f+_-32]+u[f-1+32*_];for(w>>=3,_=0;4>_;++_)s(u,f+32*_,w,4)}function pc(u,f){var _=u[f-1+0],w=u[f-1+32],C=u[f-1+64],L=u[f-1-32],N=u[f+0-32],R=u[f+1-32],T=u[f+2-32],D=u[f+3-32];u[f+0+96]=fe(w,C,u[f-1+96]),u[f+1+96]=u[f+0+64]=fe(_,w,C),u[f+2+96]=u[f+1+64]=u[f+0+32]=fe(L,_,w),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=fe(N,L,_),u[f+3+64]=u[f+2+32]=u[f+1+0]=fe(R,N,L),u[f+3+32]=u[f+2+0]=fe(T,R,N),u[f+3+0]=fe(D,T,R)}function gc(u,f){var _=u[f+1-32],w=u[f+2-32],C=u[f+3-32],L=u[f+4-32],N=u[f+5-32],R=u[f+6-32],T=u[f+7-32];u[f+0+0]=fe(u[f+0-32],_,w),u[f+1+0]=u[f+0+32]=fe(_,w,C),u[f+2+0]=u[f+1+32]=u[f+0+64]=fe(w,C,L),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=fe(C,L,N),u[f+3+32]=u[f+2+64]=u[f+1+96]=fe(L,N,R),u[f+3+64]=u[f+2+96]=fe(N,R,T),u[f+3+96]=fe(R,T,T)}function qa(u,f){var _=u[f-1+0],w=u[f-1+32],C=u[f-1+64],L=u[f-1-32],N=u[f+0-32],R=u[f+1-32],T=u[f+2-32],D=u[f+3-32];u[f+0+0]=u[f+1+64]=L+N+1>>1,u[f+1+0]=u[f+2+64]=N+R+1>>1,u[f+2+0]=u[f+3+64]=R+T+1>>1,u[f+3+0]=T+D+1>>1,u[f+0+96]=fe(C,w,_),u[f+0+64]=fe(w,_,L),u[f+0+32]=u[f+1+96]=fe(_,L,N),u[f+1+32]=u[f+2+96]=fe(L,N,R),u[f+2+32]=u[f+3+96]=fe(N,R,T),u[f+3+32]=fe(R,T,D)}function sl(u,f){var _=u[f+0-32],w=u[f+1-32],C=u[f+2-32],L=u[f+3-32],N=u[f+4-32],R=u[f+5-32],T=u[f+6-32],D=u[f+7-32];u[f+0+0]=_+w+1>>1,u[f+1+0]=u[f+0+64]=w+C+1>>1,u[f+2+0]=u[f+1+64]=C+L+1>>1,u[f+3+0]=u[f+2+64]=L+N+1>>1,u[f+0+32]=fe(_,w,C),u[f+1+32]=u[f+0+96]=fe(w,C,L),u[f+2+32]=u[f+1+96]=fe(C,L,N),u[f+3+32]=u[f+2+96]=fe(L,N,R),u[f+3+64]=fe(N,R,T),u[f+3+96]=fe(R,T,D)}function P0(u,f){var _=u[f-1+0],w=u[f-1+32],C=u[f-1+64],L=u[f-1+96];u[f+0+0]=_+w+1>>1,u[f+2+0]=u[f+0+32]=w+C+1>>1,u[f+2+32]=u[f+0+64]=C+L+1>>1,u[f+1+0]=fe(_,w,C),u[f+3+0]=u[f+1+32]=fe(w,C,L),u[f+3+32]=u[f+1+64]=fe(C,L,L),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=L}function R0(u,f){var _=u[f-1+0],w=u[f-1+32],C=u[f-1+64],L=u[f-1+96],N=u[f-1-32],R=u[f+0-32],T=u[f+1-32],D=u[f+2-32];u[f+0+0]=u[f+2+32]=_+N+1>>1,u[f+0+32]=u[f+2+64]=w+_+1>>1,u[f+0+64]=u[f+2+96]=C+w+1>>1,u[f+0+96]=L+C+1>>1,u[f+3+0]=fe(R,T,D),u[f+2+0]=fe(N,R,T),u[f+1+0]=u[f+3+32]=fe(_,N,R),u[f+1+32]=u[f+3+64]=fe(w,_,N),u[f+1+64]=u[f+3+96]=fe(C,w,_),u[f+1+96]=fe(L,C,w)}function I0(u,f){var _;for(_=0;8>_;++_)n(u,f+32*_,u,f-32,8)}function rl(u,f){var _;for(_=0;8>_;++_)s(u,f,u[f-1],8),f+=32}function Eo(u,f,_){var w;for(w=0;8>w;++w)s(f,_+32*w,u,8)}function Or(u,f){var _,w=8;for(_=0;8>_;++_)w+=u[f+_-32]+u[f-1+32*_];Eo(w>>4,u,f)}function T0(u,f){var _,w=4;for(_=0;8>_;++_)w+=u[f+_-32];Eo(w>>3,u,f)}function Ao(u,f){var _,w=4;for(_=0;8>_;++_)w+=u[f-1+32*_];Eo(w>>3,u,f)}function ol(u,f){Eo(128,u,f)}function Ua(u,f,_){var w=u[f-_],C=u[f+0],L=3*(C-w)+q0[1020+u[f-2*_]-u[f+_]],N=Cc[112+(L+4>>3)];u[f-_]=Pn[255+w+Cc[112+(L+3>>3)]],u[f+0]=Pn[255+C-N]}function mc(u,f,_,w){var C=u[f+0],L=u[f+_];return zn[255+u[f-2*_]-u[f-_]]>w||zn[255+L-C]>w}function _c(u,f,_,w){return 4*zn[255+u[f-_]-u[f+0]]+zn[255+u[f-2*_]-u[f+_]]<=w}function yc(u,f,_,w,C){var L=u[f-3*_],N=u[f-2*_],R=u[f-_],T=u[f+0],D=u[f+_],Z=u[f+2*_],ht=u[f+3*_];return 4*zn[255+R-T]+zn[255+N-D]>w?0:zn[255+u[f-4*_]-L]<=C&&zn[255+L-N]<=C&&zn[255+N-R]<=C&&zn[255+ht-Z]<=C&&zn[255+Z-D]<=C&&zn[255+D-T]<=C}function vc(u,f,_,w){var C=2*w+1;for(w=0;16>w;++w)_c(u,f+w,_,C)&&Ua(u,f+w,_)}function tr(u,f,_,w){var C=2*w+1;for(w=0;16>w;++w)_c(u,f+w*_,1,C)&&Ua(u,f+w*_,1)}function Fr(u,f,_,w){var C;for(C=3;0<C;--C)vc(u,f+=4*_,_,w)}function O0(u,f,_,w){var C;for(C=3;0<C;--C)tr(u,f+=4,_,w)}function kr(u,f,_,w,C,L,N,R){for(L=2*L+1;0<C--;){if(yc(u,f,_,L,N))if(mc(u,f,_,R))Ua(u,f,_);else{var T=u,D=f,Z=_,ht=T[D-2*Z],lt=T[D-Z],st=T[D+0],wt=T[D+Z],pt=T[D+2*Z],K=27*(yt=q0[1020+3*(st-lt)+q0[1020+ht-wt]])+63>>7,et=18*yt+63>>7,yt=9*yt+63>>7;T[D-3*Z]=Pn[255+T[D-3*Z]+yt],T[D-2*Z]=Pn[255+ht+et],T[D-Z]=Pn[255+lt+K],T[D+0]=Pn[255+st-K],T[D+Z]=Pn[255+wt-et],T[D+2*Z]=Pn[255+pt-yt]}f+=w}}function hs(u,f,_,w,C,L,N,R){for(L=2*L+1;0<C--;){if(yc(u,f,_,L,N))if(mc(u,f,_,R))Ua(u,f,_);else{var T=u,D=f,Z=_,ht=T[D-Z],lt=T[D+0],st=T[D+Z],wt=Cc[112+((pt=3*(lt-ht))+4>>3)],pt=Cc[112+(pt+3>>3)],K=wt+1>>1;T[D-2*Z]=Pn[255+T[D-2*Z]+K],T[D-Z]=Pn[255+ht+pt],T[D+0]=Pn[255+lt-wt],T[D+Z]=Pn[255+st-K]}f+=w}}function al(u,f,_,w,C,L){kr(u,f,_,1,16,w,C,L)}function Lo(u,f,_,w,C,L){kr(u,f,1,_,16,w,C,L)}function F0(u,f,_,w,C,L){var N;for(N=3;0<N;--N)hs(u,f+=4*_,_,1,16,w,C,L)}function za(u,f,_,w,C,L){var N;for(N=3;0<N;--N)hs(u,f+=4,1,_,16,w,C,L)}function k0(u,f,_,w,C,L,N,R){kr(u,f,C,1,8,L,N,R),kr(_,w,C,1,8,L,N,R)}function hl(u,f,_,w,C,L,N,R){kr(u,f,1,C,8,L,N,R),kr(_,w,1,C,8,L,N,R)}function ll(u,f,_,w,C,L,N,R){hs(u,f+4*C,C,1,8,L,N,R),hs(_,w+4*C,C,1,8,L,N,R)}function wc(u,f,_,w,C,L,N,R){hs(u,f+4,1,C,8,L,N,R),hs(_,w+4,1,C,8,L,N,R)}function Wa(){this.ba=new Wi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ul(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bc(){this.ua=0,this.Wa=new z,this.vb=new z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new I}function D0(){this.xb=this.a=0,this.l=new Da,this.ca=new Wi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bc,this.ab=0,this.gc=o(4,cl),this.Oc=0}function Ya(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Da,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function No(u,f,_,w,C,L,N){for(u=u==null?0:u[f+0],f=0;f<N;++f)C[L+f]=u+_[w+f]&255,u=C[L+f]}function dl(u,f,_,w,C,L,N){var R;if(u==null)No(null,null,_,w,C,L,N);else for(R=0;R<N;++R)C[L+R]=u[f+R]+_[w+R]&255}function Dr(u,f,_,w,C,L,N){if(u==null)No(null,null,_,w,C,L,N);else{var R,T=u[f+0],D=T,Z=T;for(R=0;R<N;++R)D=Z+(T=u[f+R])-D,Z=_[w+R]+(-256&D?0>D?0:255:D)&255,D=T,C[L+R]=Z}}function fl(u,f,_,w){var C=f.width,L=f.o;if(t(u!=null&&f!=null),0>_||0>=w||_+w>L)return null;if(!u.Cc){if(u.ga==null){var N;if(u.ga=new Ya,(N=u.ga==null)||(N=f.width*f.o,t(u.Gb.length==0),u.Gb=r(N),u.Uc=0,u.Gb==null?N=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,N=1),N=!N),!N){N=u.ga;var R=u.Fa,T=u.P,D=u.qc,Z=u.mb,ht=u.nb,lt=T+1,st=D-1,wt=N.l;if(t(R!=null&&Z!=null&&f!=null),Wr[0]=null,Wr[1]=No,Wr[2]=dl,Wr[3]=Dr,N.ca=Z,N.tb=ht,N.c=f.width,N.i=f.height,t(0<N.c&&0<N.i),1>=D)f=0;else if(N.$a=R[T+0]>>0&3,N.Z=R[T+0]>>2&3,N.Lc=R[T+0]>>4&3,T=R[T+0]>>6&3,0>N.$a||1<N.$a||4<=N.Z||1<N.Lc||T)f=0;else if(wt.put=ri,wt.ac=Je,wt.bc=hn,wt.ma=N,wt.width=f.width,wt.height=f.height,wt.Da=f.Da,wt.v=f.v,wt.va=f.va,wt.j=f.j,wt.o=f.o,N.$a)t:{t(N.$a==1),f=Bn();e:for(;;){if(f==null){f=0;break t}if(t(N!=null),N.mc=f,f.c=N.c,f.i=N.i,f.l=N.l,f.l.ma=N,f.l.width=N.c,f.l.height=N.i,f.a=0,J(f.m,R,lt,st),!Ts(N.c,N.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Qs(f.s)?(N.ic=1,R=f.c*f.i,f.Ta=null,f.Ua=0,f.V=r(R),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(N.ic=0,f=Co(f,N.c)),!f))break e;f=1;break t}N.mc=null,f=0}else f=st>=N.c*N.i;N=!f}if(N)return null;u.ga.Lc!=1?u.Ga=0:w=L-_}t(u.ga!=null),t(_+w<=L);t:{if(f=(R=u.ga).c,L=R.l.o,R.$a==0){if(lt=u.rc,st=u.Vc,wt=u.Fa,T=u.P+1+_*f,D=u.mb,Z=u.nb+_*f,t(T<=u.P+u.qc),R.Z!=0)for(t(Wr[R.Z]!=null),N=0;N<w;++N)Wr[R.Z](lt,st,wt,T,D,Z,f),lt=D,st=Z,Z+=f,T+=f;else for(N=0;N<w;++N)n(D,Z,wt,T,f),lt=D,st=Z,Z+=f,T+=f;u.rc=lt,u.Vc=st}else{if(t(R.mc!=null),f=_+w,t((N=R.mc)!=null),t(f<=N.i),N.C>=f)f=1;else if(R.ic||rt(),R.ic){R=N.V,lt=N.Ba,st=N.c;var pt=N.i,K=(wt=1,T=N.$/st,D=N.$%st,Z=N.m,ht=N.s,N.$),et=st*pt,yt=st*f,bt=ht.wc,vt=K<yt?Ci(ht,D,T):null;t(K<=et),t(f<=pt),t(Qs(ht));e:for(;;){for(;!Z.h&&K<yt;){if(D&bt||(vt=Ci(ht,D,T)),t(vt!=null),it(Z),256>(pt=oi(vt.G[0],vt.H[0],Z)))R[lt+K]=pt,++K,++D>=st&&(D=0,++T<=f&&!(T%16)&&rs(N,T));else{if(!(280>pt)){wt=0;break e}pt=ti(pt-256,Z);var Bt,Rt=oi(vt.G[4],vt.H[4],Z);if(it(Z),!(K>=(Rt=li(st,Rt=ti(Rt,Z)))&&et-K>=pt)){wt=0;break e}for(Bt=0;Bt<pt;++Bt)R[lt+K+Bt]=R[lt+K+Bt-Rt];for(K+=pt,D+=pt;D>=st;)D-=st,++T<=f&&!(T%16)&&rs(N,T);K<yt&&D&bt&&(vt=Ci(ht,D,T))}t(Z.h==B(Z))}rs(N,T>f?f:T);break e}!wt||Z.h&&K<et?(wt=0,N.a=Z.h?5:3):N.$=K,f=wt}else f=os(N,N.V,N.Ba,N.c,N.i,f,Ia);if(!f){w=0;break t}}_+w>=L&&(u.Cc=1),w=1}if(!w)return null;if(u.Cc&&((w=u.ga)!=null&&(w.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+_*C}function m(u,f,_,w,C,L){for(;0<C--;){var N,R=u,T=f+(_?1:0),D=u,Z=f+(_?0:3);for(N=0;N<w;++N){var ht=D[Z+4*N];ht!=255&&(ht*=32897,R[T+4*N+0]=R[T+4*N+0]*ht>>23,R[T+4*N+1]=R[T+4*N+1]*ht>>23,R[T+4*N+2]=R[T+4*N+2]*ht>>23)}f+=L}}function E(u,f,_,w,C){for(;0<w--;){var L;for(L=0;L<_;++L){var N=u[f+2*L+0],R=15&(D=u[f+2*L+1]),T=4369*R,D=(240&D|D>>4)*T>>16;u[f+2*L+0]=(240&N|N>>4)*T>>16&240|(15&N|N<<4)*T>>16>>4&15,u[f+2*L+1]=240&D|R}f+=C}}function q(u,f,_,w,C,L,N,R){var T,D,Z=255;for(D=0;D<C;++D){for(T=0;T<w;++T){var ht=u[f+T];L[N+4*T]=ht,Z&=ht}f+=_,N+=R}return Z!=255}function X(u,f,_,w,C){var L;for(L=0;L<C;++L)_[w+L]=u[f+L]>>8}function rt(){Ur=m,th=E,Mc=q,jm=X}function gt(u,f,_){F[u]=function(w,C,L,N,R,T,D,Z,ht,lt,st,wt,pt,K,et,yt,bt){var vt,Bt=bt-1>>1,Rt=R[T+0]|D[Z+0]<<16,ee=ht[lt+0]|st[wt+0]<<16;t(w!=null);var Ft=3*Rt+ee+131074>>2;for(f(w[C+0],255&Ft,Ft>>16,pt,K),L!=null&&(Ft=3*ee+Rt+131074>>2,f(L[N+0],255&Ft,Ft>>16,et,yt)),vt=1;vt<=Bt;++vt){var De=R[T+vt]|D[Z+vt]<<16,We=ht[lt+vt]|st[wt+vt]<<16,Oe=Rt+De+ee+We+524296,Ae=Oe+2*(De+ee)>>3;Ft=Ae+Rt>>1,Rt=(Oe=Oe+2*(Rt+We)>>3)+De>>1,f(w[C+2*vt-1],255&Ft,Ft>>16,pt,K+(2*vt-1)*_),f(w[C+2*vt-0],255&Rt,Rt>>16,pt,K+(2*vt-0)*_),L!=null&&(Ft=Oe+ee>>1,Rt=Ae+We>>1,f(L[N+2*vt-1],255&Ft,Ft>>16,et,yt+(2*vt-1)*_),f(L[N+2*vt+0],255&Rt,Rt>>16,et,yt+(2*vt+0)*_)),Rt=De,ee=We}1&bt||(Ft=3*Rt+ee+131074>>2,f(w[C+bt-1],255&Ft,Ft>>16,pt,K+(bt-1)*_),L!=null&&(Ft=3*ee+Rt+131074>>2,f(L[N+bt-1],255&Ft,Ft>>16,et,yt+(bt-1)*_)))}}function St(){Wn[Ec]=aA,Wn[Ac]=Zm,Wn[Wm]=hA,Wn[Lc]=Km,Wn[Nc]=Jm,Wn[U0]=Qm,Wn[Ym]=lA,Wn[z0]=Zm,Wn[W0]=Km,Wn[Pc]=Jm,Wn[Y0]=Qm}function jt(u){return u&~uA?0>u?0:255:u>>$m}function Kt(u,f){return jt((19077*u>>8)+(26149*f>>8)-14234)}function _e(u,f,_){return jt((19077*u>>8)-(6419*f>>8)-(13320*_>>8)+8708)}function Se(u,f){return jt((19077*u>>8)+(33050*f>>8)-17685)}function Ie(u,f,_,w,C){w[C+0]=Kt(u,_),w[C+1]=_e(u,f,_),w[C+2]=Se(u,f)}function ui(u,f,_,w,C){w[C+0]=Se(u,f),w[C+1]=_e(u,f,_),w[C+2]=Kt(u,_)}function bi(u,f,_,w,C){var L=_e(u,f,_);f=L<<3&224|Se(u,f)>>3,w[C+0]=248&Kt(u,_)|L>>5,w[C+1]=f}function Ei(u,f,_,w,C){var L=240&Se(u,f)|15;w[C+0]=240&Kt(u,_)|_e(u,f,_)>>4,w[C+1]=L}function nn(u,f,_,w,C){w[C+0]=255,Ie(u,f,_,w,C+1)}function ji(u,f,_,w,C){ui(u,f,_,w,C),w[C+3]=255}function ls(u,f,_,w,C){Ie(u,f,_,w,C),w[C+3]=255}function Gn(u,f){return 0>u?0:u>f?f:u}function er(u,f,_){F[u]=function(w,C,L,N,R,T,D,Z,ht){for(var lt=Z+(-2&ht)*_;Z!=lt;)f(w[C+0],L[N+0],R[T+0],D,Z),f(w[C+1],L[N+0],R[T+0],D,Z+_),C+=2,++N,++T,Z+=2*_;1&ht&&f(w[C+0],L[N+0],R[T+0],D,Z)}}function xc(u,f,_){return _==0?u==0?f==0?6:5:f==0?4:0:_}function pl(u,f,_,w,C){switch(u>>>30){case 3:Qa(f,_,w,C,0);break;case 2:bl(f,_,w,C);break;case 1:fs(f,_,w,C)}}function gl(u,f){var _,w,C=f.M,L=f.Nb,N=u.oc,R=u.pc+40,T=u.oc,D=u.pc+584,Z=u.oc,ht=u.pc+600;for(_=0;16>_;++_)N[R+32*_-1]=129;for(_=0;8>_;++_)T[D+32*_-1]=129,Z[ht+32*_-1]=129;for(0<C?N[R-1-32]=T[D-1-32]=Z[ht-1-32]=129:(s(N,R-32-1,127,21),s(T,D-32-1,127,9),s(Z,ht-32-1,127,9)),w=0;w<u.za;++w){var lt=f.ya[f.aa+w];if(0<w){for(_=-1;16>_;++_)n(N,R+32*_-4,N,R+32*_+12,4);for(_=-1;8>_;++_)n(T,D+32*_-4,T,D+32*_+4,4),n(Z,ht+32*_-4,Z,ht+32*_+4,4)}var st=u.Gd,wt=u.Hd+w,pt=lt.ad,K=lt.Hc;if(0<C&&(n(N,R-32,st[wt].y,0,16),n(T,D-32,st[wt].f,0,8),n(Z,ht-32,st[wt].ea,0,8)),lt.Za){var et=N,yt=R-32+16;for(0<C&&(w>=u.za-1?s(et,yt,st[wt].y[15],4):n(et,yt,st[wt+1].y,0,4)),_=0;4>_;_++)et[yt+128+_]=et[yt+256+_]=et[yt+384+_]=et[yt+0+_];for(_=0;16>_;++_,K<<=2)et=N,yt=R+e5[_],ps[lt.Ob[_]](et,yt),pl(K,pt,16*+_,et,yt)}else if(et=xc(w,C,lt.Ob[0]),zr[et](N,R),K!=0)for(_=0;16>_;++_,K<<=2)pl(K,pt,16*+_,N,R+e5[_]);for(_=lt.Gc,et=xc(w,C,lt.Dd),or[et](T,D),or[et](Z,ht),K=pt,et=T,yt=D,255&(lt=_>>0)&&(170&lt?Gr(K,256,et,yt):nr(K,256,et,yt)),lt=Z,K=ht,255&(_>>=8)&&(170&_?Gr(pt,320,lt,K):nr(pt,320,lt,K)),C<u.Ub-1&&(n(st[wt].y,0,N,R+480,16),n(st[wt].f,0,T,D+224,8),n(st[wt].ea,0,Z,ht+224,8)),_=8*L*u.B,st=u.sa,wt=u.ta+16*w+16*L*u.R,pt=u.qa,lt=u.ra+8*w+_,K=u.Ha,et=u.Ia+8*w+_,_=0;16>_;++_)n(st,wt+_*u.R,N,R+32*_,16);for(_=0;8>_;++_)n(pt,lt+_*u.B,T,D+32*_,8),n(K,et+_*u.B,Z,ht+32*_,8)}}function Va(u,f,_,w,C,L,N,R,T){var D=[0],Z=[0],ht=0,lt=T!=null?T.kd:0,st=T??new ul;if(u==null||12>_)return 7;st.data=u,st.w=f,st.ha=_,f=[f],_=[_],st.gb=[st.gb];t:{var wt=f,pt=_,K=st.gb;if(t(u!=null),t(pt!=null),t(K!=null),K[0]=0,12<=pt[0]&&!e(u,wt[0],"RIFF")){if(e(u,wt[0]+8,"WEBP")){K=3;break t}var et=It(u,wt[0]+4);if(12>et||4294967286<et){K=3;break t}if(lt&&et>pt[0]-8){K=7;break t}K[0]=et,wt[0]+=12,pt[0]-=12}K=0}if(K!=0)return K;for(et=0<st.gb[0],_=_[0];;){t:{var yt=u;pt=f,K=_;var bt=D,vt=Z,Bt=wt=[0];if((Ft=ht=[ht])[0]=0,8>K[0])K=7;else{if(!e(yt,pt[0],"VP8X")){if(It(yt,pt[0]+4)!=10){K=3;break t}if(18>K[0]){K=7;break t}var Rt=It(yt,pt[0]+8),ee=1+Tt(yt,pt[0]+12);if(2147483648<=ee*(yt=1+Tt(yt,pt[0]+15))){K=3;break t}Bt!=null&&(Bt[0]=Rt),bt!=null&&(bt[0]=ee),vt!=null&&(vt[0]=yt),pt[0]+=18,K[0]-=18,Ft[0]=1}K=0}}if(ht=ht[0],wt=wt[0],K!=0)return K;if(pt=!!(2&wt),!et&&ht)return 3;if(L!=null&&(L[0]=!!(16&wt)),N!=null&&(N[0]=pt),R!=null&&(R[0]=0),N=D[0],wt=Z[0],ht&&pt&&T==null){K=0;break}if(4>_){K=7;break}if(et&&ht||!et&&!ht&&!e(u,f[0],"ALPH")){_=[_],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];t:{Rt=u,K=f,et=_;var Ft=st.gb;bt=st.na,vt=st.P,Bt=st.Sa,ee=22,t(Rt!=null),t(et!=null),yt=K[0];var De=et[0];for(t(bt!=null),t(Bt!=null),bt[0]=null,vt[0]=null,Bt[0]=0;;){if(K[0]=yt,et[0]=De,8>De){K=7;break t}var We=It(Rt,yt+4);if(4294967286<We){K=3;break t}var Oe=8+We+1&-2;if(ee+=Oe,0<Ft&&ee>Ft){K=3;break t}if(!e(Rt,yt,"VP8 ")||!e(Rt,yt,"VP8L")){K=0;break t}if(De[0]<Oe){K=7;break t}e(Rt,yt,"ALPH")||(bt[0]=Rt,vt[0]=yt+8,Bt[0]=We),yt+=Oe,De-=Oe}}if(_=_[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],K!=0)break}_=[_],st.Ja=[st.Ja],st.xa=[st.xa];t:if(Ft=u,K=f,et=_,bt=st.gb[0],vt=st.Ja,Bt=st.xa,Rt=K[0],yt=!e(Ft,Rt,"VP8 "),ee=!e(Ft,Rt,"VP8L"),t(Ft!=null),t(et!=null),t(vt!=null),t(Bt!=null),8>et[0])K=7;else{if(yt||ee){if(Ft=It(Ft,Rt+4),12<=bt&&Ft>bt-12){K=3;break t}if(lt&&Ft>et[0]-8){K=7;break t}vt[0]=Ft,K[0]+=8,et[0]-=8,Bt[0]=ee}else Bt[0]=5<=et[0]&&Ft[Rt+0]==47&&!(Ft[Rt+4]>>5),vt[0]=et[0];K=0}if(_=_[0],st.Ja=st.Ja[0],st.xa=st.xa[0],f=f[0],K!=0)break;if(4294967286<st.Ja)return 3;if(R==null||pt||(R[0]=st.xa?2:1),N=[N],wt=[wt],st.xa){if(5>_){K=7;break}R=N,lt=wt,pt=L,u==null||5>_?u=0:5<=_&&u[f+0]==47&&!(u[f+4]>>5)?(et=[0],Ft=[0],bt=[0],J(vt=new M,u,f,_),Ht(vt,et,Ft,bt)?(R!=null&&(R[0]=et[0]),lt!=null&&(lt[0]=Ft[0]),pt!=null&&(pt[0]=bt[0]),u=1):u=0):u=0}else{if(10>_){K=7;break}R=wt,u==null||10>_||!oc(u,f+3,_-3)?u=0:(lt=u[f+0]|u[f+1]<<8|u[f+2]<<16,pt=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&lt||3<(lt>>1&7)||!(lt>>4&1)||lt>>5>=st.Ja||!pt||!u?u=0:(N&&(N[0]=pt),R&&(R[0]=u),u=1))}if(!u||(N=N[0],wt=wt[0],ht&&(D[0]!=N||Z[0]!=wt)))return 3;T!=null&&(T[0]=st,T.offset=f-T.w,t(4294967286>f-T.w),t(T.offset==T.ha-_));break}return K==0||K==7&&ht&&T==null?(L!=null&&(L[0]|=st.na!=null&&0<st.na.length),w!=null&&(w[0]=N),C!=null&&(C[0]=wt),0):K}function ml(u,f,_){var w=f.width,C=f.height,L=0,N=0,R=w,T=C;if(f.Da=u!=null&&0<u.Da,f.Da&&(R=u.cd,T=u.bd,L=u.v,N=u.j,11>_||(L&=-2,N&=-2),0>L||0>N||0>=R||0>=T||L+R>w||N+T>C))return 0;if(f.v=L,f.j=N,f.va=L+R,f.o=N+T,f.U=R,f.T=T,f.da=u!=null&&0<u.da,f.da){if(!oe(R,T,_=[u.ib],L=[u.hb]))return 0;f.ib=_[0],f.hb=L[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*w/4&&f.hb<3*C/4,f.Kb=0),1}function _l(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function Xa(u,f,_,w){if(w==null||0>=u||0>=f)return 2;if(_!=null){if(_.Da){var C=_.cd,L=_.bd,N=-2&_.v,R=-2&_.j;if(0>N||0>R||0>=C||0>=L||N+C>u||R+L>f)return 2;u=C,f=L}if(_.da){if(!oe(u,f,C=[_.ib],L=[_.hb]))return 2;u=C[0],f=L[0]}}w.width=u,w.height=f;t:{var T=w.width,D=w.height;if(u=w.S,0>=T||0>=D||!(u>=Ec&&13>u))u=2;else{if(0>=w.Rd&&w.sd==null){N=L=C=f=0;var Z=(R=T*i5[u])*D;if(11>u||(L=(D+1)/2*(f=(T+1)/2),u==12&&(N=(C=T)*D)),(D=r(Z+2*L+N))==null){u=1;break t}w.sd=D,11>u?((T=w.f.RGBA).eb=D,T.fb=0,T.A=R,T.size=Z):((T=w.f.kb).y=D,T.O=0,T.fa=R,T.Fd=Z,T.f=D,T.N=0+Z,T.Ab=f,T.Cd=L,T.ea=D,T.W=0+Z+L,T.Db=f,T.Ed=L,u==12&&(T.F=D,T.J=0+Z+2*L),T.Tc=N,T.lb=C)}if(f=1,C=w.S,L=w.width,N=w.height,C>=Ec&&13>C)if(11>C)u=w.f.RGBA,f&=(R=Math.abs(u.A))*(N-1)+L<=u.size,f&=R>=L*i5[C],f&=u.eb!=null;else{u=w.f.kb,R=(L+1)/2,Z=(N+1)/2,T=Math.abs(u.fa),D=Math.abs(u.Ab);var ht=Math.abs(u.Db),lt=Math.abs(u.lb),st=lt*(N-1)+L;f&=T*(N-1)+L<=u.Fd,f&=D*(Z-1)+R<=u.Cd,f=(f&=ht*(Z-1)+R<=u.Ed)&T>=L&D>=R&ht>=R,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,C==12&&(f&=lt>=L,f&=st<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||_!=null&&_.fd&&(u=_l(w)),u}var wn=64,Ha=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Za=24,Ka=32,yl=8,bn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pt("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(u){return u},F.Predictor2=function(u,f,_){return f[_+0]},F.Predictor3=function(u,f,_){return f[_+1]},F.Predictor4=function(u,f,_){return f[_-1]},F.Predictor5=function(u,f,_){return Lt(Lt(u,f[_+1]),f[_+0])},F.Predictor6=function(u,f,_){return Lt(u,f[_-1])},F.Predictor7=function(u,f,_){return Lt(u,f[_+0])},F.Predictor8=function(u,f,_){return Lt(f[_-1],f[_+0])},F.Predictor9=function(u,f,_){return Lt(f[_+0],f[_+1])},F.Predictor10=function(u,f,_){return Lt(Lt(u,f[_-1]),Lt(f[_+0],f[_+1]))},F.Predictor11=function(u,f,_){var w=f[_+0];return 0>=ae(w>>24&255,u>>24&255,(f=f[_-1])>>24&255)+ae(w>>16&255,u>>16&255,f>>16&255)+ae(w>>8&255,u>>8&255,f>>8&255)+ae(255&w,255&u,255&f)?w:u},F.Predictor12=function(u,f,_){var w=f[_+0];return(qt((u>>24&255)+(w>>24&255)-((f=f[_-1])>>24&255))<<24|qt((u>>16&255)+(w>>16&255)-(f>>16&255))<<16|qt((u>>8&255)+(w>>8&255)-(f>>8&255))<<8|qt((255&u)+(255&w)-(255&f)))>>>0},F.Predictor13=function(u,f,_){var w=f[_-1];return(Zt((u=Lt(u,f[_+0]))>>24&255,w>>24&255)<<24|Zt(u>>16&255,w>>16&255)<<16|Zt(u>>8&255,w>>8&255)<<8|Zt(u>>0&255,w>>0&255))>>>0};var j0=F.PredictorAdd0;F.PredictorAdd1=le,Pt("Predictor2","PredictorAdd2"),Pt("Predictor3","PredictorAdd3"),Pt("Predictor4","PredictorAdd4"),Pt("Predictor5","PredictorAdd5"),Pt("Predictor6","PredictorAdd6"),Pt("Predictor7","PredictorAdd7"),Pt("Predictor8","PredictorAdd8"),Pt("Predictor9","PredictorAdd9"),Pt("Predictor10","PredictorAdd10"),Pt("Predictor11","PredictorAdd11"),Pt("Predictor12","PredictorAdd12"),Pt("Predictor13","PredictorAdd13");var vl=F.PredictorAdd2;Jt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Jt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Sc,us=F.ColorIndexInverseTransform,wl=F.MapARGB,B0=F.VP8LColorIndexInverseTransformAlpha,G0=F.MapAlpha,jr=F.VP8LPredictorsAdd=[];jr.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var qn,cs,Br,Fs,ir,Ja,ds,Qa,bl,Gr,fs,nr,Po,$a,Ro,qr,xl,Un,sr,ei,ii,xi,Ri,rr,Ur,th,Mc,jm,Bm=r(511),Gm=r(2041),qm=r(225),Um=r(767),zm=0,q0=Gm,Cc=qm,Pn=Um,zn=Bm,Ec=0,Ac=1,Wm=2,Lc=3,Nc=4,U0=5,Ym=6,z0=7,W0=8,Pc=9,Y0=10,XE=[2,3,7],HE=[3,3,11],Vm=[280,256,256,256,40],ZE=[0,1,1,1,0],KE=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],JE=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],QE=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$E=8,V0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],X0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Sl=null,tA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],eA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zr=[],ps=[],or=[],oA=1,Hm=2,Wr=[],Wn=[];gt("UpsampleRgbLinePair",Ie,3),gt("UpsampleBgrLinePair",ui,3),gt("UpsampleRgbaLinePair",ls,4),gt("UpsampleBgraLinePair",ji,4),gt("UpsampleArgbLinePair",nn,4),gt("UpsampleRgba4444LinePair",Ei,2),gt("UpsampleRgb565LinePair",bi,2);var aA=F.UpsampleRgbLinePair,hA=F.UpsampleBgrLinePair,Zm=F.UpsampleRgbaLinePair,Km=F.UpsampleBgraLinePair,Jm=F.UpsampleArgbLinePair,Qm=F.UpsampleRgba4444LinePair,lA=F.UpsampleRgb565LinePair,Rc=16,Ic=1<<Rc-1,Ml=-227,H0=482,$m=6,uA=(256<<$m)-1,t5=0,cA=r(256),dA=r(256),fA=r(256),pA=r(256),gA=r(H0-Ml),mA=r(H0-Ml);er("YuvToRgbRow",Ie,3),er("YuvToBgrRow",ui,3),er("YuvToRgbaRow",ls,4),er("YuvToBgraRow",ji,4),er("YuvToArgbRow",nn,4),er("YuvToRgba4444Row",Ei,2),er("YuvToRgb565Row",bi,2);var e5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tc=[0,2,8],_A=[8,7,6,4,4,2,2,2,1,1,1,1],yA=1;this.WebPDecodeRGBA=function(u,f,_,w,C){var L=Ac,N=new Wa,R=new Wi;N.ba=R,R.S=L,R.width=[R.width],R.height=[R.height];var T=R.width,D=R.height,Z=new jn;if(Z==null||u==null)var ht=2;else t(Z!=null),ht=Va(u,f,_,Z.width,Z.height,Z.Pd,Z.Qd,Z.format,null);if(ht!=0?T=0:(T!=null&&(T[0]=Z.width[0]),D!=null&&(D[0]=Z.height[0]),T=1),T){R.width=R.width[0],R.height=R.height[0],w!=null&&(w[0]=R.width),C!=null&&(C[0]=R.height);t:{if(w=new Da,(C=new ul).data=u,C.w=f,C.ha=_,C.kd=1,f=[0],t(C!=null),((u=Va(C.data,C.w,C.ha,null,null,null,f,null,C))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(N!=null),w.data=C.data,w.w=C.w+C.offset,w.ha=C.ha-C.offset,w.put=ri,w.ac=Je,w.bc=hn,w.ma=N,C.xa){if((u=Bn())==null){N=1;break t}if(function(lt,st){var wt=[0],pt=[0],K=[0];e:for(;;){if(lt==null)return 0;if(st==null)return lt.a=2,0;if(lt.l=st,lt.a=0,J(lt.m,st.data,st.w,st.ha),!Ht(lt.m,wt,pt,K)){lt.a=3;break e}if(lt.xb=Hm,st.width=wt[0],st.height=pt[0],!Ts(wt[0],pt[0],1,lt,null))break e;return 1}return t(lt.a!=0),0}(u,w)){if(w=(f=Xa(w.width,w.height,N.Oa,N.ba))==0){e:{w=u;i:for(;;){if(w==null){w=0;break e}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((_=w.l)!=null),t((C=_.ma)!=null),w.xb!=0){if(w.ca=C.ba,w.tb=C.tb,t(w.ca!=null),!ml(C.Oa,_,Lc)){w.a=2;break i}if(!Co(w,_.width)||_.da)break i;if((_.da||Re(w.ca.S))&&rt(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&rt()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!Xt(w.s.vb,w.s.Wa.Xa)){w.a=1;break i}w.xb=0}if(!os(w,w.V,w.Ba,w.c,w.i,_.o,Ra))break i;C.Dc=w.Ma,w=1;break e}t(w.a!=0),w=0}w=!w}w&&(f=u.a)}else f=u.a}else{if((u=new v0)==null){N=1;break t}if(u.Fa=C.na,u.P=C.P,u.qc=C.Sa,ac(u,w)){if((f=Xa(w.width,w.height,N.Oa,N.ba))==0){if(u.Aa=0,_=N.Oa,t((C=u)!=null),_!=null){if(0<(T=0>(T=_.Md)?0:100<T?255:255*T/100)){for(D=Z=0;4>D;++D)12>(ht=C.pb[D]).lc&&(ht.ia=T*_A[0>ht.lc?0:ht.lc]>>3),Z|=ht.ia;Z&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=_.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}w0(u,w)||(f=u.a)}}else f=u.a}f==0&&N.Oa!=null&&N.Oa.fd&&(f=_l(N.ba))}N=f}L=N!=0?null:11>L?R.f.RGBA.eb:R.f.kb.y}else L=null;return L};var i5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(F,$){for(var V="",P=0;P<4;P++)V+=String.fromCharCode(F[$++]);return V}function c(F,$){return(F[$+0]<<0|F[$+1]<<8|F[$+2]<<16)>>>0}function d(F,$){return(F[$+0]<<0|F[$+1]<<8|F[$+2]<<16|F[$+3]<<24)>>>0}new h;var g=[0],p=[0],y=[],v=new h,x=i,b=function(F,$){var V={},P=0,I=!1,U=0,G=0;if(V.frames=[],!function(j,B,Y,it){for(var ot=0;ot<it;ot++)if(j[B+ot]!=Y.charCodeAt(ot))return!0;return!1}(F,$,"RIFF",4)){var nt,tt;for(d(F,$+=4),$+=8;$<F.length;){var Q=l(F,$),J=d(F,$+=4);$+=4;var dt=J+(1&J);switch(Q){case"VP8 ":case"VP8L":V.frames[P]===void 0&&(V.frames[P]={}),(M=V.frames[P]).src_off=I?G:$-8,M.src_size=U+J+8,P++,I&&(I=!1,U=0,G=0);break;case"VP8X":(M=V.header={}).feature_flags=F[$];var ct=$+4;M.canvas_width=1+c(F,ct),ct+=3,M.canvas_height=1+c(F,ct),ct+=3;break;case"ALPH":I=!0,U=dt+8,G=$-8;break;case"ANIM":(M=V.header).bgcolor=d(F,$),ct=$+4,M.loop_count=(nt=F)[(tt=ct)+0]<<0|nt[tt+1]<<8,ct+=2;break;case"ANMF":var Et,M;(M=V.frames[P]={}).offset_x=2*c(F,$),$+=3,M.offset_y=2*c(F,$),$+=3,M.width=1+c(F,$),$+=3,M.height=1+c(F,$),$+=3,M.duration=c(F,$),$+=3,Et=F[$++],M.dispose=1&Et,M.blend=Et>>1&1}Q!="ANMF"&&($+=dt)}return V}}(x,0);b.response=x,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,A=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,g=[S.canvas_height],p=[S.canvas_width];for(var O=0;O<A.length&&A[O].blend!=0;O++);}var k=A[0],H=v.WebPDecodeRGBA(x,k.src_off,k.src_size,p,g);k.rgba=H,k.imgwidth=p[0],k.imgheight=g[0];for(var W=0;W<p[0]*g[0]*4;W++)y[W]=H[W];return this.width=p,this.height=g,this.data=y,this}(function(i){var t=function(){return typeof qf=="function"},e=function(g,p,y,v){var x=4,b=o;switch(v){case i.image_compression.FAST:x=1,b=r;break;case i.image_compression.MEDIUM:x=6,b=a;break;case i.image_compression.SLOW:x=9,b=h}g=n(g,p,y,b);var S=qf(g,{level:x});return i.__addimage__.arrayBufferToBinaryString(S)},n=function(g,p,y,v){for(var x,b,S,A=g.length/p,O=new Uint8Array(g.length+A),k=c(),H=0;H<A;H+=1){if(S=H*p,x=g.subarray(S,S+p),v)O.set(v(x,y,b),S+H);else{for(var W,F=k.length,$=[];W<F;W+=1)$[W]=k[W](x,y,b);var V=d($.concat());O.set($[V],S+H)}b=x}return O},s=function(g){var p=Array.apply([],g);return p.unshift(0),p},r=function(g,p){var y,v=[],x=g.length;v[0]=1;for(var b=0;b<x;b+=1)y=g[b-p]||0,v[b+1]=g[b]-y+256&255;return v},o=function(g,p,y){var v,x=[],b=g.length;x[0]=2;for(var S=0;S<b;S+=1)v=y&&y[S]||0,x[S+1]=g[S]-v+256&255;return x},a=function(g,p,y){var v,x,b=[],S=g.length;b[0]=3;for(var A=0;A<S;A+=1)v=g[A-p]||0,x=y&&y[A]||0,b[A+1]=g[A]+256-(v+x>>>1)&255;return b},h=function(g,p,y){var v,x,b,S,A=[],O=g.length;A[0]=4;for(var k=0;k<O;k+=1)v=g[k-p]||0,x=y&&y[k]||0,b=y&&y[k-p]||0,S=l(v,x,b),A[k+1]=g[k]-S+256&255;return A},l=function(g,p,y){if(g===p&&p===y)return g;var v=Math.abs(p-y),x=Math.abs(g-y),b=Math.abs(g+p-y-y);return v<=x&&v<=b?g:x<=b?p:y},c=function(){return[s,r,o,a,h]},d=function(g){var p=g.map(function(y){return y.reduce(function(v,x){return v+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};i.processPNG=function(g,p,y,v){var x,b,S,A,O,k,H,W,F,$,V,P,I,U,G,nt=this.decode.FLATE_DECODE,tt="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(S=new JM(g)).imgData,b=S.bits,x=S.colorSpace,O=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){F=(W=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,V=new Uint8Array(F*S.colors),$=new Uint8Array(F);var Q,J=S.pixelBitlength-S.bits;for(U=0,G=0;U<F;U++){for(I=W[U],Q=0;Q<J;)V[G++]=I>>>Q&255,Q+=S.bits;$[U]=I>>>Q&255}}if(S.bits===16){F=(W=new Uint32Array(S.decodePixels().buffer)).length,V=new Uint8Array(F*(32/S.pixelBitlength)*S.colors),$=new Uint8Array(F*(32/S.pixelBitlength)),P=S.colors>1,U=0,G=0;for(var dt=0;U<F;)I=W[U++],V[G++]=I>>>0&255,P&&(V[G++]=I>>>16&255,I=W[U++],V[G++]=I>>>0&255),$[dt++]=I>>>16&255;b=8}v!==i.image_compression.NONE&&t()?(g=e(V,S.width*S.colors,S.colors,v),H=e($,S.width,1,v)):(g=V,H=$,nt=void 0)}if(S.colorType===3&&(x=this.color_spaces.INDEXED,k=S.palette,S.transparency.indexed)){var ct=S.transparency.indexed,Et=0;for(U=0,F=ct.length;U<F;++U)Et+=ct[U];if((Et/=255)===F-1&&ct.indexOf(0)!==-1)A=[ct.indexOf(0)];else if(Et!==F){for(W=S.decodePixels(),$=new Uint8Array(W.length),U=0,F=W.length;U<F;U++)$[U]=ct[W[U]];H=e($,S.width,1)}}var M=function(j){var B;switch(j){case i.image_compression.FAST:B=11;break;case i.image_compression.MEDIUM:B=13;break;case i.image_compression.SLOW:B=14;break;default:B=12}return B}(v);return nt===this.decode.FLATE_DECODE&&(tt="/Predictor "+M+" "),tt+="/Colors "+O+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:y,data:g,index:p,filter:nt,decodeParameters:tt,transparency:A,palette:k,sMask:H,predictor:M,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:x}}}})(re.API),function(i){i.processGIF89A=function(t,e,n,s){var r=new QM(t),o=r.width,a=r.height,h=[];r.decodeAndBlitFrameRGBA(0,h);var l={data:h,width:o,height:a},c=new $f(100).encode(l,100);return i.processJPEG.call(this,c,e,n,s)},i.processGIF87A=i.processGIF89A}(re.API),es.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var t=0;t<i;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:e,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},es.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[i]()}catch(e){Ke.log("bit decode error:"+e)}},es.prototype.bit1=function(){var i,t=Math.ceil(this.width/8),e=t%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,s=0;s<t;s++)for(var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var h=this.palette[r>>7-a&1];this.data[o+4*a]=h.blue,this.data[o+4*a+1]=h.green,this.data[o+4*a+2]=h.red,this.data[o+4*a+3]=255}e!==0&&(this.pos+=4-e)}},es.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),t=i%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<i;s++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,a=r>>4,h=15&r,l=this.palette[a];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*s+1>=this.width)break;l=this.palette[h],this.data[o+4]=l.blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},es.prototype.bit8=function(){for(var i=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}i!==0&&(this.pos+=4-i)}},es.prototype.bit15=function(){for(var i=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&t)/t*255|0,a=(r>>5&t)/t*255|0,h=(r>>10&t)/t*255|0,l=r>>15?255:0,c=n*this.width*4+4*s;this.data[c]=h,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=l}this.pos+=i}},es.prototype.bit16=function(){for(var i=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,h=(o>>5&e)/e*255|0,l=(o>>11)/t*255|0,c=s*this.width*4+4*r;this.data[c]=l,this.data[c+1]=h,this.data[c+2]=a,this.data[c+3]=255}this.pos+=i}},es.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var t=this.bottom_up?i:this.height-1-i,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=r,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},es.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var t=this.bottom_up?i:this.height-1-i,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=o}},es.prototype.getData=function(){return this.data},function(i){i.processBMP=function(t,e,n,s){var r=new es(t,!1),o=r.width,a=r.height,h={data:r.getData(),width:o,height:a},l=new $f(100).encode(h,100);return i.processJPEG.call(this,l,e,n,s)}}(re.API),Y2.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(t,e,n,s){var r=new Y2(t),o=r.width,a=r.height,h={data:r.getData(),width:o,height:a},l=new $f(100).encode(h,100);return i.processJPEG.call(this,l,e,n,s)}}(re.API),re.API.processRGBA=function(i,t,e){for(var n=i.data,s=n.length,r=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,h=0,l=0;l<s;l+=4){var c=n[l],d=n[l+1],g=n[l+2],p=n[l+3];r[a++]=c,r[a++]=d,r[a++]=g,o[h++]=p}var y=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},re.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ma=re.API,Wu=Ma.getCharWidthsArray=function(i,t){var e,n,s=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:s.metadata.Unicode.widths,h=a.fof?a.fof:1,l=t.kerning?t.kerning:s.metadata.Unicode.kerning,c=l.fof?l.fof:1,d=t.doKerning!==!1,g=0,p=i.length,y=0,v=a[0]||h,x=[];for(e=0;e<p;e++)n=i.charCodeAt(e),typeof s.metadata.widthOfString=="function"?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/r)||0)/1e3):(g=d&&je(l[n])==="object"&&!isNaN(parseInt(l[n][y],10))?l[n][y]/c:0,x.push((a[n]||v)/h+g)),y=n;return x},q2=Ma.getStringUnitWidth=function(i,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Ma.processArabic&&(i=Ma.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,e,s)/e:Wu.apply(this,arguments).reduce(function(r,o){return r+o},0)},U2=function(i,t,e,n){for(var s=[],r=0,o=i.length,a=0;r!==o&&a+t[r]<e;)a+=t[r],r++;s.push(i.slice(0,r));var h=r;for(a=0;r!==o;)a+t[r]>n&&(s.push(i.slice(h,r)),a=0,h=r),a+=t[r],r++;return h!==r&&s.push(i.slice(h,r)),s},z2=function(i,t,e){e||(e={});var n,s,r,o,a,h,l,c=[],d=[c],g=e.textIndent||0,p=0,y=0,v=i.split(" "),x=Wu.apply(this,[" ",e])[0];if(h=e.lineIndent===-1?v[0].length+2:e.lineIndent||0){var b=Array(h).join(" "),S=[];v.map(function(O){(O=O.split(/\s*\n/)).length>1?S=S.concat(O.map(function(k,H){return(H&&k.length?`
`:"")+k})):S.push(O[0])}),v=S,h=q2.apply(this,[b,e])}for(r=0,o=v.length;r<o;r++){var A=0;if(n=v[r],h&&n[0]==`
`&&(n=n.substr(1),A=1),g+p+(y=(s=Wu.apply(this,[n,e])).reduce(function(O,k){return O+k},0))>t||A){if(y>t){for(a=U2.apply(this,[n,s,t-(g+p),t]),c.push(a.shift()),c=[a.pop()];a.length;)d.push([a.shift()]);y=s.slice(n.length-(c[0]?c[0].length:0)).reduce(function(O,k){return O+k},0)}else c=[n];d.push(c),g=y+h,p=x}else c.push(n),g+=p+y,p=x}return l=h?function(O,k){return(k?b:"")+O.join(" ")}:function(O){return O.join(" ")},d.map(l)},Ma.splitTextToSize=function(i,t,e){var n,s=(e=e||{}).fontSize||this.internal.getFontSize(),r=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var d=this.internal.getFont(c.fontName,c.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;r.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=e.lineIndent;var a,h,l=[];for(a=0,h=n.length;a<h;a++)l=l.concat(z2.apply(this,[n[a],o,r]));return l},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},n={},s=0;s<t.length;s++)e[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var r=function(d){return"0x"+parseInt(d,10).toString(16)},o=i.__fontmetrics__.compress=function(d){var g,p,y,v,x=["{"];for(var b in d){if(g=d[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=r(b).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof g=="number")g<0?(y=r(g).slice(3),v="-"):(y=r(g).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(je(g)!=="object")throw new Error("Don't know what to do with value type "+je(g)+".");y=o(g)}x.push(p+y)}return x.push("}"),x.join("")},a=i.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,y,v,x={},b=1,S=x,A=[],O="",k="",H=d.length-1,W=1;W<H;W+=1)(v=d[W])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(v):v=="{"?(A.push([S,y]),S={},y=void 0):v=="}"?((p=A.pop())[0][p[1]]=S,y=void 0,S=p[0]):v=="-"?b=-1:y===void 0?e.hasOwnProperty(v)?(O+=e[v],y=parseInt(O,16)*b,b=1,O=""):O+=v:e.hasOwnProperty(v)?(k+=e[v],S[y]=parseInt(k,16)*b,b=1,y=void 0,k=""):k+=v;return x},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(d){var g=d.font,p=c.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var y=l.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])}(re.API),function(i){var t=function(e){for(var n=e.length,s=new Uint8Array(n),r=0;r<n;r++)s[r]=e.charCodeAt(r);return s};i.API.events.push(["addFont",function(e){var n=void 0,s=e.font,r=e.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Qh(a)),o.metadata=i.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(re),function(i){function t(){return(se.canvg?Promise.resolve(se.canvg):If(()=>import("./index.es-1633685e.js").then(async e=>(await e.__tla,e)),[])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}re.API.addSvgAsImage=function(e,n,s,r,o,a,h,l){if(isNaN(n)||isNaN(s))throw Ke.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Ke.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=o;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(y){return y.fromString(d,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(g)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),n,s,r,o,h,l)})}}(),re.API.putTotalPages=function(i){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(i,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,e);return this},re.API.viewerPreferences=function(i,t){var e;i=i||{},t=t||!1;var n,s,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),h=[],l=0,c=0,d=0;function g(y,v){var x,b=!1;for(x=0;x<y.length;x+=1)y[x]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,i==="reset"||t===!0){var p=a.length;for(d=0;d<p;d+=1)e[a[d]].value=e[a[d]].defaultValue,e[a[d]].explicitSet=!1}if(je(i)==="object"){for(s in i)if(r=i[s],g(a,s)&&r!==void 0){if(e[s].type==="boolean"&&typeof r=="boolean")e[s].value=r;else if(e[s].type==="name"&&g(e[s].valueSet,r))e[s].value=r;else if(e[s].type==="integer"&&Number.isInteger(r))e[s].value=r;else if(e[s].type==="array"){for(l=0;l<r.length;l+=1)if(n=!0,r[l].length===1&&typeof r[l][0]=="number")h.push(String(r[l]-1));else if(r[l].length>1){for(c=0;c<r[l].length;c+=1)typeof r[l][c]!="number"&&(n=!1);n===!0&&h.push([r[l][0]-1,r[l][1]-1].join(" "))}e[s].value="["+h.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?v.push("/"+y+" /"+e[y].value):v.push("/"+y+" "+e[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(i){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),l=r.length+o.length+a.length+s.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(s+r+o+a+h),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(re.API),function(i){var t=i.API,e=t.pdfEscape16=function(r,o){for(var a,h=o.metadata.Unicode.widths,l=["","0","00","000","0000"],c=[""],d=0,g=r.length;d<g;++d){if(a=o.metadata.characterToGlyph(r.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=r.charCodeAt(d),h.indexOf(a)==-1&&(h.push(a),h.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(l[4-a.length],a)}return c.join("")},n=function(r){var o,a,h,l,c,d,g;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],d=0,g=(a=Object.keys(r).sort(function(p,y){return p-y})).length;d<g;d++)o=a[d],h.length>=100&&(c+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),r[o]!==void 0&&r[o]!==null&&typeof r[o].toString=="function"&&(l=("0000"+r[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),h.push("<"+o+"><"+l+">"));return h.length&&(c+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(r){(function(o){var a=o.font,h=o.out,l=o.newObject,c=o.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",y=0;y<g.length;y++)p+=String.fromCharCode(g[y]);var v=l();c({data:p,addLength1:!0,objectId:v}),h("endobj");var x=l();c({data:n(a.metadata.toUnicode),addLength1:!0,objectId:x}),h("endobj");var b=l();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+_a(a.fontName)),h("/FontFile2 "+v+" 0 R"),h("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),h("/Flags "+a.metadata.flags),h("/StemV "+a.metadata.stemV),h("/ItalicAngle "+a.metadata.italicAngle),h("/Ascent "+a.metadata.ascender),h("/Descent "+a.metadata.decender),h("/CapHeight "+a.metadata.capHeight),h(">>"),h("endobj");var S=l();h("<<"),h("/Type /Font"),h("/BaseFont /"+_a(a.fontName)),h("/FontDescriptor "+b+" 0 R"),h("/W "+i.API.PDFObject.convert(d)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+a.encoding+")"),h(">>"),h(">>"),h("endobj"),a.objectNumber=l(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+x+" 0 R"),h("/BaseFont /"+_a(a.fontName)),h("/Encoding /"+a.encoding),h("/DescendantFonts ["+S+" 0 R]"),h(">>"),h("endobj"),a.isAlreadyPutted=!0}})(r)}]),t.events.push(["putFont",function(r){(function(o){var a=o.font,h=o.out,l=o.newObject,c=o.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var y=l();c({data:g,addLength1:!0,objectId:y}),h("endobj");var v=l();c({data:n(a.metadata.toUnicode),addLength1:!0,objectId:v}),h("endobj");var x=l();h("<<"),h("/Descent "+a.metadata.decender),h("/CapHeight "+a.metadata.capHeight),h("/StemV "+a.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+y+" 0 R"),h("/Flags 96"),h("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),h("/FontName /"+_a(a.fontName)),h("/ItalicAngle "+a.metadata.italicAngle),h("/Ascent "+a.metadata.ascender),h(">>"),h("endobj"),a.objectNumber=l();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+_a(a.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),h("endobj"),a.isAlreadyPutted=!0}})(r)}]);var s=function(r){var o,a=r.text||"",h=r.x,l=r.y,c=r.options||{},d=r.mutex||{},g=d.pdfEscape,p=d.activeFontKey,y=d.fonts,v=p,x="",b=0,S="",A=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:a,x:h,y:l,options:c,mutex:d};for(S=a,v=p,Array.isArray(a)&&(S=a[0]),b=0;b<S.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),o||S[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?x+=S[b]:x+="";var O="";return parseInt(v.slice(1))<14||A==="WinAnsiEncoding"?O=g(x,v).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(O=e(x,y[v])),d.isHex=!0,{text:O,x:h,y:l,options:c,mutex:d}};t.events.push(["postProcessText",function(r){var o=r.text||"",a=[],h={text:o,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(o)){var l=0;for(l=0;l<o.length;l+=1)Array.isArray(o[l])&&o[l].length===3?a.push([s(Object.assign({},h,{text:o[l][0]})).text,o[l][1],o[l][2]]):a.push(s(Object.assign({},h,{text:o[l]})).text);r.text=a}else r.text=s(Object.assign({},h,{text:o})).text}])}(re),function(i){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},i.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},i.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(re.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var s,r,o,a,h,l,c,d=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,A=0;this.__bidiEngine__={};var O=function(P){var I=P.charCodeAt(),U=I>>8,G=v[U];return G!==void 0?d[256*G+(255&I)]:U===252||U===253?"AL":b.test(U)?"L":U===8?"R":"N"},k=function(P){for(var I,U=0;U<P.length;U++){if((I=O(P.charAt(U)))==="L")return!1;if(I==="R")return!0}return!1},H=function(P,I,U,G){var nt,tt,Q,J,dt=I[G];switch(dt){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(dt="AN");break;case"AL":S=!0,dt="R";break;case"WS":dt="N";break;case"CS":G<1||G+1>=I.length||(nt=U[G-1])!=="EN"&&nt!=="AN"||(tt=I[G+1])!=="EN"&&tt!=="AN"?dt="N":S&&(tt="AN"),dt=tt===nt?tt:"N";break;case"ES":dt=(nt=G>0?U[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&U[G-1]==="EN"){dt="EN";break}if(S){dt="N";break}for(Q=G+1,J=I.length;Q<J&&I[Q]==="ET";)Q++;dt=Q<J&&I[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=I.length,Q=G+1;Q<J&&I[Q]==="NSM";)Q++;if(Q<J){var ct=P[G],Et=ct>=1425&&ct<=2303||ct===64286;if(nt=I[Q],Et&&(nt==="R"||nt==="AL")){dt="R";break}}}dt=G<1||(nt=I[G-1])==="B"?"N":U[G-1];break;case"B":S=!1,s=!0,dt=A;break;case"S":r=!0,dt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":dt="N"}return dt},W=function(P,I,U){var G=P.split("");return U&&F(G,U,{hiLevel:A}),G.reverse(),I&&I.reverse(),G.join("")},F=function(P,I,U){var G,nt,tt,Q,J,dt=-1,ct=P.length,Et=0,M=[],j=A?p:g,B=[];for(S=!1,s=!1,r=!1,nt=0;nt<ct;nt++)B[nt]=O(P[nt]);for(tt=0;tt<ct;tt++){if(J=Et,M[tt]=H(P,B,M,tt),G=240&(Et=j[J][y[M[tt]]]),Et&=15,I[tt]=Q=j[Et][5],G>0)if(G===16){for(nt=dt;nt<tt;nt++)I[nt]=1;dt=-1}else dt=-1;if(j[Et][6])dt===-1&&(dt=tt);else if(dt>-1){for(nt=dt;nt<tt;nt++)I[nt]=Q;dt=-1}B[tt]==="B"&&(I[tt]=0),U.hiLevel|=Q}r&&function(Y,it,ot){for(var at=0;at<ot;at++)if(Y[at]==="S"){it[at]=A;for(var ut=at-1;ut>=0&&Y[ut]==="WS";ut--)it[ut]=A}}(B,I,ct)},$=function(P,I,U,G,nt){if(!(nt.hiLevel<P)){if(P===1&&A===1&&!s)return I.reverse(),void(U&&U.reverse());for(var tt,Q,J,dt,ct=I.length,Et=0;Et<ct;){if(G[Et]>=P){for(J=Et+1;J<ct&&G[J]>=P;)J++;for(dt=Et,Q=J-1;dt<Q;dt++,Q--)tt=I[dt],I[dt]=I[Q],I[Q]=tt,U&&(tt=U[dt],U[dt]=U[Q],U[Q]=tt);Et=J}Et++}}},V=function(P,I,U){var G=P.split(""),nt={hiLevel:A};return U||(U=[]),F(G,U,nt),function(tt,Q,J){if(J.hiLevel!==0&&c)for(var dt,ct=0;ct<tt.length;ct++)Q[ct]===1&&(dt=x.indexOf(tt[ct]))>=0&&(tt[ct]=x[dt+1])}(G,U,nt),$(2,G,I,U,nt),$(1,G,I,U,nt),G.join("")};return this.__bidiEngine__.doBidiReorder=function(P,I,U){if(function(nt,tt){if(tt)for(var Q=0;Q<nt.length;Q++)tt[Q]=Q;a===void 0&&(a=k(nt)),l===void 0&&(l=k(nt))}(P,I),o||!h||l)if(o&&h&&a^l)A=a?1:0,P=W(P,I,U);else if(!o&&h&&l)A=a?1:0,P=V(P,I,U),P=W(P,I);else if(!o||a||h||l){if(o&&!h&&a^l)P=W(P,I),a?(A=0,P=V(P,I,U)):(A=1,P=V(P,I,U),P=W(P,I));else if(o&&a&&!h&&l)A=1,P=V(P,I,U),P=W(P,I);else if(!o&&!h&&a^l){var G=c;a?(A=1,P=V(P,I,U),A=0,c=!1,P=V(P,I,U),c=G):(A=0,P=V(P,I,U),P=W(P,I),A=1,c=!1,P=V(P,I,U),c=G,P=W(P,I))}}else A=0,P=V(P,I,U);else A=a?1:0,P=V(P,I,U);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,h=P.isOutputVisual,a=P.isInputRtl,l=P.isOutputRtl,c=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var s=n.text,r=(n.x,n.y,n.options||{}),o=(n.mutex,r.lang,[]);if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,e.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([e.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([e.doBidiReorder(s[a])]);n.text=o}else n.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])}(re),re.API.TTFFont=function(){function i(t){var e;if(this.rawData=t,e=this.contents=new Ir(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new f6(this),this.registerTTF()}return i.open=function(t){return new i(t)},i.prototype.parse=function(){return this.directory=new $M(this.contents),this.head=new e6(this),this.name=new o6(this),this.cmap=new X2(this),this.toUnicode={},this.hhea=new i6(this),this.maxp=new a6(this),this.hmtx=new h6(this),this.post=new s6(this),this.os2=new n6(this),this.loca=new d6(this),this.glyf=new l6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var t,e,n,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,h,l;for(l=[],o=0,a=(h=this.bbox).length;o<a;o++)t=h[o],l.push(Math.round(t*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(e=s>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},i.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},i.prototype.widthOfString=function(t,e,n){var s,r,o,a;for(o=0,r=0,a=(t=""+t).length;0<=a?r<a:r>a;r=0<=a?++r:--r)s=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/e)||0;return o*(e/1e3)},i.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},i}();var is,Ir=function(){function i(t){this.data=t??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(t){return this.data[this.pos++]=t},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},i.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},i.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},i.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(t){var e,n,s;for(s=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(t){return this.writeInt16(t)},i.prototype.readLongLong=function(){var t,e,n,s,r,o,a,h;return t=this.readByte(),e=this.readByte(),n=this.readByte(),s=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^h)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*s+16777216*r+65536*o+256*a+h},i.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(t){return this.writeInt32(t)},i.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},i.prototype.write=function(t){var e,n,s,r;for(r=[],n=0,s=t.length;n<s;n++)e=t[n],r.push(this.writeByte(e));return r},i}(),$M=function(){var i;function t(e){var n,s,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,s,r,o,a,h,l,c,d,g,p,y,v;for(v in p=Object.keys(e).length,h=Math.log(2),d=16*Math.floor(Math.log(p)/h),o=Math.floor(d/h),c=16*p-d,(s=new Ir).writeInt(this.scalarType),s.writeShort(p),s.writeShort(d),s.writeShort(o),s.writeShort(c),r=16*p,l=s.pos+r,a=null,y=[],e)for(g=e[v],s.writeString(v),s.writeInt(i(g)),s.writeInt(l),s.writeInt(g.length),y=y.concat(g),v==="head"&&(a=l),l+=g.length;l%4;)y.push(0),l++;return s.write(y),n=2981146554-i(s.data),s.pos=a+8,s.writeUInt32(n),s.data},i=function(e){var n,s,r,o;for(e=H2.call(e);e.length%4;)e.push(0);for(r=new Ir(e),s=0,n=0,o=e.length;n<o;n=n+=4)s+=r.readUInt32();return 4294967295&s},t}(),t6={}.hasOwnProperty,Ps=function(i,t){for(var e in t)t6.call(t,e)&&(i[e]=t[e]);function n(){this.constructor=i}return n.prototype=t.prototype,i.prototype=new n,i.__super__=t.prototype,i};is=function(){function i(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var e6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Ir).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),V2=function(){function i(t,e){var n,s,r,o,a,h,l,c,d,g,p,y,v,x,b,S,A;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(p=t.readUInt16(),g=p/2,t.pos+=6,r=function(){var O,k;for(k=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)k.push(t.readUInt16());return k}(),t.pos+=2,v=function(){var O,k;for(k=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)k.push(t.readUInt16());return k}(),l=function(){var O,k;for(k=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)k.push(t.readUInt16());return k}(),c=function(){var O,k;for(k=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)k.push(t.readUInt16());return k}(),s=(this.length-t.pos+this.offset)/2,a=function(){var O,k;for(k=[],h=O=0;0<=s?O<s:O>s;h=0<=s?++O:--O)k.push(t.readUInt16());return k}(),h=b=0,A=r.length;b<A;h=++b)for(x=r[h],n=S=y=v[h];y<=x?S<=x:S>=x;n=y<=x?++S:--S)c[h]===0?o=n+l[h]:(o=a[c[h]/2+(n-y)-(g-h)]||0)!==0&&(o+=l[h]),this.codeMap[n]=65535&o}t.pos=d}return i.encode=function(t,e){var n,s,r,o,a,h,l,c,d,g,p,y,v,x,b,S,A,O,k,H,W,F,$,V,P,I,U,G,nt,tt,Q,J,dt,ct,Et,M,j,B,Y,it,ot,at,ut,At,Mt,Tt;switch(G=new Ir,o=Object.keys(t).sort(function(It,Xt){return It-Xt}),e){case"macroman":for(v=0,x=function(){var It=[];for(y=0;y<256;++y)It.push(0);return It}(),S={0:0},r={},nt=0,dt=o.length;nt<dt;nt++)S[ut=t[s=o[nt]]]==null&&(S[ut]=++v),r[s]={old:t[s],new:S[t[s]]},x[s]=S[t[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(x),{charMap:r,subtable:G.data,maxGlyphID:v+1};case"unicode":for(I=[],d=[],A=0,S={},n={},b=l=null,tt=0,ct=o.length;tt<ct;tt++)S[k=t[s=o[tt]]]==null&&(S[k]=++A),n[s]={old:k,new:S[k]},a=S[k]-s,b!=null&&a===l||(b&&d.push(b),I.push(s),l=a),b=s;for(b&&d.push(b),d.push(65535),I.push(65535),V=2*($=I.length),F=2*Math.pow(Math.log($)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,W=2*$-F,h=[],H=[],p=[],y=Q=0,Et=I.length;Q<Et;y=++Q){if(P=I[y],c=d[y],P===65535){h.push(0),H.push(0);break}if(P-(U=n[P].new)>=32768)for(h.push(0),H.push(2*(p.length+$-y)),s=J=P;P<=c?J<=c:J>=c;s=P<=c?++J:--J)p.push(n[s].new);else h.push(U-P),H.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*$+2*p.length),G.writeUInt16(0),G.writeUInt16(V),G.writeUInt16(F),G.writeUInt16(g),G.writeUInt16(W),ot=0,M=d.length;ot<M;ot++)s=d[ot],G.writeUInt16(s);for(G.writeUInt16(0),at=0,j=I.length;at<j;at++)s=I[at],G.writeUInt16(s);for(At=0,B=h.length;At<B;At++)a=h[At],G.writeUInt16(a);for(Mt=0,Y=H.length;Mt<Y;Mt++)O=H[Mt],G.writeUInt16(O);for(Tt=0,it=p.length;Tt<it;Tt++)v=p[Tt],G.writeUInt16(v);return{charMap:n,subtable:G.data,maxGlyphID:A+1}}},i}(),X2=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,s,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n=new V2(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var s,r;return n==null&&(n="macroman"),s=V2.encode(e,n),(r=new Ir).writeUInt16(0),r.writeUInt16(1),s.table=r.data.concat(s.subtable),s},t}(),i6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),n6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(e.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(e.readInt());return s}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(e.readInt());return s}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),s6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="post",t.prototype.parse=function(e){var n,s,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)n=e.readByte(),r.push(this.names.push(e.readString(n)));return r;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 196608:break;case 262144:return this.map=(function(){var a,h,l;for(l=[],o=a=0,h=this.file.maxp.numGlyphs;0<=h?a<h:a>h;o=0<=h?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),r6=function(i,t){this.raw=i,this.length=i.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},o6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="name",t.prototype.parse=function(e){var n,s,r,o,a,h,l,c,d,g,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),h=e.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+h+e.readShort()});for(l={},o=d=0,g=s.length;d<g;o=++d)r=s[o],e.pos=r.offset,c=e.readString(r.length),a=new r6(c,r),l[p=r.nameID]==null&&(l[p]=[]),l[r.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),a6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),h6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,s,r,o,a,h,l;for(e.pos=this.offset,this.metrics=[],n=0,h=this.file.hhea.numberOfMetrics;0<=h?n<h:n>h;n=0<=h?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],n=c=0;0<=r?c<r:c>r;n=0<=r?++c:--c)d.push(e.readInt16());return d}(),this.widths=(function(){var c,d,g,p;for(p=[],c=0,d=(g=this.metrics).length;c<d;c++)o=g[c],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],l=[],n=a=0;0<=r?a<r:a>r;n=0<=r?++a:--a)l.push(this.widths.push(s));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),H2=[].slice,l6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,s,r,o,a,h,l,c,d,g;return e in this.cache?this.cache[e]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(e),(r=o.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+s,a=(h=new Ir(n.read(r))).readShort(),c=h.readShort(),g=h.readShort(),l=h.readShort(),d=h.readShort(),this.cache[e]=a===-1?new c6(h,c,g,l,d):new u6(h,a,c,g,l,d),this.cache[e]))},t.prototype.encode=function(e,n,s){var r,o,a,h,l;for(a=[],o=[],h=0,l=n.length;h<l;h++)r=e[n[h]],o.push(a.length),r&&(a=a.concat(r.encode(s)));return o.push(a.length),{table:a,offsets:o}},t}(),u6=function(){function i(t,e,n,s,r,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=s,this.xMax=r,this.yMax=o,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),c6=function(){function i(t,e,n,s,r){var o,a;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return i.prototype.encode=function(){var t,e,n;for(e=new Ir(H2.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},i}(),d6=function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return Ps(t,is),t.prototype.tag="loca",t.prototype.parse=function(e){var n,s;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var s=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<s.length;++a)if(s[a]=r,o<n.length&&n[o]==a){++o,s[a]=r;var h=this.offsets[a],l=this.offsets[a+1]-h;l>0&&(r+=l)}for(var c=new Array(4*s.length),d=0;d<s.length;++d)c[4*d+3]=255&s[d],c[4*d+2]=(65280&s[d])>>8,c[4*d+1]=(16711680&s[d])>>16,c[4*d]=(4278190080&s[d])>>24;return c},t}(),f6=function(){function i(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var t,e,n,s,r;for(e in s=this.font.cmap.tables[0].codeMap,t={},r=this.subset)n=r[e],t[e]=s[n];return t},i.prototype.glyphsFor=function(t){var e,n,s,r,o,a,h;for(s={},o=0,a=t.length;o<a;o++)s[r=t[o]]=this.font.glyf.glyphFor(r);for(r in e=[],s)(n=s[r])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(r in h=this.glyphsFor(e))n=h[r],s[r]=n;return s},i.prototype.encode=function(t,e){var n,s,r,o,a,h,l,c,d,g,p,y,v,x,b;for(s in n=X2.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},b=n.charMap)p[(h=b[s]).old]=h.new;for(y in g=n.maxGlyphID,o)y in p||(p[y]=g++);return c=function(S){var A,O;for(A in O={},S)O[S[A]]=A;return O}(p),d=Object.keys(c).sort(function(S,A){return S-A}),v=function(){var S,A,O;for(O=[],S=0,A=d.length;S<A;S++)a=d[S],O.push(c[a]);return O}(),r=this.font.glyf.encode(o,v,p),l=this.font.loca.encode(r.offsets,v),x={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},i}();re.API.PDFObject=function(){var i;function t(){}return i=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,s,r,o;if(Array.isArray(e))return"["+function(){var a,h,l;for(l=[],a=0,h=e.length;a<h;a++)n=e[a],l.push(t.convert(n));return l}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+i(e.getUTCFullYear(),4)+i(e.getUTCMonth(),2)+i(e.getUTCDate(),2)+i(e.getUTCHours(),2)+i(e.getUTCMinutes(),2)+i(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in r=["<<"],e)o=e[s],r.push("/"+s+" "+t.convert(o));return r.push(">>"),r.join(`
`)}return""+e},t}();class p6 extends Zo{constructor(){const t=document.createElement("div");t.classList.add("print-control-container");const e=document.createElement("div");t.classList.add("print-control");const n=document.createElement("button");n.classList.add("print-icon-pdf"),n.title="Zapisz map\u0119 jako PDF";const s=document.createElement("button");s.classList.add("print-icon-png"),s.title="Zapisz map\u0119 jako PNG",e.appendChild(n),e.appendChild(s),t.appendChild(e),super({element:t}),n.addEventListener("click",()=>{if(!this.getMap())return;let r=this.mapToPng(this.getMap());const o=new re,a=new Image;a.src=r,a.onload=function(){const h=Math.floor(o.internal.pageSize.getWidth()),l=Math.floor(a.height*h/a.width);o.addImage(a,"PNG",0,0,h,l),o.save("map.pdf")}}),s.addEventListener("click",()=>{if(!this.getMap())return;let r=this.mapToPng(this.getMap());const o=document.createElement("a");document.body.appendChild(o),o.download="map.png",o.href=r,o.target="_blank",o.click(),o.remove()})}mapToPng(t){const e=document.createElement("canvas"),n=t.getSize();e.width=n[0],e.height=n[1];const s=e.getContext("2d");return Array.prototype.forEach.call(t.getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer"),function(r){if(r.width>0){const o=r.parentNode.style.opacity||r.style.opacity;s.globalAlpha=o===""?1:Number(o);let a;const h=r.style.transform;h?a=h.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number):a=[parseFloat(r.style.width)/r.width,0,0,parseFloat(r.style.height)/r.height,0,0],CanvasRenderingContext2D.prototype.setTransform.apply(s,a);const l=r.parentNode.style.backgroundColor;l&&(s.fillStyle=l,s.fillRect(0,0,r.width,r.height)),s.drawImage(r,0,0)}}),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),e.toDataURL("image/png")}}function g6(i){const t=new h2({element:document.getElementById("popup")??void 0,autoPan:{animation:{duration:100}}});let e=null;i.on("pointermove",function(n){const s=document.getElementById("popup-content");if(s)if(s.innerHTML="",e!==null&&(e.setStyle(void 0),e=null),i.forEachFeatureAtPixel(n.pixel,function(r,o){e=r}),e&&(e==null?void 0:e.getProperties().boundedBy)){const r=n.coordinate,o=e.getProperties();delete o.boundedBy,delete o.msGeometry;let a="<ul>";for(const h in o)o.hasOwnProperty(h)&&(a+="<li><strong>"+h+":</strong> "+o[h]+"</li>");a+="</ul>",s.innerHTML=a,t.setPosition(r)}else t.setPosition(void 0)}),i.addOverlay(t)}const t0="http://www.w3.org/2001/XMLSchema-instance";function ye(i,t){return Q2().createElementNS(i,t)}function wo(i,t){return Z2(i,t,[]).join("")}function Z2(i,t,e){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)t?e.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(i.nodeValue);else{let n;for(n=i.firstChild;n;n=n.nextSibling)Z2(n,t,e)}return e}function bo(i){return"documentElement"in i}function m6(i,t,e){return i.getAttributeNS(t,e)||""}function xo(i){return new DOMParser().parseFromString(i,"application/xml")}function K2(i,t){return function(e,n){const s=i.call(t!==void 0?t:this,e,n);if(s!==void 0){const r=n[n.length-1];un(r,s)}}}function ie(i,t){return function(e,n){const s=i.call(t!==void 0?t:this,e,n);s!==void 0&&n[n.length-1].push(s)}}function $t(i,t){return function(e,n){const s=i.call(t!==void 0?t:this,e,n);s!==void 0&&(n[n.length-1]=s)}}function $e(i,t,e){return function(n,s){const r=i.call(e!==void 0?e:this,n,s);if(r!==void 0){const o=s[s.length-1],a=t!==void 0?t:n.localName;let h;a in o?h=o[a]:(h=[],o[a]=h),h.push(r)}}}function mt(i,t,e){return function(n,s){const r=i.call(e!==void 0?e:this,n,s);if(r!==void 0){const o=s[s.length-1],a=t!==void 0?t:n.localName;o[a]=r}}}function _t(i,t){return function(e,n,s){i.call(t!==void 0?t:this,e,n,s),s[s.length-1].node.appendChild(e)}}function En(i,t){return function(e,n,s){const r=n[n.length-1].node;let o=i;o===void 0&&(o=s);const a=t!==void 0?t:r.namespaceURI;return ye(a,o)}}const J2=En();function he(i,t,e){e=e!==void 0?e:{};let n,s;for(n=0,s=i.length;n<s;++n)e[i[n]]=t;return e}function So(i,t,e,n){let s;for(s=t.firstElementChild;s;s=s.nextElementSibling){const r=i[s.namespaceURI];if(r!==void 0){const o=r[s.localName];o!==void 0&&o.call(n,s,e)}}}function Dt(i,t,e,n,s){return n.push(i),So(t,e,n,s),n.pop()}function _6(i,t,e,n,s,r){const o=(s!==void 0?s:e).length;let a,h;for(let l=0;l<o;++l)a=e[l],a!==void 0&&(h=t.call(r!==void 0?r:this,a,n,s!==void 0?s[l]:void 0),h!==void 0&&i[h.namespaceURI][h.localName].call(r,h,a,n))}function di(i,t,e,n,s,r,o){return s.push(i),_6(t,e,n,s,r,o),s.pop()}let e0;function y6(){return e0===void 0&&typeof XMLSerializer<"u"&&(e0=new XMLSerializer),e0}let i0;function Q2(){return i0===void 0&&typeof document<"u"&&(i0=document.implementation.createDocument("","",null)),i0}class v6 extends Zw{constructor(){super(),this.xmlSerializer_=y6()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if(typeof t=="string"){const n=xo(t);return this.readFeatureFromDocument(n,e)}return bo(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if(typeof t=="string"){const n=xo(t);return this.readFeaturesFromDocument(n,e)}return bo(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const n=[];for(let s=t.firstChild;s;s=s.nextSibling)s.nodeType==Node.ELEMENT_NODE&&un(n,this.readFeaturesFromNode(s,e));return n}readFeaturesFromNode(t,e){return pe()}readGeometry(t,e){if(!t)return null;if(typeof t=="string"){const n=xo(t);return this.readGeometryFromDocument(n,e)}return bo(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if(typeof t=="string"){const e=xo(t);return this.readProjectionFromDocument(e)}return bo(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(t,e){return null}}const $2=v6,Hs="http://www.opengis.net/gml",w6=/^\s*$/;class fi extends $2{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:ie(this.readFeaturesInternal),featureMembers:$t(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const n=t.localName;let s=null;if(n=="FeatureCollection")s=Dt([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if(n=="featureMembers"||n=="featureMember"||n=="member"){const r=e[0];let o=r.featureType,a=r.featureNS;const h="p",l="p0";if(!o&&t.childNodes){o=[],a={};for(let g=0,p=t.childNodes.length;g<p;++g){const y=t.childNodes[g];if(y.nodeType===1){const v=y.nodeName.split(":").pop();if(!o.includes(v)){let x="",b=0;const S=y.namespaceURI;for(const A in a){if(a[A]===S){x=A;break}++b}x||(x=h+b,a[x]=S),o.push(x+":"+v)}}}n!="featureMember"&&(r.featureType=o,r.featureNS=a)}if(typeof a=="string"){const g=a;a={},a[l]=g}const c={},d=Array.isArray(o)?o:[o];for(const g in a){const p={};for(let y=0,v=d.length;y<v;++y)(d[y].includes(":")?d[y].split(":")[0]:l)===g&&(p[d[y].split(":").pop()]=n=="featureMembers"?ie(this.readFeatureElement,this):$t(this.readFeatureElement,this));c[a[g]]=p}n=="featureMember"||n=="member"?s=Dt(void 0,c,t,e):s=Dt([],c,t,e)}return s===null&&(s=[]),s}readGeometryOrExtent(t,e){const n=e[0];return n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Dt(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const n=e[0],s=this.readGeometryOrExtent(t,e);return s?ff(s,n):void 0}readGeometryElement(t,e){const n=e[0],s=this.readGeometryOrExtent(t,e);return s?df(s,!1,n):void 0}readFeatureElementInternal(t,e,n){let s;const r={};for(let h=t.firstElementChild;h;h=h.nextElementSibling){let l;const c=h.localName;h.childNodes.length===0||h.childNodes.length===1&&(h.firstChild.nodeType===3||h.firstChild.nodeType===4)?(l=wo(h,!1),w6.test(l)&&(l=void 0)):(n&&(l=c==="boundedBy"?this.readExtentElement(h,e):this.readGeometryElement(h,e)),l?c!=="boundedBy"&&(s=c):l=this.readFeatureElementInternal(h,e,!1));const d=h.attributes.length;if(d>0&&!(l instanceof gd)){l={_content_:l};for(let g=0;g<d;g++){const p=h.attributes[g].name;l[p]=h.attributes[g].value}}r[c]?(r[c]instanceof Array||(r[c]=[r[c]]),r[c].push(l)):r[c]=l}if(!n)return r;const o=new ta(r);s&&o.setGeometryName(s);const a=t.getAttribute("fid")||m6(t,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new oo(n,"XYZ")}readMultiPoint(t,e){const n=Dt([],this.MULTIPOINT_PARSERS,t,e,this);if(n)return new gf(n)}readMultiLineString(t,e){const n=Dt([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new fu(n)}readMultiPolygon(t,e){const n=Dt([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new gu(n)}pointMemberParser(t,e){So(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){So(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){So(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new mr(n,"XYZ")}readFlatLinearRing(t,e){const n=Dt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(n)return n}readLinearRing(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Sd(n,"XYZ")}readPolygon(t,e){const n=Dt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){const s=n[0],r=[s.length];let o,a;for(o=1,a=n.length;o<a;++o)un(s,n[o]),r.push(s.length);return new Zn(s,"XYZ",r)}}readFlatCoordinatesFromNode(t,e){return Dt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null}readFeaturesFromNode(t,e){const n={featureType:this.featureType,featureNS:this.featureNS};return n&&Object.assign(n,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[n])||[]}readProjectionFromNode(t){return Me(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}fi.prototype.namespace=Hs,fi.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},fi.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},fi.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},fi.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:ie(fi.prototype.pointMemberParser),pointMembers:ie(fi.prototype.pointMemberParser)}},fi.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:ie(fi.prototype.lineStringMemberParser),lineStringMembers:ie(fi.prototype.lineStringMemberParser)}},fi.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:ie(fi.prototype.polygonMemberParser),polygonMembers:ie(fi.prototype.polygonMemberParser)}},fi.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:ie(fi.prototype.readFlatCoordinatesFromNode)}},fi.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ie(fi.prototype.readLineString)}},fi.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ie(fi.prototype.readPolygon)}},fi.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:$t(fi.prototype.readFlatLinearRing)}};const be=fi;function Ca(i){const t=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(t)return t[1]!==void 0||!1}function Mo(i){const t=wo(i,!1);return Zs(t)}function Zs(i){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(t)return parseFloat(t[1])}function Ui(i){const t=wo(i,!1);return Ks(t)}function Ks(i){const t=/^\s*(\d+)\s*$/.exec(i);if(t)return parseInt(t[1],10)}function Ut(i){return wo(i,!1).trim()}function Si(i,t){i.appendChild(Q2().createTextNode(t))}const b6=Hs+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",x6={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Le extends be{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Hs].featureMember=ie(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:b6}readFlatCoordinates(t,e){const n=wo(t,!1).replace(/^\s*|\s*$/g,""),s=e[0].srsName;let r="enu";if(s){const h=Me(s);h&&(r=h.getAxisOrientation())}const o=n.trim().split(/\s+/),a=[];for(let h=0,l=o.length;h<l;h++){const c=o[h].split(/,+/),d=parseFloat(c[0]),g=parseFloat(c[1]),p=c.length===3?parseFloat(c[2]):0;r.substr(0,2)==="en"?a.push(d,g,p):a.push(g,d,p)}return a}readBox(t,e){const n=Dt([null],this.BOX_PARSERS_,t,e,this);return On(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(t,e){const n=Dt(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)}outerBoundaryIsParser(t,e){const n=Dt(void 0,this.RING_PARSERS,t,e,this);if(n){const s=e[e.length-1];s[0]=n}}GEOMETRY_NODE_FACTORY_(t,e,n){const s=e[e.length-1],r=s.multiSurface,o=s.surface,a=s.multiCurve;return Array.isArray(t)?n="Envelope":(n=t.getType(),n==="MultiPolygon"&&r===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="MultiLineString"&&a===!0&&(n="MultiCurve")),ye("http://www.opengis.net/gml",n)}writeFeatureElement(t,e,n){const s=e.getId();s&&t.setAttribute("fid",s);const r=n[n.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});const h=[],l=[];if(e.hasProperties()){const d=e.getProperties();for(const g in d){const p=d[g];p!==null&&(h.push(g),l.push(p),g==a||typeof p.getSimplifiedGeometry=="function"?g in r.serializers[o]||(r.serializers[o][g]=_t(this.writeGeometryElement,this)):g in r.serializers[o]||(r.serializers[o][g]=_t(Si)))}}const c=Object.assign({},r);c.node=t,di(c,r.serializers,En(void 0,o),l,n,h)}writeCurveOrLineString(t,e,n){const s=n[n.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,n)}else if(t.nodeName==="Curve"){const r=ye(t.namespaceURI,"segments");t.appendChild(r),this.writeCurveSegments_(r,e,n)}}writeLineStringOrCurveMember(t,e,n){const s=this.GEOMETRY_NODE_FACTORY_(e,n);s&&(t.appendChild(s),this.writeCurveOrLineString(s,e,n))}writeMultiCurveOrLineString(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName,a=s.curve;o&&t.setAttribute("srsName",o);const h=e.getLineStrings();di({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,n,void 0,this)}writeGeometryElement(t,e,n){const s=n[n.length-1],r=Object.assign({},s);r.node=t;let o;Array.isArray(e)?o=ff(e,s):o=df(e,!0,s),di(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}createCoordinatesNode_(t){const e=ye(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName,a=e.getCoordinates(),h=a.length,l=new Array(h);for(let c=0;c<h;++c){const d=a[c];l[c]=this.getCoords_(d,o,r)}Si(t,l.join(" "))}writeCurveSegments_(t,e,n){const s=ye(t.namespaceURI,"LineStringSegment");t.appendChild(s),this.writeCurveOrLineString(s,e,n)}writeSurfaceOrPolygon(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=e.getLinearRings();di({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,n,void 0,this)}else if(t.nodeName==="Surface"){const a=ye(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,n)}}RING_NODE_FACTORY_(t,e,n){const s=e[e.length-1],r=s.node,o=s.exteriorWritten;return o===void 0&&(s.exteriorWritten=!0),ye(r.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,n){const s=ye(t.namespaceURI,"PolygonPatch");t.appendChild(s),this.writeSurfaceOrPolygon(s,e,n)}writeRing(t,e,n){const s=ye(t.namespaceURI,"LinearRing");t.appendChild(s),this.writeLinearRing(s,e,n)}getCoords_(t,e,n){let s="enu";e&&(s=Me(e).getAxisOrientation());let r=s.substr(0,2)==="en"?t[0]+","+t[1]:t[1]+","+t[0];if(n){const o=t[2]||0;r+=","+o}return r}writePoint(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName;o&&t.setAttribute("srsName",o);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const h=e.getCoordinates(),l=this.getCoords_(h,o,r);Si(a,l)}writeMultiPoint(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName;o&&t.setAttribute("srsName",o);const a=e.getPoints();di({node:t,hasZ:r,srsName:o},this.POINTMEMBER_SERIALIZERS,En("pointMember"),a,n,void 0,this)}writePointMember(t,e,n){const s=ye(t.namespaceURI,"Point");t.appendChild(s),this.writePoint(s,e,n)}writeLinearRing(t,e,n){const s=n[n.length-1].srsName;s&&t.setAttribute("srsName",s);const r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,n)}writeMultiSurfaceOrPolygon(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName,a=s.surface;o&&t.setAttribute("srsName",o);const h=e.getPolygons();di({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,n,void 0,this)}writeSurfaceOrPolygonMember(t,e,n){const s=this.GEOMETRY_NODE_FACTORY_(e,n);s&&(t.appendChild(s),this.writeSurfaceOrPolygon(s,e,n))}writeEnvelope(t,e,n){const s=n[n.length-1].srsName;s&&t.setAttribute("srsName",s);const r=["lowerCorner","upperCorner"],o=[e[0]+" "+e[1],e[2]+" "+e[3]];di({node:t},this.ENVELOPE_SERIALIZERS,J2,o,n,r,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const s=e[e.length-1].node;return ye("http://www.opengis.net/gml",x6[s.nodeName])}}Le.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:$t(Le.prototype.readFlatCoordinates)}},Le.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Le.prototype.innerBoundaryIsParser,outerBoundaryIs:Le.prototype.outerBoundaryIsParser}},Le.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ie(Le.prototype.readFlatCoordinates)}},Le.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:$t(be.prototype.readPoint),MultiPoint:$t(be.prototype.readMultiPoint),LineString:$t(be.prototype.readLineString),MultiLineString:$t(be.prototype.readMultiLineString),LinearRing:$t(be.prototype.readLinearRing),Polygon:$t(be.prototype.readPolygon),MultiPolygon:$t(be.prototype.readMultiPolygon),Box:$t(Le.prototype.readBox)}},Le.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:_t(Le.prototype.writeCurveOrLineString),MultiCurve:_t(Le.prototype.writeMultiCurveOrLineString),Point:_t(Le.prototype.writePoint),MultiPoint:_t(Le.prototype.writeMultiPoint),LineString:_t(Le.prototype.writeCurveOrLineString),MultiLineString:_t(Le.prototype.writeMultiCurveOrLineString),LinearRing:_t(Le.prototype.writeLinearRing),Polygon:_t(Le.prototype.writeSurfaceOrPolygon),MultiPolygon:_t(Le.prototype.writeMultiSurfaceOrPolygon),Surface:_t(Le.prototype.writeSurfaceOrPolygon),MultiSurface:_t(Le.prototype.writeMultiSurfaceOrPolygon),Envelope:_t(Le.prototype.writeEnvelope)}},Le.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:_t(Le.prototype.writeLineStringOrCurveMember),curveMember:_t(Le.prototype.writeLineStringOrCurveMember)}},Le.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:_t(Le.prototype.writeRing),innerBoundaryIs:_t(Le.prototype.writeRing)}},Le.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:_t(Le.prototype.writePointMember)}},Le.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:_t(Le.prototype.writeSurfaceOrPolygonMember),polygonMember:_t(Le.prototype.writeSurfaceOrPolygonMember)}},Le.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:_t(Si),upperCorner:_t(Si)}};const $h=Le,S6=Hs+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",M6={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Yt extends be{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:S6,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,e){const n=Dt([],this.MULTICURVE_PARSERS,t,e,this);if(n)return new fu(n)}readFlatCurveRing(t,e){const n=Dt([],this.MULTICURVE_PARSERS,t,e,this),s=[];for(let r=0,o=n.length;r<o;++r)un(s,n[r].getFlatCoordinates());return s}readMultiSurface(t,e){const n=Dt([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new gu(n)}curveMemberParser(t,e){So(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){So(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return Dt([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return Dt([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return Dt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return Dt([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const n=Dt(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)}exteriorParser(t,e){const n=Dt(void 0,this.RING_PARSERS,t,e,this);if(n){const s=e[e.length-1];s[0]=n}}readSurface(t,e){const n=Dt([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){const s=n[0],r=[s.length];let o,a;for(o=1,a=n.length;o<a;++o)un(s,n[o]),r.push(s.length);return new Zn(s,"XYZ",r)}}readCurve(t,e){const n=Dt([null],this.CURVE_PARSERS,t,e,this);if(n)return new mr(n,"XYZ")}readEnvelope(t,e){const n=Dt([null],this.ENVELOPE_PARSERS,t,e,this);return On(n[1][0],n[1][1],n[2][0],n[2][1])}readFlatPos(t,e){let n=wo(t,!1);const s=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,r=[];let o;for(;o=s.exec(n);)r.push(parseFloat(o[1])),n=n.substr(o[0].length);if(n!=="")return;const a=e[0].srsName;let h="enu";if(a&&(h=Me(a).getAxisOrientation()),h==="neu"){let c,d;for(c=0,d=r.length;c<d;c+=3){const g=r[c],p=r[c+1];r[c]=p,r[c+1]=g}}const l=r.length;if(l==2&&r.push(0),l!==0)return r}readFlatPosList(t,e){const n=wo(t,!1).replace(/^\s*|\s*$/g,""),s=e[0],r=s.srsName,o=s.srsDimension;let a="enu";r&&(a=Me(r).getAxisOrientation());const h=n.split(/\s+/);let l=2;t.getAttribute("srsDimension")?l=Ks(t.getAttribute("srsDimension")):t.getAttribute("dimension")?l=Ks(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?l=Ks(t.parentNode.getAttribute("srsDimension")):o&&(l=Ks(o));let c,d,g;const p=[];for(let y=0,v=h.length;y<v;y+=l)c=parseFloat(h[y]),d=parseFloat(h[y+1]),g=l===3?parseFloat(h[y+2]):0,a.substr(0,2)==="en"?p.push(c,d,g):p.push(d,c,g);return p}writePos_(t,e,n){const s=n[n.length-1],r=s.hasZ,o=r?"3":"2";t.setAttribute("srsDimension",o);const a=s.srsName;let h="enu";a&&(h=Me(a).getAxisOrientation());const l=e.getCoordinates();let c;if(h.substr(0,2)==="en"?c=l[0]+" "+l[1]:c=l[1]+" "+l[0],r){const d=l[2]||0;c+=" "+d}Si(t,c)}getCoords_(t,e,n){let s="enu";e&&(s=Me(e).getAxisOrientation());let r=s.substr(0,2)==="en"?t[0]+" "+t[1]:t[1]+" "+t[0];if(n){const o=t[2]||0;r+=" "+o}return r}writePosList_(t,e,n){const s=n[n.length-1],r=s.hasZ,o=r?"3":"2";t.setAttribute("srsDimension",o);const a=s.srsName,h=e.getCoordinates(),l=h.length,c=new Array(l);let d;for(let g=0;g<l;++g)d=h[g],c[g]=this.getCoords_(d,a,r);Si(t,c.join(" "))}writePoint(t,e,n){const s=n[n.length-1].srsName;s&&t.setAttribute("srsName",s);const r=ye(t.namespaceURI,"pos");t.appendChild(r),this.writePos_(r,e,n)}writeEnvelope(t,e,n){const s=n[n.length-1].srsName;s&&t.setAttribute("srsName",s);const r=["lowerCorner","upperCorner"],o=[e[0]+" "+e[1],e[2]+" "+e[3]];di({node:t},this.ENVELOPE_SERIALIZERS,J2,o,n,r,this)}writeLinearRing(t,e,n){const s=n[n.length-1].srsName;s&&t.setAttribute("srsName",s);const r=ye(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,n)}RING_NODE_FACTORY_(t,e,n){const s=e[e.length-1],r=s.node,o=s.exteriorWritten;return o===void 0&&(s.exteriorWritten=!0),ye(r.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=e.getLinearRings();di({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,n,void 0,this)}else if(t.nodeName==="Surface"){const a=ye(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,n)}}writeCurveOrLineString(t,e,n){const s=n[n.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const r=ye(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,n)}else if(t.nodeName==="Curve"){const r=ye(t.namespaceURI,"segments");t.appendChild(r),this.writeCurveSegments_(r,e,n)}}writeMultiSurfaceOrPolygon(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName,a=s.surface;o&&t.setAttribute("srsName",o);const h=e.getPolygons();di({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,n,void 0,this)}writeMultiPoint(t,e,n){const s=n[n.length-1],r=s.srsName,o=s.hasZ;r&&t.setAttribute("srsName",r);const a=e.getPoints();di({node:t,hasZ:o,srsName:r},this.POINTMEMBER_SERIALIZERS,En("pointMember"),a,n,void 0,this)}writeMultiCurveOrLineString(t,e,n){const s=n[n.length-1],r=s.hasZ,o=s.srsName,a=s.curve;o&&t.setAttribute("srsName",o);const h=e.getLineStrings();di({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,n,void 0,this)}writeRing(t,e,n){const s=ye(t.namespaceURI,"LinearRing");t.appendChild(s),this.writeLinearRing(s,e,n)}writeSurfaceOrPolygonMember(t,e,n){const s=this.GEOMETRY_NODE_FACTORY_(e,n);s&&(t.appendChild(s),this.writeSurfaceOrPolygon(s,e,n))}writePointMember(t,e,n){const s=ye(t.namespaceURI,"Point");t.appendChild(s),this.writePoint(s,e,n)}writeLineStringOrCurveMember(t,e,n){const s=this.GEOMETRY_NODE_FACTORY_(e,n);s&&(t.appendChild(s),this.writeCurveOrLineString(s,e,n))}writeSurfacePatches_(t,e,n){const s=ye(t.namespaceURI,"PolygonPatch");t.appendChild(s),this.writeSurfaceOrPolygon(s,e,n)}writeCurveSegments_(t,e,n){const s=ye(t.namespaceURI,"LineStringSegment");t.appendChild(s),this.writeCurveOrLineString(s,e,n)}writeGeometryElement(t,e,n){const s=n[n.length-1],r=Object.assign({},s);r.node=t;let o;Array.isArray(e)?o=ff(e,s):o=df(e,!0,s),di(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}writeFeatureElement(t,e,n){const s=e.getId();s&&t.setAttribute("fid",s);const r=n[n.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});const h=[],l=[];if(e.hasProperties()){const d=e.getProperties();for(const g in d){const p=d[g];p!==null&&(h.push(g),l.push(p),g==a||typeof p.getSimplifiedGeometry=="function"?g in r.serializers[o]||(r.serializers[o][g]=_t(this.writeGeometryElement,this)):g in r.serializers[o]||(r.serializers[o][g]=_t(Si)))}}const c=Object.assign({},r);c.node=t,di(c,r.serializers,En(void 0,o),l,n,h)}writeFeatureMembers_(t,e,n){const s=n[n.length-1],r=s.featureType,o=s.featureNS,a={};a[o]={},a[o][r]=_t(this.writeFeatureElement,this);const h=Object.assign({},s);h.node=t,di(h,a,En(r,o),e,n)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const s=e[e.length-1].node;return ye(this.namespace,M6[s.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,n){const s=e[e.length-1],r=s.multiSurface,o=s.surface,a=s.curve,h=s.multiCurve;return Array.isArray(t)?n="Envelope":(n=t.getType(),n==="MultiPolygon"&&r===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="LineString"&&a===!0?n="Curve":n==="MultiLineString"&&h===!0&&(n="MultiCurve")),ye(this.namespace,n)}writeGeometryNode(t,e){e=this.adaptOptions(e);const n=ye(this.namespace,"geom"),s={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(s,e),this.writeGeometryElement(n,t,[s]),n}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ye(this.namespace,"featureMembers");n.setAttributeNS(t0,"xsi:schemaLocation",this.schemaLocation);const s={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(s,e),this.writeFeatureMembers_(n,t,[s]),n}}Yt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:$t(Yt.prototype.readFlatPos),posList:$t(Yt.prototype.readFlatPosList),coordinates:$t($h.prototype.readFlatCoordinates)}},Yt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Yt.prototype.interiorParser,exterior:Yt.prototype.exteriorParser}},Yt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:$t(be.prototype.readPoint),MultiPoint:$t(be.prototype.readMultiPoint),LineString:$t(be.prototype.readLineString),MultiLineString:$t(be.prototype.readMultiLineString),LinearRing:$t(be.prototype.readLinearRing),Polygon:$t(be.prototype.readPolygon),MultiPolygon:$t(be.prototype.readMultiPolygon),Surface:$t(Yt.prototype.readSurface),MultiSurface:$t(Yt.prototype.readMultiSurface),Curve:$t(Yt.prototype.readCurve),MultiCurve:$t(Yt.prototype.readMultiCurve),Envelope:$t(Yt.prototype.readEnvelope)}},Yt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:ie(Yt.prototype.curveMemberParser),curveMembers:ie(Yt.prototype.curveMemberParser)}},Yt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:ie(Yt.prototype.surfaceMemberParser),surfaceMembers:ie(Yt.prototype.surfaceMemberParser)}},Yt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ie(be.prototype.readLineString),Curve:ie(Yt.prototype.readCurve)}},Yt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ie(be.prototype.readPolygon),Surface:ie(Yt.prototype.readSurface)}},Yt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:$t(Yt.prototype.readPatch)}},Yt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:$t(Yt.prototype.readSegment)}},Yt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:ie(Yt.prototype.readFlatPosList),upperCorner:ie(Yt.prototype.readFlatPosList)}},Yt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:$t(Yt.prototype.readPolygonPatch)}},Yt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:K2(Yt.prototype.readLineStringSegment)}},be.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:$t(be.prototype.readFlatLinearRing),Ring:$t(Yt.prototype.readFlatCurveRing)}},Yt.prototype.writeFeatures,Yt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:_t(Yt.prototype.writeRing),interior:_t(Yt.prototype.writeRing)}},Yt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:_t(Si),upperCorner:_t(Si)}},Yt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:_t(Yt.prototype.writeSurfaceOrPolygonMember),polygonMember:_t(Yt.prototype.writeSurfaceOrPolygonMember)}},Yt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:_t(Yt.prototype.writePointMember)}},Yt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:_t(Yt.prototype.writeLineStringOrCurveMember),curveMember:_t(Yt.prototype.writeLineStringOrCurveMember)}},Yt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:_t(Yt.prototype.writeCurveOrLineString),MultiCurve:_t(Yt.prototype.writeMultiCurveOrLineString),Point:_t(Yt.prototype.writePoint),MultiPoint:_t(Yt.prototype.writeMultiPoint),LineString:_t(Yt.prototype.writeCurveOrLineString),MultiLineString:_t(Yt.prototype.writeMultiCurveOrLineString),LinearRing:_t(Yt.prototype.writeLinearRing),Polygon:_t(Yt.prototype.writeSurfaceOrPolygon),MultiPolygon:_t(Yt.prototype.writeMultiSurfaceOrPolygon),Surface:_t(Yt.prototype.writeSurfaceOrPolygon),MultiSurface:_t(Yt.prototype.writeMultiSurfaceOrPolygon),Envelope:_t(Yt.prototype.writeEnvelope)}};const xe=Yt;class C6{read(t){if(!t)return null;if(typeof t=="string"){const e=xo(t);return this.readFromDocument(e)}return bo(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){}}const n0=C6,E6="http://www.w3.org/1999/xlink";function Ea(i){return i.getAttributeNS(E6,"href")}const _n=[null,"http://www.opengis.net/ows/1.1"],A6=he(_n,{ServiceIdentification:mt(Q6),ServiceProvider:mt(tC),OperationsMetadata:mt(K6)});class L6 extends n0{constructor(){super()}readFromNode(t){return Dt({},A6,t,[])||null}}const N6=he(_n,{DeliveryPoint:mt(Ut),City:mt(Ut),AdministrativeArea:mt(Ut),PostalCode:mt(Ut),Country:mt(Ut),ElectronicMailAddress:mt(Ut)}),P6=he(_n,{Value:$e(eC)}),R6=he(_n,{AllowedValues:mt(z6)}),I6=he(_n,{Phone:mt(J6),Address:mt(U6)}),T6=he(_n,{HTTP:mt(H6)}),O6=he(_n,{Get:$e(X6),Post:void 0}),F6=he(_n,{DCP:mt(V6)}),k6=he(_n,{Operation:Z6}),D6=he(_n,{Voice:mt(Ut),Facsimile:mt(Ut)}),j6=he(_n,{Constraint:$e(W6)}),B6=he(_n,{IndividualName:mt(Ut),PositionName:mt(Ut),ContactInfo:mt(Y6)}),G6=he(_n,{Abstract:mt(Ut),AccessConstraints:mt(Ut),Fees:mt(Ut),Title:mt(Ut),ServiceTypeVersion:mt(Ut),ServiceType:mt(Ut)}),q6=he(_n,{ProviderName:mt(Ut),ProviderSite:mt(Ea),ServiceContact:mt($6)});function U6(i,t){return Dt({},N6,i,t)}function z6(i,t){return Dt({},P6,i,t)}function W6(i,t){const e=i.getAttribute("name");if(e)return Dt({name:e},R6,i,t)}function Y6(i,t){return Dt({},I6,i,t)}function V6(i,t){return Dt({},T6,i,t)}function X6(i,t){const e=Ea(i);if(e)return Dt({href:e},j6,i,t)}function H6(i,t){return Dt({},O6,i,t)}function Z6(i,t){const e=i.getAttribute("name"),n=Dt({},F6,i,t);if(!n)return;const s=t[t.length-1];s[e]=n}function K6(i,t){return Dt({},k6,i,t)}function J6(i,t){return Dt({},D6,i,t)}function Q6(i,t){return Dt({},G6,i,t)}function $6(i,t){return Dt({},B6,i,t)}function tC(i,t){return Dt({},q6,i,t)}function eC(i,t){return Ut(i)}const iC=L6;class Fe extends xe{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,e,n){const s=n[n.length-1];n[n.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},s),super.writeGeometryElement(t,e,n)}}Fe.prototype.namespace="http://www.opengis.net/gml/3.2",Fe.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:$t(xe.prototype.readFlatPos),posList:$t(xe.prototype.readFlatPosList),coordinates:$t($h.prototype.readFlatCoordinates)}},Fe.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:xe.prototype.interiorParser,exterior:xe.prototype.exteriorParser}},Fe.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:$t(be.prototype.readPoint),MultiPoint:$t(be.prototype.readMultiPoint),LineString:$t(be.prototype.readLineString),MultiLineString:$t(be.prototype.readMultiLineString),LinearRing:$t(be.prototype.readLinearRing),Polygon:$t(be.prototype.readPolygon),MultiPolygon:$t(be.prototype.readMultiPolygon),Surface:$t(Fe.prototype.readSurface),MultiSurface:$t(xe.prototype.readMultiSurface),Curve:$t(Fe.prototype.readCurve),MultiCurve:$t(xe.prototype.readMultiCurve),Envelope:$t(Fe.prototype.readEnvelope)}},Fe.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:ie(xe.prototype.curveMemberParser),curveMembers:ie(xe.prototype.curveMemberParser)}},Fe.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:ie(xe.prototype.surfaceMemberParser),surfaceMembers:ie(xe.prototype.surfaceMemberParser)}},Fe.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ie(be.prototype.readLineString),Curve:ie(xe.prototype.readCurve)}},Fe.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ie(be.prototype.readPolygon),Surface:ie(xe.prototype.readSurface)}},Fe.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:$t(xe.prototype.readPatch)}},Fe.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:$t(xe.prototype.readSegment)}},Fe.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:ie(xe.prototype.readFlatPosList),upperCorner:ie(xe.prototype.readFlatPosList)}},Fe.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:$t(xe.prototype.readPolygonPatch)}},Fe.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:K2(xe.prototype.readLineStringSegment)}},Fe.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:ie(be.prototype.pointMemberParser),pointMembers:ie(be.prototype.pointMemberParser)}},Fe.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:ie(be.prototype.lineStringMemberParser),lineStringMembers:ie(be.prototype.lineStringMemberParser)}},Fe.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:ie(be.prototype.polygonMemberParser),polygonMembers:ie(be.prototype.polygonMemberParser)}},Fe.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ie(be.prototype.readFlatCoordinatesFromNode)}},Fe.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ie(be.prototype.readLineString)}},Fe.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ie(be.prototype.readPolygon)}},Fe.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:$t(be.prototype.readFlatLinearRing),Ring:$t(Fe.prototype.readFlatCurveRing)}},Fe.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:_t(xe.prototype.writeRing),interior:_t(xe.prototype.writeRing)}},Fe.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:_t(Si),upperCorner:_t(Si)}},Fe.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:_t(xe.prototype.writeSurfaceOrPolygonMember),polygonMember:_t(xe.prototype.writeSurfaceOrPolygonMember)}},Fe.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:_t(xe.prototype.writePointMember)}},Fe.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:_t(xe.prototype.writeLineStringOrCurveMember),curveMember:_t(xe.prototype.writeLineStringOrCurveMember)}},Fe.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:_t(xe.prototype.writeCurveOrLineString),MultiCurve:_t(xe.prototype.writeMultiCurveOrLineString),Point:_t(Fe.prototype.writePoint),MultiPoint:_t(xe.prototype.writeMultiPoint),LineString:_t(xe.prototype.writeCurveOrLineString),MultiLineString:_t(xe.prototype.writeMultiCurveOrLineString),LinearRing:_t(xe.prototype.writeLinearRing),Polygon:_t(xe.prototype.writeSurfaceOrPolygon),MultiPolygon:_t(xe.prototype.writeMultiSurfaceOrPolygon),Surface:_t(xe.prototype.writeSurfaceOrPolygon),MultiSurface:_t(xe.prototype.writeMultiSurfaceOrPolygon),Envelope:_t(xe.prototype.writeEnvelope)}};const Yu=Fe;class nC{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}}const tm=nC;class sC extends tm{constructor(t,e){super(t),this.conditions=e,ce(this.conditions.length>=2,57)}}const rC=sC;class oC extends rC{constructor(t){super("And",Array.prototype.slice.call(arguments))}}const aC=oC;class hC extends tm{constructor(t,e,n){if(super("BBOX"),this.geometryName=t,this.extent=e,e.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=n}}const lC=hC;function uC(i){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(aC,t))}function cC(i,t,e){return new lC(i,t,e)}const em={"http://www.opengis.net/gml":{boundedBy:mt(be.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:ie(be.prototype.readFeaturesInternal)}},dC={"http://www.opengis.net/wfs":{totalInserted:mt(Ui),totalUpdated:mt(Ui),totalDeleted:mt(Ui)},"http://www.opengis.net/wfs/2.0":{totalInserted:mt(Ui),totalUpdated:mt(Ui),totalDeleted:mt(Ui)}},fC={"http://www.opengis.net/wfs":{TransactionSummary:mt(rm,"transactionSummary"),InsertResults:mt(am,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:mt(rm,"transactionSummary"),InsertResults:mt(am,"insertIds")}},pC={"http://www.opengis.net/wfs":{PropertyName:_t(Si)},"http://www.opengis.net/wfs/2.0":{PropertyName:_t(Si)}},im={"http://www.opengis.net/wfs":{Insert:_t(hm),Update:_t(cm),Delete:_t(um),Property:_t(dm),Native:_t(fm)},"http://www.opengis.net/wfs/2.0":{Insert:_t(hm),Update:_t(cm),Delete:_t(um),Property:_t(dm),Native:_t(fm)}},nm="feature",s0="http://www.w3.org/2000/xmlns/",r0={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},o0={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},a0={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},sm={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},h0={"2.0.0":Yu,"1.1.0":xe,"1.0.0":$h},gC="1.1.0";class mC extends $2{constructor(t){super(),t=t||{},this.version_=t.version?t.version:gC,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new h0[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:sm[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,e){const n={node:t};Object.assign(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(n,this.getReadOptions(t,e||{}));const s=[n];let r;this.version_==="2.0.0"?r=em:r=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=Dt([],r,t,s,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(t){if(t){if(typeof t=="string"){const e=xo(t);return this.readTransactionResponseFromDocument(e)}return bo(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const e=xo(t);return this.readFeatureCollectionMetadataFromDocument(e)}return bo(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(t){const e={},n=Ks(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,Dt(e,em,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(t){return Dt({},fC,t,[])}writeGetFeature(t){const e=ye(o0[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&e.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&e.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&e.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&e.setAttribute("count",String(t.count)),t.viewParams!==void 0&&e.setAttribute("viewParams",t.viewParams),e.setAttributeNS(t0,"xsi:schemaLocation",this.schemaLocation_);const n={node:e};if(Object.assign(n,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),ce(Array.isArray(t.featureTypes),11),typeof t.featureTypes[0]=="string"){let s=t.filter;t.bbox&&(ce(t.geometryName,12),s=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,s)),Object.assign(n,{geometryName:t.geometryName,filter:s}),Sm(e,t.featureTypes,[n])}else t.featureTypes.forEach(s=>{const r=this.combineBboxAndFilter(s.geometryName,s.bbox,t.srsName,t.filter);Object.assign(n,{geometryName:s.geometryName,filter:r}),Sm(e,[s.name],[n])});return e}combineBboxAndFilter(t,e,n,s){const r=cC(t,e,n);return s?uC(s,r):r}writeTransaction(t,e,n,s){const r=[],o=s.version?s.version:this.version_,a=ye(o0[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let h;s&&(h=s.gmlOptions?s.gmlOptions:{},s.handle&&a.setAttribute("handle",s.handle)),a.setAttributeNS(t0,"xsi:schemaLocation",sm[o]);const l=_C(a,h,o,s);return t&&Vu("Insert",t,r,l),e&&Vu("Update",e,r,l),n&&Vu("Delete",n,r,l),s.nativeElements&&Vu("Native",s.nativeElements,r,l),a}readProjectionFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(!(e.childNodes.length===0||e.childNodes.length===1&&e.firstChild.nodeType===3)){const n=[{}];return this.gmlFormat_.readGeometryElement(e,n),Me(n.pop().srsName)}}return null}}function _C(i,t,e,n){const s=n.featurePrefix?n.featurePrefix:nm;let r;return e==="1.0.0"?r=2:e==="1.1.0"?r=3:e==="2.0.0"&&(r=3.2),Object.assign({node:i},{version:e,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:s,gmlVersion:r,hasZ:n.hasZ,srsName:n.srsName},t)}function Vu(i,t,e,n){di(n,im,En(i),t,e)}function rm(i,t){return Dt({},dC,i,t)}const yC={"http://www.opengis.net/ogc":{FeatureId:ie(function(i,t){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:ie(function(i,t){return i.getAttribute("fid")})}};function om(i,t){So(yC,i,t)}const vC={"http://www.opengis.net/wfs":{Feature:om},"http://www.opengis.net/wfs/2.0":{Feature:om}};function am(i,t){return Dt([],vC,i,t)}function hm(i,t,e){const n=e[e.length-1],s=n.featureType,r=n.featureNS,o=n.gmlVersion,a=ye(r,s);i.appendChild(a),o===2?$h.prototype.writeFeatureElement(a,t,e):o===3?xe.prototype.writeFeatureElement(a,t,e):Yu.prototype.writeFeatureElement(a,t,e)}function lm(i,t,e){const n=e[e.length-1].version,s=r0[n],r=ye(s,"Filter"),o=ye(s,"FeatureId");r.appendChild(o),o.setAttribute("fid",t),i.appendChild(r)}function l0(i,t){i=i||nm;const e=i+":";return t.startsWith(e)?t:e+t}function um(i,t,e){const n=e[e.length-1];ce(t.getId()!==void 0,26);const s=n.featureType,r=n.featurePrefix,o=n.featureNS,a=l0(r,s);i.setAttribute("typeName",a),i.setAttributeNS(s0,"xmlns:"+r,o);const h=t.getId();h!==void 0&&lm(i,h,e)}function cm(i,t,e){const n=e[e.length-1];ce(t.getId()!==void 0,27);const s=n.version,r=n.featureType,o=n.featurePrefix,a=n.featureNS,h=l0(o,r),l=t.getGeometryName();i.setAttribute("typeName",h),i.setAttributeNS(s0,"xmlns:"+o,a);const c=t.getId();if(c!==void 0){const d=t.getKeys(),g=[];for(let p=0,y=d.length;p<y;p++){const v=t.get(d[p]);if(v!==void 0){let x=d[p];v&&typeof v.getSimplifiedGeometry=="function"&&(x=l),g.push({name:x,value:v})}}di({version:s,gmlVersion:n.gmlVersion,node:i,hasZ:n.hasZ,srsName:n.srsName},im,En("Property"),g,e),lm(i,c,e)}}function dm(i,t,e){const n=e[e.length-1],s=n.version,r=o0[s],o=ye(r,"Name"),a=n.gmlVersion;if(i.appendChild(o),Si(o,t.name),t.value!==void 0&&t.value!==null){const h=ye(r,"Value");i.appendChild(h),t.value&&typeof t.value.getSimplifiedGeometry=="function"?a===2?$h.prototype.writeGeometryElement(h,t.value,e):a===3?xe.prototype.writeGeometryElement(h,t.value,e):Yu.prototype.writeGeometryElement(h,t.value,e):Si(h,t.value)}}function fm(i,t,e){t.vendorId&&i.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&Si(i,t.value)}const Xu={"http://www.opengis.net/wfs":{Query:_t(pm)},"http://www.opengis.net/wfs/2.0":{Query:_t(pm)},"http://www.opengis.net/ogc":{During:_t(_m),And:_t(Hu),Or:_t(Hu),Not:_t(ym),BBOX:_t(gm),Contains:_t(Tr),Intersects:_t(Tr),Within:_t(Tr),DWithin:_t(mm),PropertyIsEqualTo:_t(Dn),PropertyIsNotEqualTo:_t(Dn),PropertyIsLessThan:_t(Dn),PropertyIsLessThanOrEqualTo:_t(Dn),PropertyIsGreaterThan:_t(Dn),PropertyIsGreaterThanOrEqualTo:_t(Dn),PropertyIsNull:_t(vm),PropertyIsBetween:_t(wm),PropertyIsLike:_t(bm)},"http://www.opengis.net/fes/2.0":{During:_t(_m),And:_t(Hu),Or:_t(Hu),Not:_t(ym),BBOX:_t(gm),Contains:_t(Tr),Disjoint:_t(Tr),Intersects:_t(Tr),ResourceId:_t(bC),Within:_t(Tr),DWithin:_t(mm),PropertyIsEqualTo:_t(Dn),PropertyIsNotEqualTo:_t(Dn),PropertyIsLessThan:_t(Dn),PropertyIsLessThanOrEqualTo:_t(Dn),PropertyIsGreaterThan:_t(Dn),PropertyIsGreaterThanOrEqualTo:_t(Dn),PropertyIsNull:_t(vm),PropertyIsBetween:_t(wm),PropertyIsLike:_t(bm)}};function pm(i,t,e){const n=e[e.length-1],s=n.version,r=n.featurePrefix,o=n.featureNS,a=n.propertyNames,h=n.srsName;let l;r?l=l0(r,t):l=t;let c;s==="2.0.0"?c="typeNames":c="typeName",i.setAttribute(c,l),h&&i.setAttribute("srsName",h),o&&i.setAttributeNS(s0,"xmlns:"+r,o);const d=Object.assign({},n);d.node=i,di(d,pC,En("PropertyName"),a,e);const g=n.filter;if(g){const p=ye(Ju(s),"Filter");i.appendChild(p),wC(p,g,e)}}function wC(i,t,e){const n=e[e.length-1],s={node:i};Object.assign(s,{context:n}),di(s,Xu,En(t.getTagName()),[t],e)}function gm(i,t,e){const n=e[e.length-1],s=n.context.version;n.srsName=t.srsName;const r=h0[s];Aa(s,i,t.geometryName),r.prototype.writeGeometryElement(i,t.extent,e)}function bC(i,t,e){i.setAttribute("rid",t.rid)}function Tr(i,t,e){const n=e[e.length-1],s=n.context.version;n.srsName=t.srsName;const r=h0[s];Aa(s,i,t.geometryName),r.prototype.writeGeometryElement(i,t.geometry,e)}function mm(i,t,e){const n=e[e.length-1].context.version;Tr(i,t,e);const s=ye(Ju(n),"Distance");Si(s,t.distance.toString()),n==="2.0.0"?s.setAttribute("uom",t.unit):s.setAttribute("units",t.unit),i.appendChild(s)}function _m(i,t,e){const n=e[e.length-1].context.version;Zu(a0[n],"ValueReference",i,t.propertyName);const s=ye(Hs,"TimePeriod");i.appendChild(s);const r=ye(Hs,"begin");s.appendChild(r),xm(r,t.begin);const o=ye(Hs,"end");s.appendChild(o),xm(o,t.end)}function Hu(i,t,e){const n=e[e.length-1].context,s={node:i};Object.assign(s,{context:n});const r=t.conditions;for(let o=0,a=r.length;o<a;++o){const h=r[o];di(s,Xu,En(h.getTagName()),[h],e)}}function ym(i,t,e){const n=e[e.length-1].context,s={node:i};Object.assign(s,{context:n});const r=t.condition;di(s,Xu,En(r.getTagName()),[r],e)}function Dn(i,t,e){const n=e[e.length-1].context.version;t.matchCase!==void 0&&i.setAttribute("matchCase",t.matchCase.toString()),Aa(n,i,t.propertyName),Ku(n,i,""+t.expression)}function vm(i,t,e){const n=e[e.length-1].context.version;Aa(n,i,t.propertyName)}function wm(i,t,e){const n=e[e.length-1].context.version,s=Ju(n);Aa(n,i,t.propertyName);const r=ye(s,"LowerBoundary");i.appendChild(r),Ku(n,r,""+t.lowerBoundary);const o=ye(s,"UpperBoundary");i.appendChild(o),Ku(n,o,""+t.upperBoundary)}function bm(i,t,e){const n=e[e.length-1].context.version;i.setAttribute("wildCard",t.wildCard),i.setAttribute("singleChar",t.singleChar),i.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&i.setAttribute("matchCase",t.matchCase.toString()),Aa(n,i,t.propertyName),Ku(n,i,""+t.pattern)}function Zu(i,t,e,n){const s=ye(i,t);Si(s,n),e.appendChild(s)}function Ku(i,t,e){Zu(Ju(i),"Literal",t,e)}function Aa(i,t,e){i==="2.0.0"?Zu(a0[i],"ValueReference",t,e):Zu(r0[i],"PropertyName",t,e)}function xm(i,t){const e=ye(Hs,"TimeInstant");i.appendChild(e);const n=ye(Hs,"timePosition");e.appendChild(n),Si(n,t)}function Sm(i,t,e){const n=e[e.length-1],s=Object.assign({},n);s.node=i,di(s,Xu,En("Query"),t,e)}function Ju(i){let t;return i==="2.0.0"?t=a0[i]:t=r0[i],t}const xC=mC,zi=[null,"http://www.opengis.net/wms"],SC=he(zi,{Service:mt(WC),Capability:mt(zC)}),MC=he(zi,{Request:mt(JC),Exception:mt(HC),Layer:mt(ZC)});class CC extends n0{constructor(){super(),this.version=void 0}readFromNode(t){return this.version=t.getAttribute("version").trim(),Dt({version:this.version},SC,t,[])||null}}const EC=he(zi,{Name:mt(Ut),Title:mt(Ut),Abstract:mt(Ut),KeywordList:mt(Am),OnlineResource:mt(Ea),ContactInformation:mt(YC),Fees:mt(Ut),AccessConstraints:mt(Ut),LayerLimit:mt(Ui),MaxWidth:mt(Ui),MaxHeight:mt(Ui)}),AC=he(zi,{ContactPersonPrimary:mt(VC),ContactPosition:mt(Ut),ContactAddress:mt(XC),ContactVoiceTelephone:mt(Ut),ContactFacsimileTelephone:mt(Ut),ContactElectronicMailAddress:mt(Ut)}),LC=he(zi,{ContactPerson:mt(Ut),ContactOrganization:mt(Ut)}),NC=he(zi,{AddressType:mt(Ut),Address:mt(Ut),City:mt(Ut),StateOrProvince:mt(Ut),PostCode:mt(Ut),Country:mt(Ut)}),PC=he(zi,{Format:ie(Ut)}),Mm=he(zi,{Name:mt(Ut),Title:mt(Ut),Abstract:mt(Ut),KeywordList:mt(Am),CRS:$e(Ut),EX_GeographicBoundingBox:mt(UC),BoundingBox:$e(qC),Dimension:$e(KC),Attribution:mt(GC),AuthorityURL:$e(tE),Identifier:$e(Ut),MetadataURL:$e(eE),DataURL:$e(Js),FeatureListURL:$e(Js),Style:$e(iE),MinScaleDenominator:mt(Mo),MaxScaleDenominator:mt(Mo),Layer:$e(Cm)}),RC=he(zi,{Title:mt(Ut),OnlineResource:mt(Ea),LogoURL:mt(Em)}),IC=he(zi,{westBoundLongitude:mt(Mo),eastBoundLongitude:mt(Mo),southBoundLatitude:mt(Mo),northBoundLatitude:mt(Mo)}),TC=he(zi,{GetCapabilities:mt(u0),GetMap:mt(u0),GetFeatureInfo:mt(u0)}),OC=he(zi,{Format:$e(Ut),DCPType:$e(QC)}),FC=he(zi,{HTTP:mt($C)}),kC=he(zi,{Get:mt(Js),Post:mt(Js)}),DC=he(zi,{Name:mt(Ut),Title:mt(Ut),Abstract:mt(Ut),LegendURL:$e(Em),StyleSheetURL:mt(Js),StyleURL:mt(Js)}),jC=he(zi,{Format:mt(Ut),OnlineResource:mt(Ea)}),BC=he(zi,{Keyword:ie(Ut)});function GC(i,t){return Dt({},RC,i,t)}function qC(i,t){const e=[Zs(i.getAttribute("minx")),Zs(i.getAttribute("miny")),Zs(i.getAttribute("maxx")),Zs(i.getAttribute("maxy"))],n=[Zs(i.getAttribute("resx")),Zs(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:e,res:n}}function UC(i,t){const e=Dt({},IC,i,t);if(!e)return;const n=e.westBoundLongitude,s=e.southBoundLatitude,r=e.eastBoundLongitude,o=e.northBoundLatitude;if(!(n===void 0||s===void 0||r===void 0||o===void 0))return[n,s,r,o]}function zC(i,t){return Dt({},MC,i,t)}function WC(i,t){return Dt({},EC,i,t)}function YC(i,t){return Dt({},AC,i,t)}function VC(i,t){return Dt({},LC,i,t)}function XC(i,t){return Dt({},NC,i,t)}function HC(i,t){return Dt([],PC,i,t)}function ZC(i,t){const e=Dt({},Mm,i,t);return e.Layer===void 0?Object.assign(e,Cm(i,t)):e}function Cm(i,t){const e=t[t.length-1],n=Dt({},Mm,i,t);if(!n)return;let s=Ca(i.getAttribute("queryable"));s===void 0&&(s=e.queryable),n.queryable=s!==void 0?s:!1;let r=Ks(i.getAttribute("cascaded"));r===void 0&&(r=e.cascaded),n.cascaded=r;let o=Ca(i.getAttribute("opaque"));o===void 0&&(o=e.opaque),n.opaque=o!==void 0?o:!1;let a=Ca(i.getAttribute("noSubsets"));a===void 0&&(a=e.noSubsets),n.noSubsets=a!==void 0?a:!1;let h=Zs(i.getAttribute("fixedWidth"));h||(h=e.fixedWidth),n.fixedWidth=h;let l=Zs(i.getAttribute("fixedHeight"));return l||(l=e.fixedHeight),n.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach(function(c){if(c in e){const d=n[c]||[];n[c]=d.concat(e[c])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(c){if(!(c in n)){const d=e[c];n[c]=d}}),n}function KC(i,t){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:Ca(i.getAttribute("multipleValues")),nearestValue:Ca(i.getAttribute("nearestValue")),current:Ca(i.getAttribute("current")),values:Ut(i)}}function Js(i,t){return Dt({},jC,i,t)}function JC(i,t){return Dt({},TC,i,t)}function QC(i,t){return Dt({},FC,i,t)}function $C(i,t){return Dt({},kC,i,t)}function u0(i,t){return Dt({},OC,i,t)}function Em(i,t){const e=Js(i,t);if(e){const n=[Ks(i.getAttribute("width")),Ks(i.getAttribute("height"))];return e.size=n,e}}function tE(i,t){const e=Js(i,t);if(e)return e.name=i.getAttribute("name"),e}function eE(i,t){const e=Js(i,t);if(e)return e.type=i.getAttribute("type"),e}function iE(i,t){return Dt({},DC,i,t)}function Am(i,t){return Dt([],BC,i,t)}const nE=CC,Rs=[null,"http://www.opengis.net/wmts/1.0"],La=[null,"http://www.opengis.net/ows/1.1"],sE=he(Rs,{Contents:mt(mE)});class rE extends n0{constructor(){super(),this.owsParser_=new iC}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let n=this.owsParser_.readFromNode(t);return n?(n.version=e,n=Dt(n,sE,t,[]),n||null):null}}const oE=he(Rs,{Layer:$e(_E),TileMatrixSet:$e(yE)}),aE=he(Rs,{Style:$e(vE),Format:$e(Ut),TileMatrixSetLink:$e(wE),Dimension:$e(bE),ResourceURL:$e(xE)},he(La,{Title:mt(Ut),Abstract:mt(Ut),WGS84BoundingBox:mt(Lm),Identifier:mt(Ut)})),hE=he(Rs,{LegendURL:$e(SE)},he(La,{Title:mt(Ut),Identifier:mt(Ut)})),lE=he(Rs,{TileMatrixSet:mt(Ut),TileMatrixSetLimits:mt(CE)}),uE=he(Rs,{TileMatrixLimits:ie(EE)}),cE=he(Rs,{TileMatrix:mt(Ut),MinTileRow:mt(Ui),MaxTileRow:mt(Ui),MinTileCol:mt(Ui),MaxTileCol:mt(Ui)}),dE=he(Rs,{Default:mt(Ut),Value:$e(Ut)},he(La,{Identifier:mt(Ut)})),fE=he(La,{LowerCorner:ie(c0),UpperCorner:ie(c0)}),pE=he(Rs,{WellKnownScaleSet:mt(Ut),TileMatrix:$e(ME)},he(La,{SupportedCRS:mt(Ut),Identifier:mt(Ut),BoundingBox:mt(Lm)})),gE=he(Rs,{TopLeftCorner:mt(c0),ScaleDenominator:mt(Mo),TileWidth:mt(Ui),TileHeight:mt(Ui),MatrixWidth:mt(Ui),MatrixHeight:mt(Ui)},he(La,{Identifier:mt(Ut)}));function mE(i,t){return Dt({},oE,i,t)}function _E(i,t){return Dt({},aE,i,t)}function yE(i,t){return Dt({},pE,i,t)}function vE(i,t){const e=Dt({},hE,i,t);if(!e)return;const n=i.getAttribute("isDefault")==="true";return e.isDefault=n,e}function wE(i,t){return Dt({},lE,i,t)}function bE(i,t){return Dt({},dE,i,t)}function xE(i,t){const e=i.getAttribute("format"),n=i.getAttribute("template"),s=i.getAttribute("resourceType"),r={};return e&&(r.format=e),n&&(r.template=n),s&&(r.resourceType=s),r}function Lm(i,t){const e=Dt([],fE,i,t);if(e.length==2)return Ol(e)}function SE(i,t){const e={};return e.format=i.getAttribute("format"),e.href=Ea(i),e}function c0(i,t){const e=Ut(i).split(/\s+/);if(!e||e.length!=2)return;const n=+e[0],s=+e[1];if(!(isNaN(n)||isNaN(s)))return[n,s]}function ME(i,t){return Dt({},gE,i,t)}function CE(i,t){return Dt([],uE,i,t)}function EE(i,t){return Dt({},cE,i,t)}const AE=rE;async function LE(i,t=!0){let e=new URL(i);e.searchParams.set("SERVICE","WMTS"),e.searchParams.set("REQUEST","GetCapabilities"),i=e.toString(),t&&(i="https://corsproxy.io/?"+i);const n=await(await fetch(i,{cache:"force-cache"})).text(),s=new AE().read(n),r=s.Contents.Layer[0].Title||"RASTER",o=dM(s,{layer:r,matrixSet:"EPSG:2180"});return o.tileGrid.origins_=o.tileGrid.origins_.map(a=>[a[1],a[0]]),o.crossOrigin="Anonymous",o}async function Nm(i,t=!0,e=256,n=1){let s=new URL(i);s.searchParams.set("SERVICE","WMS"),s.searchParams.set("REQUEST","GetCapabilities"),i=s.toString(),t&&(i="https://corsproxy.io/?"+i);const r=await(await fetch(i,{cache:"force-cache"})).text(),o=new nE().read(r);o.version;let a=(o.Capability.Layer.Layer||[]).map(c=>c.Name).join(",")||"RASTER",h=o.Capability.Request.GetMap.Format||[],l="";return h.includes("image/png")?l="image/png":h.includes("image/jpeg")?l="image/jpeg":h.includes("image/jpg")&&(l="image/jpg"),{url:i,params:{LAYERS:a,SRS:"EPSG:2180",FORMAT:l,TRANSPARENT:!0,TILESIZE:e,OPACITY:n,VERSION:"1.1.1"},projection:"EPSG:2180",crossOrigin:"Anonymous"}}async function Pm(i,t=!0,e=256,n=1){return{...await Nm(i,t,e,n),ratio:1,serverType:"geoserver"}}function Rm(i,t,e){const n=new cf({format:new xC({version:"2.0.0",gmlFormat:new Yu}),strategy:Bw,loader:function(s){const r=new URL(i),o={SERVICE:"WFS",REQUEST:"GetFeature",COUNT:1e3,VERSION:"2.0.0",STARTINDEX:0,TYPENAMES:t,TYPENAME:t,SRSNAME:"urn:ogc:def:crs:EPSG::2180"};for(const[l,c]of Object.entries(o))r.searchParams.set(l,String(c));s=[s[1],s[0],s[3],s[2]];const a=s.join(",")+",urn:ogc:def:crs:EPSG::2180";r.searchParams.set("BBOX",a);const h="https://corsproxy.io/?"+r.toString();fetch(h).then(l=>l.text()).then(l=>{const c=n.getFormat().readFeatures(l,{dataProjection:"EPSG:2180",featureProjection:e.getView().getProjection()});c.forEach(d=>{var g;(g=d.getGeometry())==null||g.applyTransform(function(p,y,v){const x=p.length,b=v!==void 0?v:2,S=y!==void 0?y:new Array(x);for(let A=0;A<x;A+=b){const O=p[A],k=p[A+1];S[A]=k,S[A+1]=O}return S})}),n.addFeatures(c)}).catch(l=>{n.removeLoadedExtent(s),console.log("Error occured while fetching wfs features.",l)})}});return e.on("moveend",function(){n.refresh()}),n}const Qu={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class $u extends Ni{constructor(t,e){super(t),this.feature=e}}function NE(i,t){const e=[];for(let n=0;n<t.length;++n){const s=t[n].getGeometry();Im(i,s,e)}return e}function tc(i,t){return js(i[0],i[1],t[0],t[1])}function Na(i,t){const e=i.length;return t<0?i[t+e]:t>=e?i[t-e]:i[t]}function ec(i,t,e){let n,s;t<e?(n=t,s=e):(n=e,s=t);const r=Math.ceil(n),o=Math.floor(s);if(r>o){const h=Pa(i,n),l=Pa(i,s);return tc(h,l)}let a=0;if(n<r){const h=Pa(i,n),l=Na(i,r);a+=tc(h,l)}if(o<s){const h=Na(i,o),l=Pa(i,s);a+=tc(h,l)}for(let h=r;h<o-1;++h){const l=Na(i,h),c=Na(i,h+1);a+=tc(l,c)}return a}function Im(i,t,e){if(t instanceof mr){ic(i,t.getCoordinates(),!1,e);return}if(t instanceof fu){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s)ic(i,n[s],!1,e);return}if(t instanceof Zn){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s)ic(i,n[s],!0,e);return}if(t instanceof gu){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,h=o.length;a<h;++a)ic(i,o[a],!0,e)}return}if(t instanceof Qw){const n=t.getGeometries();for(let s=0;s<n.length;++s)Im(i,n[s],e);return}}const d0={index:-1,endIndex:NaN};function PE(i,t,e,n){const s=i[0],r=i[1];let o=1/0,a=-1,h=NaN;for(let d=0;d<t.targets.length;++d){const g=t.targets[d],p=g.coordinates;let y=1/0,v;for(let x=0;x<p.length-1;++x){const b=p[x],S=p[x+1],A=Tm(s,r,b,S);A.squaredDistance<y&&(y=A.squaredDistance,v=x+A.along)}y<o&&(o=y,g.ring&&t.targetIndex===d&&(g.endIndex>g.startIndex?v<g.startIndex&&(v+=p.length):g.endIndex<g.startIndex&&v>g.startIndex&&(v-=p.length)),h=v,a=d)}const l=t.targets[a];let c=l.ring;if(t.targetIndex===a&&c){const d=Pa(l.coordinates,h),g=e.getPixelFromCoordinate(d);Np(g,t.startPx)>n&&(c=!1)}if(c){const d=l.coordinates,g=d.length,p=l.startIndex,y=h;if(p<y){const v=ec(d,p,y);ec(d,p,y-g)<v&&(h-=g)}else{const v=ec(d,p,y);ec(d,p,y+g)<v&&(h+=g)}}return d0.index=a,d0.endIndex=h,d0}function ic(i,t,e,n){const s=i[0],r=i[1];for(let o=0,a=t.length-1;o<a;++o){const h=t[o],l=t[o+1],c=Tm(s,r,h,l);if(c.squaredDistance===0){const d=o+c.along;n.push({coordinates:t,ring:e,startIndex:d,endIndex:d});return}}}const f0={along:0,squaredDistance:0};function Tm(i,t,e,n){const s=e[0],r=e[1],o=n[0],a=n[1],h=o-s,l=a-r;let c=0,d=s,g=r;return(h!==0||l!==0)&&(c=ai(((i-s)*h+(t-r)*l)/(h*h+l*l),0,1),d+=h*c,g+=l*c),f0.along=c,f0.squaredDistance=ch(js(i,t,d,g),10),f0}function Pa(i,t){const e=i.length;let n=Math.floor(t);const s=t-n;n>=e?n-=e:n<0&&(n+=e);let r=n+1;r>=e&&(r-=e);const o=i[n],a=o[0],h=o[1],l=i[r],c=l[0]-a,d=l[1]-h;return[a+c*s,h+d*s]}class RE extends Ko{constructor(t){const e=t;e.stopDown||(e.stopDown=Oo),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=TE(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:To,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let n=t.geometryFunction;if(!n){const s=this.mode_;if(s==="Circle")n=function(r,o,a){const h=o||new Jw([NaN,NaN]),l=Hn(r[0]),c=Lp(l,Hn(r[r.length-1]));return h.setCenterAndRadius(l,Math.sqrt(c),this.geometryLayout_),h};else{let r;s==="Point"?r=oo:s==="LineString"?r=mr:s==="Polygon"&&(r=Zn),n=function(o,a,h){return a?s==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a}}}this.geometryFunction_=n,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new cu({source:new cf({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:IE(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:Gd,this.freehandCondition_,t.freehand?this.freehandCondition_=Bd:this.freehandCondition_=t.freehandCondition?t.freehandCondition:_1,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(Fd.ACTIVE,this.updateState_)}setTrace(t){let e;t?t===!0?e=Bd:e=t:e=jy,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===ue.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Be.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Be.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Be.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===Be.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===Be.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Be.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Be.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Us(Be.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active){this.deactivateTrace_();return}const e=this.getMap(),n=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),s=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),r=Ol([n,s]),o=this.traceSource_.getFeaturesInExtent(r);if(o.length===0)return;const a=NE(t.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const n=t.startIndex<=t.endIndex,s=t.startIndex<=e;n===s?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let n=0;if(t<e){const s=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),n=r-s+1}else{const s=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),n=s-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,e,n){if(e===n)return;const s=[];if(e<n){const r=Math.ceil(e);let o=Math.floor(n);o===n&&(o-=1);for(let a=r;a<=o;++a)s.push(Na(t.coordinates,a))}else{const r=Math.floor(e);let o=Math.ceil(n);o===n&&(o+=1);for(let a=r;a>=o;--a)s.push(Na(t.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&Np(e.startPx,t.pixel)<this.snapTolerance_)return;const n=PE(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(e.targetIndex!==-1){const h=e.targets[e.targetIndex];this.removeTracedCoordinates_(h.startIndex,h.endIndex)}const a=e.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else{const a=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(a,n.endIndex)}e.targetIndex=n.index;const s=e.targets[e.targetIndex];s.endIndex=n.endIndex;const r=Pa(s.coordinates,s.endIndex),o=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(t.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,s=e[0]-n[0],r=e[1]-n[1],o=s*s+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(t.coordinate.slice());return}this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,e){let n=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")n=!0;else if(o==="Circle")n=this.sketchCoords_.length===2;else if(o==="LineString")s=!e&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],e?r=[a[0][0]]:r=[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let h=0,l=r.length;h<l;h++){const c=r[h],d=a.getPixelFromCoordinate(c),g=t[0]-d[0],p=t[1]-d[1],y=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(g*g+p*p)<=y,n){this.finishCoordinate_=c;break}}}}return n}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new ta(new oo(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new ta);const e=t.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new mr(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){const e=this.getMap().getView().getProjection(),n=Wl(this.geometryLayout_);for(;t.length<n;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ta(new mr(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new ta,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new $u(Qu.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),n=this.sketchFeature_.getGeometry(),s=e.getView().getProjection(),r=Wl(this.geometryLayout_);let o,a;for(;t.length<r;)t.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,r;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(t.slice()),this.geometryFunction_(r,e,n)):o==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(t.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<t;++r){let o;if(s==="LineString"||s==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,n),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(s==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const h=o[o.length-2].slice();o[o.length-1]=h,this.createOrUpdateSketchPoint_(h)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,n)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const n=t.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,n,s)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,n,s),e=n.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new gf([e])):this.type_==="MultiLineString"?t.setGeometry(new fu([e])):this.type_==="MultiPolygon"&&t.setGeometry(new gu([e])),this.dispatchEvent(new $u(Qu.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new $u(Qu.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(t[0]);let s;if(e==="LineString"||e==="Circle")s=this.sketchCoords_;else if(e==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&s.shift(),s.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const r=t[t.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new ta(new oo(n)),this.updateSketchFeatures_(),this.dispatchEvent(new $u(Qu.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function IE(){const i=kv();return function(t,e){return i[t.getGeometry().getType()]}}function TE(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const OE=RE;function FE(i,t){let e,n,s,r;const o=function(l){const c=Tp(l);let d;return c>1e4?d=Math.round(c/1e6*100)/100+" km<sup>2</sup>":d=Math.round(c*100)/100+" m<sup>2</sup>",d};function a(){const l="Polygon";e=new OE({source:t,type:l,style:new au({fill:new uo({color:"rgba(255, 255, 255, 0.2)"}),stroke:new co({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ou({radius:5,stroke:new co({color:"rgba(0, 0, 0, 0.7)"}),fill:new uo({color:"rgba(255, 255, 255, 0.2)"})})})}),i.addInteraction(e),h();let c;e.on("drawstart",function(d){var p;n=d.feature;let g=d.coordinate;c=(p=n==null?void 0:n.getGeometry())==null?void 0:p.on("change",function(y){const v=y.target;let x;x=o(v),g=v.getInteriorPoint().getCoordinates(),s.innerHTML=x,r.setPosition(g)})}),e.on("drawend",function(){s.className="ol-tooltip ol-tooltip-static",r.setOffset([0,-7]),n=null,s=null,h(),sp(c)})}function h(){var l;s&&((l=s.parentNode)==null||l.removeChild(s)),s=document.createElement("div"),s.className="ol-tooltip ol-tooltip-measure",r=new h2({element:s,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),i.addOverlay(r)}a()}pn.defs("EPSG:2180","+proj=tmerc +lat_0=0 +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"),iM(pn);const kE=await LE("https://mapy.geoportal.gov.pl/wss/service/PZGIK/ORTO/WMTS/StandardResolution"),DE=await Nm("https://mapy.geoportal.gov.pl/wss/service/PZGIK/ORTO/WMS/StandardResolution"),jE=await Pm("https://mapy.geoportal.gov.pl/wss/service/PZGIK/PRG/WMS/AdministrativeBoundaries"),BE=await Pm("https://mapy.geoportal.gov.pl/wss/ext/OkregiWyborcze"),GE=new ws({center:[509847.9,511024.24],projection:"EPSG:2180",resolutions:l2,constrainResolution:!0,zoom:0}),qE=p1({rotate:!1,attribution:!1}),ns=new cv({controls:qE,target:"map",view:GE}),Om={"(WMTS) Ortofotomapa":new F1({source:new cM(kE),visible:!0}),"(WMS) Ortofotomapa":new F1({source:new aM(DE),visible:!1}),"(WMS) Granice":new ag({source:new vg(jE),visible:!1}),"(WMS) Wybory":new ag({source:new vg(BE),visible:!1}),"(WFS) Adresy":new cu({source:Rm("https://mapy.geoportal.gov.pl/wss/ext/KrajowaIntegracjaNumeracjiAdresowej","ms:prg-adresy",ns),visible:!1,minZoom:9}),"(WFS) Nowe Budynki":new cu({source:Rm("https://mapy.geoportal.gov.pl/wss/service/PZGIK/BDOT10k/WFS/NoweBudynki","ms:bud_2022",ns),visible:!1,minZoom:7})};ns.setLayers(Object.values(Om));const UE=new pM(Om),zE=new p6,WE="x: {x}</br>y: {y}",YE=new sM({coordinateFormat:function(i){return d_(i||[],WE,4)},projection:"EPSG:2180",target:document.getElementById("mouse-position")||void 0});ns.addControl(YE),ns.addControl(UE),ns.addControl(zE);const Fm=document.getElementById("scale"),km=()=>{let i=ns.getView().getResolution()||0,t=l2.indexOf(i);t!==-1&&Fm&&(Fm.innerHTML=`Skala 1:${fM[t].toLocaleString()}`)};ns.getView().on("change:resolution",km),km(),g6(ns);const Dm=new cf({wrapX:!1}),VE=new cu({source:Dm});ns.addLayer(VE),FE(ns,Dm)})();export{je as _,IA as __tla};
